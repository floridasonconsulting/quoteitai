{
  "files": [],
  "references": [{ "path": "./tsconfig.app.json" }, { "path": "./tsconfig.node.json" }],
  "compilerOptions": {
    "baseUrl": ".",
    "paths": {
      "@/*": ["./src/*"]
    },
    "noImplicitAny": false,
    "noUnusedParameters": false,
    "skipLibCheck": true,
    "allowJs": true,
    "noUnusedLocals": false,
    "strictNullChecks": false
  }
}
{
  "projectContext": {
    "title": "Offline-First Local + Remote Database Architecture",
    "description": "Train and operate an AI developer agent to design, implement, verify, and continuously maintain an Offline-First data architecture for native mobile applications using a local database as the single source of truth and Supabase as a background sync layer.",
    "objectives": [
      "Ensure robust offline-first functionality and instant UI responsiveness.",
      "Implement a structured local database with full CRUD and sync capabilities.",
      "Integrate a reliable synchronization engine that communicates with Supabase.",
      "Handle data conflicts gracefully with timestamp or custom merge logic.",
      "Separate UI from data sources using the Repository pattern."
    ],
    "architectureModel": "UI ↔ Local Database ↔ Sync Engine ↔ Supabase API ↔ Remote Database",
    "corePrinciple": "The local database (SQLite, Realm, or WatermelonDB) must be the single source of truth. Supabase acts only as a background synchronization endpoint.",
    "trainingPrompt": {
      "role": "AI Developer Agent",
      "instruction": "You are the lead AI developer responsible for correcting and implementing the Offline-First Architecture in this project. Follow the provided guidelines to restructure data handling so all UI and business logic use the local database as the single source of truth. Configure synchronization with Supabase as a background task. Validate the system through offline tests, reconnection sync, and multi-device consistency checks. Document each component for maintainability and future AI audits."
    }
  },
  "tasks": [
    {
      "title": "Audit Local vs Remote Database Implementation",
      "description": "Analyze the current codebase to locate issues in local and remote database configuration, caching, and synchronization logic before correction.",
      "goals": [
        "Detect any UI or business logic that reads/writes directly to Supabase.",
        "Find missing or misconfigured local database tables or sync queues.",
        "Check offline CRUD stability and sync engine readiness.",
        "Identify absent conflict resolution and repository patterns."
      ],
      "expectedOutput": {
        "report": {
          "summary": "Overview of violations of Offline-First principles.",
          "findings": "Specific files and components needing refactor.",
          "recommendations": "Step-by-step corrections aligned to the Offline-First model."
        }
      }
    },
    {
      "title": "Automatic Refactor: Implement Offline-First Local + Remote Database Architecture",
      "description": "Automatically refactor and rebuild the app’s data layer using Offline-First principles based on audit findings.",
      "goals": [
        "Replace all direct Supabase calls in UI/business logic with local DB access.",
        "Create proper local DB schema, sync queue, and retry logic.",
        "Implement Repository and Sync Engine layers with Supabase background sync.",
        "Handle conflicts via timestamps or CRDT where required."
      ],
      "expectedOutput": {
        "deliverables": [
          "Refactored local DB and sync engine modules.",
          "Repository abstraction for all CRUD operations.",
          "Integrated Supabase Realtime and background sync."
        ]
      }
    },
    {
      "title": "Verification & QA: Validate Offline-First Local + Remote Database Architecture",
      "description": "Run comprehensive validation and QA testing to ensure the refactor achieves stable offline and online performance with seamless synchronization.",
      "goals": [
        "Test offline CRUD operations and instant UI response.",
        "Verify background sync and Realtime updates on reconnection.",
        "Validate multi-device conflict resolution and sync correctness.",
        "Measure performance improvements and network efficiency."
      ],
      "expectedOutput": {
        "verificationReport": {
          "summary": "QA results and pass/fail analysis for each test case.",
          "offlineTests": "Offline CRUD validation results.",
          "syncTests": "Push/pull and Realtime sync success rates.",
          "conflictTests": "Resolution consistency results.",
          "performanceMetrics": "Speed and reliability comparisons."
        }
      }
    },
    {
      "title": "Continuous Sync Monitor: Post-Deployment Data Integrity Watchdog",
      "description": "Continuously monitor sync health and automatically repair or re-sync data inconsistencies post-deployment.",
      "goals": [
        "Detect and auto-heal sync drift, missing records, or schema mismatches.",
        "Monitor Supabase Realtime connectivity and queue performance.",
        "Provide weekly integrity and performance reports."
      ],
      "expectedOutput": {
        "syncMonitorReport": {
          "summary": "Health and integrity logs for ongoing sync operations.",
          "autoHealed": "List of re-synced or repaired records.",
          "recommendations": "Optimization advice for sync performance."
        }
      }
    }
  ]
}
