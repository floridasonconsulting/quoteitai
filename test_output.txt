
> vite_react_shadcn_ts@0.0.0 test
> vitest run --run


[1m[46m RUN [49m[22m [36mv4.0.7 [39m[90m/app[39m

[90mstdout[2m | src/pages/__tests__/Settings.whitelabel.test.tsx
[22m[39m[Test Setup] IndexedDB polyfill status: { indexedDB: [32m'object'[39m, IDBKeyRange: [32m'function'[39m }
[Test Setup] Cache Storage API polyfill status: { caches: [32m'object'[39m, navigator_storage: [32m'object'[39m }

[90mstderr[2m | src/pages/__tests__/Settings.whitelabel.test.tsx[2m > [22m[2mSettings - White-Label Branding[2m > [22m[2mTier-Based Access Control[2m > [22m[2mshould show upgrade prompt for non-Max AI tier users
[22m[39m‚ö†Ô∏è React Router Future Flag Warning: React Router will begin wrapping state updates in `React.startTransition` in v7. You can use the `v7_startTransition` future flag to opt-in early. For more information, see https://reactrouter.com/v6/upgrading/future#v7_starttransition.
‚ö†Ô∏è React Router Future Flag Warning: Relative route resolution within Splat routes is changing in v7. You can use the `v7_relativeSplatPath` future flag to opt-in early. For more information, see https://reactrouter.com/v6/upgrading/future#v7_relativesplatpath.

 [31m‚ùØ[39m src/pages/__tests__/Settings.whitelabel.test.tsx [2m([22m[2m7 tests[22m[2m | [22m[31m5 failed[39m[2m)[22m[33m 22878[2mms[22m[39m
       [33m[2m‚úì[22m[39m should show upgrade prompt for non-Max AI tier users [33m 438[2mms[22m[39m
       [32m‚úì[39m should show logo upload for Max AI tier users[32m 135[2mms[22m[39m
[31m       [31m√ó[31m should validate file size (max 2MB)[39m[33m 3500[2mms[22m[39m
[31m       [31m√ó[31m should validate file type (images only)[39m[33m 3300[2mms[22m[39m
[31m       [31m√ó[31m should successfully upload valid logo[39m[33m 5192[2mms[22m[39m
[31m       [31m√ó[31m should show remove button when logo exists[39m[33m 5111[2mms[22m[39m
[31m       [31m√ó[31m should successfully delete logo[39m[33m 5199[2mms[22m[39m
[90mstdout[2m | src/pages/__tests__/FreeTier.test.tsx
[22m[39m[Test Setup] IndexedDB polyfill status: { indexedDB: [32m'object'[39m, IDBKeyRange: [32m'function'[39m }
[Test Setup] Cache Storage API polyfill status: { caches: [32m'object'[39m, navigator_storage: [32m'object'[39m }

[90mstdout[2m | src/pages/__tests__/FreeTier.test.tsx
[22m[39m[BackgroundSync] Background Sync API not supported, using fallback

[90mstdout[2m | src/pages/__tests__/FreeTier.test.tsx[2m > [22m[2mFree Tier Features[2m > [22m[2mshould block AI features and show upgrade prompt
[22m[39m[Dedup] Starting new request for fetch-customers-test-user
[CacheManager] Cache miss for customers:all
[Dedup] Starting new request for fetch-items-test-user
[CacheManager] Cache miss for items:all

[90mstderr[2m | src/pages/__tests__/FreeTier.test.tsx[2m > [22m[2mFree Tier Features[2m > [22m[2mshould block AI features and show upgrade prompt
[22m[39mError fetching settings: TypeError: __vite_ssr_import_0__.supabase.from(...).select(...).eq(...).maybeSingle is not a function
    at getSettings [90m(/app/[39msrc/lib/db-service.ts:103:8[90m)[39m
    at loadData [90m(/app/[39msrc/pages/NewQuote.tsx:96:7[90m)[39m
    at [90m/app/[39msrc/pages/NewQuote.tsx:88:5
    at commitHookEffectListMount [90m(/app/[39mnode_modules/[4mreact-dom[24m/cjs/react-dom.development.js:23189:26[90m)[39m
    at commitPassiveMountOnFiber [90m(/app/[39mnode_modules/[4mreact-dom[24m/cjs/react-dom.development.js:24970:11[90m)[39m
    at commitPassiveMountEffects_complete [90m(/app/[39mnode_modules/[4mreact-dom[24m/cjs/react-dom.development.js:24930:9[90m)[39m
    at commitPassiveMountEffects_begin [90m(/app/[39mnode_modules/[4mreact-dom[24m/cjs/react-dom.development.js:24917:7[90m)[39m
    at commitPassiveMountEffects [90m(/app/[39mnode_modules/[4mreact-dom[24m/cjs/react-dom.development.js:24905:3[90m)[39m
    at flushPassiveEffectsImpl [90m(/app/[39mnode_modules/[4mreact-dom[24m/cjs/react-dom.development.js:27078:3[90m)[39m
    at flushPassiveEffects [90m(/app/[39mnode_modules/[4mreact-dom[24m/cjs/react-dom.development.js:27023:14[90m)[39m
‚ö†Ô∏è React Router Future Flag Warning: React Router will begin wrapping state updates in `React.startTransition` in v7. You can use the `v7_startTransition` future flag to opt-in early. For more information, see https://reactrouter.com/v6/upgrading/future#v7_starttransition.
‚ö†Ô∏è React Router Future Flag Warning: Relative route resolution within Splat routes is changing in v7. You can use the `v7_relativeSplatPath` future flag to opt-in early. For more information, see https://reactrouter.com/v6/upgrading/future#v7_relativesplatpath.

[90mstdout[2m | src/pages/__tests__/FreeTier.test.tsx[2m > [22m[2mFree Tier Features[2m > [22m[2mshould block AI features and show upgrade prompt
[22m[39m[IndexedDB] Upgrading database schema to version [33m1[39m
[IndexedDB] Created customers store
[IndexedDB] Created items store
[IndexedDB] Created quotes store
[IndexedDB] Created company_settings store
[IndexedDB] Created sync_queue store

[90mstdout[2m | src/pages/__tests__/FreeTier.test.tsx[2m > [22m[2mFree Tier Features[2m > [22m[2mshould block AI features and show upgrade prompt
[22m[39m[IndexedDB] Database opened successfully

[90mstdout[2m | src/pages/__tests__/FreeTier.test.tsx[2m > [22m[2mFree Tier Features[2m > [22m[2mshould block AI features and show upgrade prompt
[22m[39m[CustomerService] IndexedDB check: found 0 customers
[CustomerService] Starting Supabase fetch for user test-user

[90mstdout[2m | src/pages/__tests__/FreeTier.test.tsx[2m > [22m[2mFree Tier Features[2m > [22m[2mshould block AI features and show upgrade prompt
[22m[39m[CustomerService] Supabase returned 0 customers
[CustomerService] Supabase empty - checking IndexedDB for local data

[90mstdout[2m | src/pages/__tests__/FreeTier.test.tsx[2m > [22m[2mFree Tier Features[2m > [22m[2mshould block AI features and show upgrade prompt
[22m[39m[CustomerService] IndexedDB has 0 customers
[CustomerService] Caching 0 customers from Supabase
[CacheManager] Cached customers:all

[90mstdout[2m | src/pages/__tests__/FreeTier.test.tsx[2m > [22m[2mFree Tier Features[2m > [22m[2mshould block AI features and show upgrade prompt
[22m[39m[CustomerService] RETURNING 0 customers from Supabase

[90mstdout[2m | src/pages/__tests__/FreeTier.test.tsx[2m > [22m[2mFree Tier Features[2m > [22m[2mshould block AI features and show upgrade prompt
[22m[39m[Dedup] Cleanup for fetch-customers-test-user: success

[90mstdout[2m | src/pages/__tests__/FreeTier.test.tsx[2m > [22m[2mFree Tier Features[2m > [22m[2mshould block AI features and show upgrade prompt
[22m[39m[CacheManager] Cached items:all

[90mstdout[2m | src/pages/__tests__/FreeTier.test.tsx[2m > [22m[2mFree Tier Features[2m > [22m[2mshould block AI features and show upgrade prompt
[22m[39m[Dedup] Cleanup for fetch-items-test-user: success

[90mstdout[2m | src/pages/__tests__/FreeTier.test.tsx[2m > [22m[2mFree Tier Features[2m > [22m[2mshould block email sending and show upgrade prompt
[22m[39m[LoadingState] Started: dashboard-load-1764076702846 - Loading dashboard data
[Dedup] Starting new request for fetch-quotes-test-user
[CacheManager] Cache miss for quotes:all
[Dedup] Starting new request for fetch-customers-test-user
[CacheManager] Memory cache hit for customers:all
[Dedup] Starting new request for fetch-items-test-user

[90mstdout[2m | src/pages/__tests__/FreeTier.test.tsx[2m > [22m[2mFree Tier Features[2m > [22m[2mshould block email sending and show upgrade prompt
[22m[39m[CacheManager] Cached quotes:all

[90mstdout[2m | src/pages/__tests__/FreeTier.test.tsx[2m > [22m[2mFree Tier Features[2m > [22m[2mshould block email sending and show upgrade prompt
[22m[39m[Dedup] Cleanup for fetch-quotes-test-user: success

[90mstdout[2m | src/pages/__tests__/FreeTier.test.tsx[2m > [22m[2mFree Tier Features[2m > [22m[2mshould block email sending and show upgrade prompt
[22m[39m[CustomerService] IndexedDB check: found 0 customers
[CustomerService] Starting Supabase fetch for user test-user

[90mstdout[2m | src/pages/__tests__/FreeTier.test.tsx[2m > [22m[2mFree Tier Features[2m > [22m[2mshould block email sending and show upgrade prompt
[22m[39m[CustomerService] Supabase returned 0 customers
[CustomerService] Supabase empty - checking IndexedDB for local data

[90mstdout[2m | src/pages/__tests__/FreeTier.test.tsx[2m > [22m[2mFree Tier Features[2m > [22m[2mshould block email sending and show upgrade prompt
[22m[39m[CustomerService] IndexedDB has 0 customers
[CustomerService] Caching 0 customers from Supabase
[CacheManager] Cached customers:all

[90mstdout[2m | src/pages/__tests__/FreeTier.test.tsx[2m > [22m[2mFree Tier Features[2m > [22m[2mshould block email sending and show upgrade prompt
[22m[39m[CustomerService] RETURNING 0 customers from Supabase

[90mstdout[2m | src/pages/__tests__/FreeTier.test.tsx[2m > [22m[2mFree Tier Features[2m > [22m[2mshould block email sending and show upgrade prompt
[22m[39m[Dedup] Cleanup for fetch-customers-test-user: success

[90mstdout[2m | src/pages/__tests__/FreeTier.test.tsx[2m > [22m[2mFree Tier Features[2m > [22m[2mshould block email sending and show upgrade prompt
[22m[39m[CacheManager] Memory cache hit for items:all

[90mstdout[2m | src/pages/__tests__/FreeTier.test.tsx[2m > [22m[2mFree Tier Features[2m > [22m[2mshould block email sending and show upgrade prompt
[22m[39m[CacheManager] Cached items:all

[90mstdout[2m | src/pages/__tests__/FreeTier.test.tsx[2m > [22m[2mFree Tier Features[2m > [22m[2mshould block email sending and show upgrade prompt
[22m[39m[Dedup] Cleanup for fetch-items-test-user: success

[90mstdout[2m | src/pages/__tests__/FreeTier.test.tsx[2m > [22m[2mFree Tier Features[2m > [22m[2mshould block email sending and show upgrade prompt
[22m[39m[LoadingState] Completed: dashboard-load-1764076702846 in 63ms

[90mstderr[2m | src/pages/__tests__/FreeTier.test.tsx[2m > [22m[2mFree Tier Features[2m > [22m[2mshould not show white-label branding options
[22m[39mError fetching settings: TypeError: __vite_ssr_import_0__.supabase.from(...).select(...).eq(...).maybeSingle is not a function
    at getSettings [90m(/app/[39msrc/lib/db-service.ts:103:8[90m)[39m
    at loadSettings [90m(/app/[39msrc/pages/Settings.tsx:77:36[90m)[39m
    at [90m/app/[39msrc/pages/Settings.tsx:88:5
    at commitHookEffectListMount [90m(/app/[39mnode_modules/[4mreact-dom[24m/cjs/react-dom.development.js:23189:26[90m)[39m
    at commitPassiveMountOnFiber [90m(/app/[39mnode_modules/[4mreact-dom[24m/cjs/react-dom.development.js:24970:11[90m)[39m
    at commitPassiveMountEffects_complete [90m(/app/[39mnode_modules/[4mreact-dom[24m/cjs/react-dom.development.js:24930:9[90m)[39m
    at commitPassiveMountEffects_begin [90m(/app/[39mnode_modules/[4mreact-dom[24m/cjs/react-dom.development.js:24917:7[90m)[39m
    at commitPassiveMountEffects [90m(/app/[39mnode_modules/[4mreact-dom[24m/cjs/react-dom.development.js:24905:3[90m)[39m
    at flushPassiveEffectsImpl [90m(/app/[39mnode_modules/[4mreact-dom[24m/cjs/react-dom.development.js:27078:3[90m)[39m
    at flushPassiveEffects [90m(/app/[39mnode_modules/[4mreact-dom[24m/cjs/react-dom.development.js:27023:14[90m)[39m

 [31m‚ùØ[39m src/pages/__tests__/FreeTier.test.tsx [2m([22m[2m5 tests[22m[2m | [22m[31m1 failed[39m[2m)[22m[33m 1373[2mms[22m[39m
[31m     [31m√ó[31m should block AI features and show upgrade prompt[39m[33m 1027[2mms[22m[39m
     [32m‚úì[39m should block email sending and show upgrade prompt[32m 74[2mms[22m[39m
     [32m‚úì[39m should not show white-label branding options[32m 270[2mms[22m[39m
     [32m‚úì[39m should allow basic customer viewing[32m 0[2mms[22m[39m
     [32m‚úì[39m should enforce quote limits for free tier[32m 0[2mms[22m[39m
[90mstdout[2m | src/pages/__tests__/ProTier.test.tsx
[22m[39m[Test Setup] IndexedDB polyfill status: { indexedDB: [32m'object'[39m, IDBKeyRange: [32m'function'[39m }
[Test Setup] Cache Storage API polyfill status: { caches: [32m'object'[39m, navigator_storage: [32m'object'[39m }

[90mstdout[2m | src/pages/__tests__/ProTier.test.tsx
[22m[39m[BackgroundSync] Background Sync API not supported, using fallback

[90mstdout[2m | src/pages/__tests__/ProTier.test.tsx[2m > [22m[2mPro Tier Features[2m > [22m[2mshould block white-label branding
[22m[39m[DB Service] Retrieved settings from DB: {
  proposalTemplate: [32m'classic'[39m,
  logoDisplayOption: [32m'both'[39m,
  notifyEmailAccepted: [33mtrue[39m,
  notifyEmailDeclined: [33mtrue[39m
}

[90mstderr[2m | src/pages/__tests__/ProTier.test.tsx[2m > [22m[2mPro Tier Features[2m > [22m[2mshould block white-label branding
[22m[39m‚ö†Ô∏è React Router Future Flag Warning: React Router will begin wrapping state updates in `React.startTransition` in v7. You can use the `v7_startTransition` future flag to opt-in early. For more information, see https://reactrouter.com/v6/upgrading/future#v7_starttransition.
‚ö†Ô∏è React Router Future Flag Warning: Relative route resolution within Splat routes is changing in v7. You can use the `v7_relativeSplatPath` future flag to opt-in early. For more information, see https://reactrouter.com/v6/upgrading/future#v7_relativesplatpath.

 [31m‚ùØ[39m src/pages/__tests__/ProTier.test.tsx [2m([22m[2m10 tests[22m[2m | [22m[31m1 failed[39m[2m)[22m[33m 1031[2mms[22m[39m
     [32m‚úì[39m should allow 50 quotes per month (600/year for annual)[32m 1[2mms[22m[39m
     [32m‚úì[39m should enable AI Quote Titles feature[32m 0[2mms[22m[39m
     [32m‚úì[39m should enable AI Item Descriptions feature[32m 0[2mms[22m[39m
     [32m‚úì[39m should enable AI Terms & Conditions feature[32m 0[2mms[22m[39m
     [32m‚úì[39m should enable AI Executive Summaries feature[32m 0[2mms[22m[39m
     [32m‚úì[39m should enable AI Follow-up Messages with 30/month limit[32m 0[2mms[22m[39m
     [32m‚úì[39m should enable AI Discount Justifications feature[32m 0[2mms[22m[39m
     [32m‚úì[39m should enable HTML Email sending[32m 0[2mms[22m[39m
     [32m‚úì[39m should block Max AI exclusive features[32m 0[2mms[22m[39m
[31m     [31m√ó[31m should block white-label branding[39m[33m 1027[2mms[22m[39m
[90mstdout[2m | src/hooks/__tests__/useSyncManager.test.tsx
[22m[39m[Test Setup] IndexedDB polyfill status: { indexedDB: [32m'object'[39m, IDBKeyRange: [32m'function'[39m }
[Test Setup] Cache Storage API polyfill status: { caches: [32m'object'[39m, navigator_storage: [32m'object'[39m }

[90mstdout[2m | src/hooks/__tests__/useSyncManager.test.tsx[2m > [22m[2museSyncManager[2m > [22m[2mshould queue a change
[22m[39m[SyncManager] Queued change: create customers

[90mstdout[2m | src/hooks/__tests__/useSyncManager.test.tsx[2m > [22m[2museSyncManager[2m > [22m[2mshould queue multiple changes
[22m[39m[SyncManager] Queued change: create customers
[SyncManager] Queued change: update items
[SyncManager] Queued change: delete quotes

[90mstdout[2m | src/hooks/__tests__/useSyncManager.test.tsx[2m > [22m[2museSyncManager[2m > [22m[2mshould sync queued changes when online
[22m[39m[SyncManager] Queued change: create customers
[SyncManager] üîÑ Syncing 1 changes...

[90mstdout[2m | src/hooks/__tests__/useSyncManager.test.tsx[2m > [22m[2museSyncManager[2m > [22m[2mshould sync queued changes when online
[22m[39m[SyncManager] ‚úÖ Processed create for customers

[90mstdout[2m | src/hooks/__tests__/useSyncManager.test.tsx[2m > [22m[2museSyncManager[2m > [22m[2mshould sync queued changes when online
[22m[39m[SyncManager] ‚úÖ All changes synced successfully

[90mstdout[2m | src/hooks/__tests__/useSyncManager.test.tsx[2m > [22m[2museSyncManager[2m > [22m[2mshould not sync when offline
[22m[39m[SyncManager] Offline, skipping sync
[SyncManager] Queued change: create customers
[SyncManager] Offline, skipping sync

[90mstdout[2m | src/hooks/__tests__/useSyncManager.test.tsx[2m > [22m[2museSyncManager[2m > [22m[2mshould clear the queue
[22m[39m[SyncManager] Queued change: create customers
[SyncManager] Queue cleared

[90mstdout[2m | src/hooks/__tests__/useSyncManager.test.tsx[2m > [22m[2museSyncManager[2m > [22m[2mshould handle sync errors gracefully
[22m[39m[SyncManager] Queued change: create customers
[SyncManager] üîÑ Syncing 1 changes...

[90mstderr[2m | src/hooks/__tests__/useSyncManager.test.tsx[2m > [22m[2museSyncManager[2m > [22m[2mshould handle sync errors gracefully
[22m[39m[SyncManager] ‚ùå Error processing create for customers: Error: Insert failed
    at [90m/app/[39msrc/hooks/__tests__/useSyncManager.test.tsx:205:51
    at [90mfile:///app/[39mnode_modules/[4m@vitest/runner[24m/dist/index.js:157:11
    at [90mfile:///app/[39mnode_modules/[4m@vitest/runner[24m/dist/index.js:753:26
    at [90mfile:///app/[39mnode_modules/[4m@vitest/runner[24m/dist/index.js:1636:20
    at new Promise (<anonymous>)
    at runWithTimeout [90m(file:///app/[39mnode_modules/[4m@vitest/runner[24m/dist/index.js:1602:10[90m)[39m
    at runTest [90m(file:///app/[39mnode_modules/[4m@vitest/runner[24m/dist/index.js:1309:12[90m)[39m
    at runSuite [90m(file:///app/[39mnode_modules/[4m@vitest/runner[24m/dist/index.js:1468:8[90m)[39m
    at runSuite [90m(file:///app/[39mnode_modules/[4m@vitest/runner[24m/dist/index.js:1468:8[90m)[39m
    at runFiles [90m(file:///app/[39mnode_modules/[4m@vitest/runner[24m/dist/index.js:1526:3[90m)[39m

[90mstdout[2m | src/hooks/__tests__/useSyncManager.test.tsx[2m > [22m[2museSyncManager[2m > [22m[2mshould handle sync errors gracefully
[22m[39m[SyncManager] Retrying (1/3)...

[90mstdout[2m | src/hooks/__tests__/useSyncManager.test.tsx[2m > [22m[2museSyncManager[2m > [22m[2mshould handle sync errors gracefully
[22m[39m[SyncManager] Retrying (2/3)...

[90mstderr[2m | src/hooks/__tests__/useSyncManager.test.tsx[2m > [22m[2museSyncManager[2m > [22m[2mshould handle sync errors gracefully
[22m[39m[SyncManager] ‚ùå Error processing create for customers: Error: Insert failed
    at [90m/app/[39msrc/hooks/__tests__/useSyncManager.test.tsx:205:51
    at [90mfile:///app/[39mnode_modules/[4m@vitest/runner[24m/dist/index.js:157:11
    at [90mfile:///app/[39mnode_modules/[4m@vitest/runner[24m/dist/index.js:753:26
    at [90mfile:///app/[39mnode_modules/[4m@vitest/runner[24m/dist/index.js:1636:20
    at new Promise (<anonymous>)
    at runWithTimeout [90m(file:///app/[39mnode_modules/[4m@vitest/runner[24m/dist/index.js:1602:10[90m)[39m
    at runTest [90m(file:///app/[39mnode_modules/[4m@vitest/runner[24m/dist/index.js:1309:12[90m)[39m
    at runSuite [90m(file:///app/[39mnode_modules/[4m@vitest/runner[24m/dist/index.js:1468:8[90m)[39m
    at runSuite [90m(file:///app/[39mnode_modules/[4m@vitest/runner[24m/dist/index.js:1468:8[90m)[39m
    at runFiles [90m(file:///app/[39mnode_modules/[4m@vitest/runner[24m/dist/index.js:1526:3[90m)[39m

[90mstdout[2m | src/hooks/__tests__/useSyncManager.test.tsx[2m > [22m[2museSyncManager[2m > [22m[2mshould handle sync errors gracefully
[22m[39m[SyncManager] Retrying (3/3)...

[90mstderr[2m | src/hooks/__tests__/useSyncManager.test.tsx[2m > [22m[2museSyncManager[2m > [22m[2mshould handle sync errors gracefully
[22m[39m[SyncManager] ‚ùå Error processing create for customers: Error: Insert failed
    at [90m/app/[39msrc/hooks/__tests__/useSyncManager.test.tsx:205:51
    at [90mfile:///app/[39mnode_modules/[4m@vitest/runner[24m/dist/index.js:157:11
    at [90mfile:///app/[39mnode_modules/[4m@vitest/runner[24m/dist/index.js:753:26
    at [90mfile:///app/[39mnode_modules/[4m@vitest/runner[24m/dist/index.js:1636:20
    at new Promise (<anonymous>)
    at runWithTimeout [90m(file:///app/[39mnode_modules/[4m@vitest/runner[24m/dist/index.js:1602:10[90m)[39m
    at runTest [90m(file:///app/[39mnode_modules/[4m@vitest/runner[24m/dist/index.js:1309:12[90m)[39m
    at runSuite [90m(file:///app/[39mnode_modules/[4m@vitest/runner[24m/dist/index.js:1468:8[90m)[39m
    at runSuite [90m(file:///app/[39mnode_modules/[4m@vitest/runner[24m/dist/index.js:1468:8[90m)[39m
    at runFiles [90m(file:///app/[39mnode_modules/[4m@vitest/runner[24m/dist/index.js:1526:3[90m)[39m

[90mstderr[2m | src/hooks/__tests__/useSyncManager.test.tsx[2m > [22m[2museSyncManager[2m > [22m[2mshould handle sync errors gracefully
[22m[39m[SyncManager] ‚ùå Error processing create for customers: Error: Insert failed
    at [90m/app/[39msrc/hooks/__tests__/useSyncManager.test.tsx:205:51
    at [90mfile:///app/[39mnode_modules/[4m@vitest/runner[24m/dist/index.js:157:11
    at [90mfile:///app/[39mnode_modules/[4m@vitest/runner[24m/dist/index.js:753:26
    at [90mfile:///app/[39mnode_modules/[4m@vitest/runner[24m/dist/index.js:1636:20
    at new Promise (<anonymous>)
    at runWithTimeout [90m(file:///app/[39mnode_modules/[4m@vitest/runner[24m/dist/index.js:1602:10[90m)[39m
    at runTest [90m(file:///app/[39mnode_modules/[4m@vitest/runner[24m/dist/index.js:1309:12[90m)[39m
    at runSuite [90m(file:///app/[39mnode_modules/[4m@vitest/runner[24m/dist/index.js:1468:8[90m)[39m
    at runSuite [90m(file:///app/[39mnode_modules/[4m@vitest/runner[24m/dist/index.js:1468:8[90m)[39m
    at runFiles [90m(file:///app/[39mnode_modules/[4m@vitest/runner[24m/dist/index.js:1526:3[90m)[39m

[90mstderr[2m | src/hooks/__tests__/useSyncManager.test.tsx[2m > [22m[2museSyncManager[2m > [22m[2mshould handle sync errors gracefully
[22m[39m[SyncManager] ‚ö†Ô∏è 1 changes failed to sync

[90mstdout[2m | src/hooks/__tests__/useSyncManager.test.tsx[2m > [22m[2museSyncManager[2m > [22m[2mshould retry failed changes
[22m[39m[SyncManager] Queued change: create customers
[SyncManager] üîÑ Syncing 1 changes...

[90mstderr[2m | src/hooks/__tests__/useSyncManager.test.tsx[2m > [22m[2museSyncManager[2m > [22m[2mshould retry failed changes
[22m[39m[SyncManager] ‚ùå Error processing create for customers: Error: First attempt failed
    at Object.<anonymous> [90m(/app/[39msrc/hooks/__tests__/useSyncManager.test.tsx:240:41[90m)[39m
    at Object.insert [90m(file:///app/[39mnode_modules/[4m@vitest/spy[24m/dist/index.js:274:34[90m)[39m
    at processChange [90m(/app/[39msrc/hooks/useSyncManager.ts:87:14[90m)[39m
    at Object.syncQueue [90m(/app/[39msrc/hooks/useSyncManager.ts:169:29[90m)[39m
    at [90m/app/[39msrc/hooks/__tests__/useSyncManager.test.tsx:258:28
    at [90m/app/[39mnode_modules/[4m@testing-library/react[24m/dist/act-compat.js:48:24
    at act [90m(/app/[39mnode_modules/[4mreact[24m/cjs/react.development.js:2512:16[90m)[39m
    at Proxy.act [90m(/app/[39mnode_modules/[4m@testing-library/react[24m/dist/act-compat.js:47:25[90m)[39m
    at [90m/app/[39msrc/hooks/__tests__/useSyncManager.test.tsx:257:11
    at [90mfile:///app/[39mnode_modules/[4m@vitest/runner[24m/dist/index.js:157:11

[90mstdout[2m | src/hooks/__tests__/useSyncManager.test.tsx[2m > [22m[2museSyncManager[2m > [22m[2mshould retry failed changes
[22m[39m[SyncManager] Retrying (1/3)...

[90mstdout[2m | src/hooks/__tests__/useSyncManager.test.tsx[2m > [22m[2museSyncManager[2m > [22m[2mshould retry failed changes
[22m[39m[SyncManager] ‚úÖ Processed create for customers

[90mstdout[2m | src/hooks/__tests__/useSyncManager.test.tsx[2m > [22m[2museSyncManager[2m > [22m[2mshould retry failed changes
[22m[39m[SyncManager] ‚úÖ All changes synced successfully

[90mstdout[2m | src/hooks/__tests__/useSyncManager.test.tsx[2m > [22m[2museSyncManager[2m > [22m[2mshould trigger sync when coming back online
[22m[39m[SyncManager] Queued change: create customers
[SyncManager] Connection restored, syncing...
[SyncManager] üîÑ Syncing 1 changes...

[90mstdout[2m | src/hooks/__tests__/useSyncManager.test.tsx[2m > [22m[2museSyncManager[2m > [22m[2mshould trigger sync when coming back online
[22m[39m[SyncManager] ‚úÖ Processed create for customers

[90mstdout[2m | src/hooks/__tests__/useSyncManager.test.tsx[2m > [22m[2museSyncManager[2m > [22m[2mshould trigger sync when coming back online
[22m[39m[SyncManager] ‚úÖ All changes synced successfully

[90mstdout[2m | src/hooks/__tests__/useSyncManager.test.tsx[2m > [22m[2museSyncManager[2m > [22m[2mshould integrate with BackgroundSyncManager
[22m[39m[SyncManager] Queued change: create customers

[90mstdout[2m | src/hooks/__tests__/useSyncManager.test.tsx[2m > [22m[2museSyncManager[2m > [22m[2mshould handle missing user ID
[22m[39m[SyncManager] Queued change: create customers
[SyncManager] üîÑ Syncing 1 changes...

[90mstderr[2m | src/hooks/__tests__/useSyncManager.test.tsx[2m > [22m[2museSyncManager[2m > [22m[2mshould handle missing user ID
[22m[39m[SyncManager] No user ID, cannot process change

[90mstderr[2m | src/hooks/__tests__/useSyncManager.test.tsx[2m > [22m[2museSyncManager[2m > [22m[2mshould handle missing user ID
[22m[39m[SyncManager] ‚ö†Ô∏è 1 changes failed to sync

 [32m‚úì[39m src/hooks/__tests__/useSyncManager.test.tsx [2m([22m[2m11 tests[22m[2m)[22m[33m 7305[2mms[22m[39m
     [33m[2m‚úì[22m[39m should handle sync errors gracefully [33m 6061[2mms[22m[39m
     [33m[2m‚úì[22m[39m should retry failed changes [33m 1005[2mms[22m[39m
[90mstdout[2m | src/contexts/__tests__/AuthContext.tier.test.tsx
[22m[39m[Test Setup] IndexedDB polyfill status: { indexedDB: [32m'object'[39m, IDBKeyRange: [32m'function'[39m }
[Test Setup] Cache Storage API polyfill status: { caches: [32m'object'[39m, navigator_storage: [32m'object'[39m }

[90mstderr[2m | src/contexts/__tests__/AuthContext.tier.test.tsx[2m > [22m[2mAuthContext - Tier-Based Access[2m > [22m[2misMaxAITier flag[2m > [22m[2mshould return true for admin tier users
[22m[39m‚ö†Ô∏è React Router Future Flag Warning: React Router will begin wrapping state updates in `React.startTransition` in v7. You can use the `v7_startTransition` future flag to opt-in early. For more information, see https://reactrouter.com/v6/upgrading/future#v7_starttransition.
‚ö†Ô∏è React Router Future Flag Warning: Relative route resolution within Splat routes is changing in v7. You can use the `v7_relativeSplatPath` future flag to opt-in early. For more information, see https://reactrouter.com/v6/upgrading/future#v7_relativesplatpath.

[90mstdout[2m | src/contexts/__tests__/AuthContext.tier.test.tsx[2m > [22m[2mAuthContext - Tier-Based Access[2m > [22m[2misMaxAITier flag[2m > [22m[2mshould return true for admin tier users
[22m[39m[AUTH DEBUG] Auth state change: SIGNED_IN Session: [33mtrue[39m
[AuthContext] Checking role for user: admin-user

[90mstderr[2m | src/contexts/__tests__/AuthContext.tier.test.tsx[2m > [22m[2mAuthContext - Tier-Based Access[2m > [22m[2misMaxAITier flag[2m > [22m[2mshould return true for admin tier users
[22m[39mWarning: An update to AuthProvider inside a test was not wrapped in act(...).

When testing, code that causes React state updates should be wrapped into act(...):

act(() => {
  /* fire events that update state */
});
/* assert on the output */

This ensures that you're testing the behavior the user would see in the browser. Learn more at https://reactjs.org/link/wrap-tests-with-act
    at AuthProvider (/app/src/contexts/AuthContext.tsx:16:25)
    at Router (/app/node_modules/react-router/dist/umd/react-router.development.js:1207:17)
    at BrowserRouter (/app/node_modules/react-router-dom/dist/umd/react-router-dom.development.js:695:7)
    at wrapper (/app/src/contexts/__tests__/AuthContext.tier.test.tsx:31:20)
Warning: An update to AuthProvider inside a test was not wrapped in act(...).

When testing, code that causes React state updates should be wrapped into act(...):

act(() => {
  /* fire events that update state */
});
/* assert on the output */

This ensures that you're testing the behavior the user would see in the browser. Learn more at https://reactjs.org/link/wrap-tests-with-act
    at AuthProvider (/app/src/contexts/AuthContext.tsx:16:25)
    at Router (/app/node_modules/react-router/dist/umd/react-router.development.js:1207:17)
    at BrowserRouter (/app/node_modules/react-router-dom/dist/umd/react-router-dom.development.js:695:7)
    at wrapper (/app/src/contexts/__tests__/AuthContext.tier.test.tsx:31:20)

[90mstdout[2m | src/contexts/__tests__/AuthContext.tier.test.tsx[2m > [22m[2mAuthContext - Tier-Based Access[2m > [22m[2misMaxAITier flag[2m > [22m[2mshould return true for admin tier users
[22m[39m[AuthContext] Role fetched: admin

[90mstdout[2m | src/contexts/__tests__/AuthContext.tier.test.tsx[2m > [22m[2mAuthContext - Tier-Based Access[2m > [22m[2misMaxAITier flag[2m > [22m[2mshould return true for admin tier users
[22m[39m[AUTH DEBUG] Setting loading to false after role check

[90mstdout[2m | src/contexts/__tests__/AuthContext.tier.test.tsx[2m > [22m[2mAuthContext - Tier-Based Access[2m > [22m[2misMaxAITier flag[2m > [22m[2mshould return true for max tier users
[22m[39m[AUTH DEBUG] Auth state change: SIGNED_IN Session: [33mtrue[39m
[AuthContext] Checking role for user: max-user

[90mstderr[2m | src/contexts/__tests__/AuthContext.tier.test.tsx[2m > [22m[2mAuthContext - Tier-Based Access[2m > [22m[2misMaxAITier flag[2m > [22m[2mshould return true for max tier users
[22m[39mWarning: An update to AuthProvider inside a test was not wrapped in act(...).

When testing, code that causes React state updates should be wrapped into act(...):

act(() => {
  /* fire events that update state */
});
/* assert on the output */

This ensures that you're testing the behavior the user would see in the browser. Learn more at https://reactjs.org/link/wrap-tests-with-act
    at AuthProvider (/app/src/contexts/AuthContext.tsx:16:25)
    at Router (/app/node_modules/react-router/dist/umd/react-router.development.js:1207:17)
    at BrowserRouter (/app/node_modules/react-router-dom/dist/umd/react-router-dom.development.js:695:7)
    at wrapper (/app/src/contexts/__tests__/AuthContext.tier.test.tsx:31:20)
Warning: An update to AuthProvider inside a test was not wrapped in act(...).

When testing, code that causes React state updates should be wrapped into act(...):

act(() => {
  /* fire events that update state */
});
/* assert on the output */

This ensures that you're testing the behavior the user would see in the browser. Learn more at https://reactjs.org/link/wrap-tests-with-act
    at AuthProvider (/app/src/contexts/AuthContext.tsx:16:25)
    at Router (/app/node_modules/react-router/dist/umd/react-router.development.js:1207:17)
    at BrowserRouter (/app/node_modules/react-router-dom/dist/umd/react-router-dom.development.js:695:7)
    at wrapper (/app/src/contexts/__tests__/AuthContext.tier.test.tsx:31:20)

[90mstdout[2m | src/contexts/__tests__/AuthContext.tier.test.tsx[2m > [22m[2mAuthContext - Tier-Based Access[2m > [22m[2misMaxAITier flag[2m > [22m[2mshould return true for max tier users
[22m[39m[AuthContext] Role fetched: max

[90mstdout[2m | src/contexts/__tests__/AuthContext.tier.test.tsx[2m > [22m[2mAuthContext - Tier-Based Access[2m > [22m[2misMaxAITier flag[2m > [22m[2mshould return true for max tier users
[22m[39m[AUTH DEBUG] Setting loading to false after role check

[90mstdout[2m | src/contexts/__tests__/AuthContext.tier.test.tsx[2m > [22m[2mAuthContext - Tier-Based Access[2m > [22m[2misMaxAITier flag[2m > [22m[2mshould return true for max tier users
[22m[39m[MigrationHelper] Starting migration check for user: admin-user
[MigrationHelper] Starting localStorage ‚Üí IndexedDB migration
[AuthContext] No valid session for subscription check
[MigrationHelper] IndexedDB migration not needed or already completed

[90mstdout[2m | src/contexts/__tests__/AuthContext.tier.test.tsx[2m > [22m[2mAuthContext - Tier-Based Access[2m > [22m[2misMaxAITier flag[2m > [22m[2mshould return true for max tier users
[22m[39m[MigrationHelper] localStorage ‚Üí IndexedDB migration completed
[MigrationHelper] Starting IndexedDB ‚Üí Supabase sync
[MigrationHelper] Starting Supabase sync for user: admin-user

[90mstdout[2m | src/contexts/__tests__/AuthContext.tier.test.tsx[2m > [22m[2mAuthContext - Tier-Based Access[2m > [22m[2misMaxAITier flag[2m > [22m[2mshould return true for max tier users
[22m[39m[IndexedDB] Upgrading database schema to version [33m1[39m
[IndexedDB] Created customers store
[IndexedDB] Created items store
[IndexedDB] Created quotes store
[IndexedDB] Created company_settings store
[IndexedDB] Created sync_queue store

[90mstdout[2m | src/contexts/__tests__/AuthContext.tier.test.tsx[2m > [22m[2mAuthContext - Tier-Based Access[2m > [22m[2misMaxAITier flag[2m > [22m[2mshould return false for pro tier users
[22m[39m[IndexedDB] Database opened successfully

[90mstderr[2m | src/contexts/__tests__/AuthContext.tier.test.tsx[2m > [22m[2mAuthContext - Tier-Based Access[2m > [22m[2misMaxAITier flag[2m > [22m[2mshould return false for pro tier users
[22m[39mWarning: An update to AuthProvider inside a test was not wrapped in act(...).

When testing, code that causes React state updates should be wrapped into act(...):

act(() => {
  /* fire events that update state */
});
/* assert on the output */

This ensures that you're testing the behavior the user would see in the browser. Learn more at https://reactjs.org/link/wrap-tests-with-act
    at AuthProvider (/app/src/contexts/AuthContext.tsx:16:25)
    at Router (/app/node_modules/react-router/dist/umd/react-router.development.js:1207:17)
    at BrowserRouter (/app/node_modules/react-router-dom/dist/umd/react-router-dom.development.js:695:7)
    at wrapper (/app/src/contexts/__tests__/AuthContext.tier.test.tsx:31:20)
Warning: An update to AuthProvider inside a test was not wrapped in act(...).

When testing, code that causes React state updates should be wrapped into act(...):

act(() => {
  /* fire events that update state */
});
/* assert on the output */

This ensures that you're testing the behavior the user would see in the browser. Learn more at https://reactjs.org/link/wrap-tests-with-act
    at AuthProvider (/app/src/contexts/AuthContext.tsx:16:25)
    at Router (/app/node_modules/react-router/dist/umd/react-router.development.js:1207:17)
    at BrowserRouter (/app/node_modules/react-router-dom/dist/umd/react-router-dom.development.js:695:7)
    at wrapper (/app/src/contexts/__tests__/AuthContext.tier.test.tsx:31:20)

[90mstdout[2m | src/contexts/__tests__/AuthContext.tier.test.tsx[2m > [22m[2mAuthContext - Tier-Based Access[2m > [22m[2misMaxAITier flag[2m > [22m[2mshould return false for pro tier users
[22m[39m[AUTH DEBUG] Auth state change: SIGNED_IN Session: [33mtrue[39m
[AuthContext] Checking role for user: pro-user

[90mstdout[2m | src/contexts/__tests__/AuthContext.tier.test.tsx[2m > [22m[2mAuthContext - Tier-Based Access[2m > [22m[2misMaxAITier flag[2m > [22m[2mshould return false for pro tier users
[22m[39m[AuthContext] Role fetched: pro

[90mstdout[2m | src/contexts/__tests__/AuthContext.tier.test.tsx[2m > [22m[2mAuthContext - Tier-Based Access[2m > [22m[2misMaxAITier flag[2m > [22m[2mshould return false for pro tier users
[22m[39m[AUTH DEBUG] Setting loading to false after role check

[90mstdout[2m | src/contexts/__tests__/AuthContext.tier.test.tsx[2m > [22m[2mAuthContext - Tier-Based Access[2m > [22m[2misMaxAITier flag[2m > [22m[2mshould return false for pro tier users
[22m[39m[MigrationHelper] ‚úÖ All data synced to Supabase successfully

[90mstdout[2m | src/contexts/__tests__/AuthContext.tier.test.tsx[2m > [22m[2mAuthContext - Tier-Based Access[2m > [22m[2misMaxAITier flag[2m > [22m[2mshould return false for pro tier users
[22m[39m[MigrationHelper] IndexedDB ‚Üí Supabase sync completed
[MigrationHelper] Migration process completed successfully

[90mstdout[2m | src/contexts/__tests__/AuthContext.tier.test.tsx[2m > [22m[2mAuthContext - Tier-Based Access[2m > [22m[2misMaxAITier flag[2m > [22m[2mshould return false for pro tier users
[22m[39m[MigrationHelper] Starting migration check for user: max-user
[MigrationHelper] Starting IndexedDB ‚Üí Supabase sync
[MigrationHelper] Starting Supabase sync for user: max-user
[AuthContext] No valid session for subscription check

[90mstdout[2m | src/contexts/__tests__/AuthContext.tier.test.tsx[2m > [22m[2mAuthContext - Tier-Based Access[2m > [22m[2misMaxAITier flag[2m > [22m[2mshould return false for pro tier users
[22m[39m[MigrationHelper] ‚úÖ All data synced to Supabase successfully

[90mstdout[2m | src/contexts/__tests__/AuthContext.tier.test.tsx[2m > [22m[2mAuthContext - Tier-Based Access[2m > [22m[2misMaxAITier flag[2m > [22m[2mshould return false for pro tier users
[22m[39m[MigrationHelper] IndexedDB ‚Üí Supabase sync completed
[MigrationHelper] Migration process completed successfully

[90mstdout[2m | src/contexts/__tests__/AuthContext.tier.test.tsx[2m > [22m[2mAuthContext - Tier-Based Access[2m > [22m[2misMaxAITier flag[2m > [22m[2mshould return false for free tier users
[22m[39m[AUTH DEBUG] Auth state change: SIGNED_IN Session: [33mtrue[39m
[AuthContext] Checking role for user: free-user

[90mstderr[2m | src/contexts/__tests__/AuthContext.tier.test.tsx[2m > [22m[2mAuthContext - Tier-Based Access[2m > [22m[2misMaxAITier flag[2m > [22m[2mshould return false for free tier users
[22m[39mWarning: An update to AuthProvider inside a test was not wrapped in act(...).

When testing, code that causes React state updates should be wrapped into act(...):

act(() => {
  /* fire events that update state */
});
/* assert on the output */

This ensures that you're testing the behavior the user would see in the browser. Learn more at https://reactjs.org/link/wrap-tests-with-act
    at AuthProvider (/app/src/contexts/AuthContext.tsx:16:25)
    at Router (/app/node_modules/react-router/dist/umd/react-router.development.js:1207:17)
    at BrowserRouter (/app/node_modules/react-router-dom/dist/umd/react-router-dom.development.js:695:7)
    at wrapper (/app/src/contexts/__tests__/AuthContext.tier.test.tsx:31:20)
Warning: An update to AuthProvider inside a test was not wrapped in act(...).

When testing, code that causes React state updates should be wrapped into act(...):

act(() => {
  /* fire events that update state */
});
/* assert on the output */

This ensures that you're testing the behavior the user would see in the browser. Learn more at https://reactjs.org/link/wrap-tests-with-act
    at AuthProvider (/app/src/contexts/AuthContext.tsx:16:25)
    at Router (/app/node_modules/react-router/dist/umd/react-router.development.js:1207:17)
    at BrowserRouter (/app/node_modules/react-router-dom/dist/umd/react-router-dom.development.js:695:7)
    at wrapper (/app/src/contexts/__tests__/AuthContext.tier.test.tsx:31:20)

[90mstdout[2m | src/contexts/__tests__/AuthContext.tier.test.tsx[2m > [22m[2mAuthContext - Tier-Based Access[2m > [22m[2misMaxAITier flag[2m > [22m[2mshould return false for free tier users
[22m[39m[AuthContext] Role fetched: free

[90mstdout[2m | src/contexts/__tests__/AuthContext.tier.test.tsx[2m > [22m[2mAuthContext - Tier-Based Access[2m > [22m[2misMaxAITier flag[2m > [22m[2mshould return false for free tier users
[22m[39m[AUTH DEBUG] Setting loading to false after role check

[90mstdout[2m | src/contexts/__tests__/AuthContext.tier.test.tsx[2m > [22m[2mAuthContext - Tier-Based Access[2m > [22m[2misMaxAITier flag[2m > [22m[2mshould return false for free tier users
[22m[39m[MigrationHelper] Starting migration check for user: pro-user
[MigrationHelper] Starting IndexedDB ‚Üí Supabase sync
[MigrationHelper] Starting Supabase sync for user: pro-user
[AuthContext] No valid session for subscription check

[90mstdout[2m | src/contexts/__tests__/AuthContext.tier.test.tsx[2m > [22m[2mAuthContext - Tier-Based Access[2m > [22m[2misMaxAITier flag[2m > [22m[2mshould return false for free tier users
[22m[39m[MigrationHelper] ‚úÖ All data synced to Supabase successfully

[90mstdout[2m | src/contexts/__tests__/AuthContext.tier.test.tsx[2m > [22m[2mAuthContext - Tier-Based Access[2m > [22m[2misMaxAITier flag[2m > [22m[2mshould return false for free tier users
[22m[39m[MigrationHelper] IndexedDB ‚Üí Supabase sync completed
[MigrationHelper] Migration process completed successfully

[90mstdout[2m | src/contexts/__tests__/AuthContext.tier.test.tsx[2m > [22m[2mAuthContext - Tier-Based Access[2m > [22m[2mWhite-label feature access validation[2m > [22m[2mshould allow access for Max AI tier
[22m[39m[AUTH DEBUG] Auth state change: SIGNED_IN Session: [33mtrue[39m
[AuthContext] Checking role for user: max-user

[90mstderr[2m | src/contexts/__tests__/AuthContext.tier.test.tsx[2m > [22m[2mAuthContext - Tier-Based Access[2m > [22m[2mWhite-label feature access validation[2m > [22m[2mshould allow access for Max AI tier
[22m[39mWarning: An update to AuthProvider inside a test was not wrapped in act(...).

When testing, code that causes React state updates should be wrapped into act(...):

act(() => {
  /* fire events that update state */
});
/* assert on the output */

This ensures that you're testing the behavior the user would see in the browser. Learn more at https://reactjs.org/link/wrap-tests-with-act
    at AuthProvider (/app/src/contexts/AuthContext.tsx:16:25)
    at Router (/app/node_modules/react-router/dist/umd/react-router.development.js:1207:17)
    at BrowserRouter (/app/node_modules/react-router-dom/dist/umd/react-router-dom.development.js:695:7)
    at wrapper (/app/src/contexts/__tests__/AuthContext.tier.test.tsx:31:20)
Warning: An update to AuthProvider inside a test was not wrapped in act(...).

When testing, code that causes React state updates should be wrapped into act(...):

act(() => {
  /* fire events that update state */
});
/* assert on the output */

This ensures that you're testing the behavior the user would see in the browser. Learn more at https://reactjs.org/link/wrap-tests-with-act
    at AuthProvider (/app/src/contexts/AuthContext.tsx:16:25)
    at Router (/app/node_modules/react-router/dist/umd/react-router.development.js:1207:17)
    at BrowserRouter (/app/node_modules/react-router-dom/dist/umd/react-router-dom.development.js:695:7)
    at wrapper (/app/src/contexts/__tests__/AuthContext.tier.test.tsx:31:20)

[90mstdout[2m | src/contexts/__tests__/AuthContext.tier.test.tsx[2m > [22m[2mAuthContext - Tier-Based Access[2m > [22m[2mWhite-label feature access validation[2m > [22m[2mshould allow access for Max AI tier
[22m[39m[AuthContext] Role fetched: max

[90mstdout[2m | src/contexts/__tests__/AuthContext.tier.test.tsx[2m > [22m[2mAuthContext - Tier-Based Access[2m > [22m[2mWhite-label feature access validation[2m > [22m[2mshould allow access for Max AI tier
[22m[39m[AUTH DEBUG] Setting loading to false after role check

[90mstdout[2m | src/contexts/__tests__/AuthContext.tier.test.tsx[2m > [22m[2mAuthContext - Tier-Based Access[2m > [22m[2mWhite-label feature access validation[2m > [22m[2mshould allow access for Max AI tier
[22m[39m[MigrationHelper] Starting migration check for user: free-user
[MigrationHelper] Starting IndexedDB ‚Üí Supabase sync
[MigrationHelper] Starting Supabase sync for user: free-user
[AuthContext] No valid session for subscription check

[90mstdout[2m | src/contexts/__tests__/AuthContext.tier.test.tsx[2m > [22m[2mAuthContext - Tier-Based Access[2m > [22m[2mWhite-label feature access validation[2m > [22m[2mshould allow access for Max AI tier
[22m[39m[MigrationHelper] ‚úÖ All data synced to Supabase successfully

[90mstdout[2m | src/contexts/__tests__/AuthContext.tier.test.tsx[2m > [22m[2mAuthContext - Tier-Based Access[2m > [22m[2mWhite-label feature access validation[2m > [22m[2mshould allow access for Max AI tier
[22m[39m[MigrationHelper] IndexedDB ‚Üí Supabase sync completed
[MigrationHelper] Migration process completed successfully

[90mstdout[2m | src/contexts/__tests__/AuthContext.tier.test.tsx[2m > [22m[2mAuthContext - Tier-Based Access[2m > [22m[2mWhite-label feature access validation[2m > [22m[2mshould deny access for Pro tier
[22m[39m[AUTH DEBUG] Auth state change: SIGNED_IN Session: [33mtrue[39m
[AuthContext] Checking role for user: pro-user

[90mstderr[2m | src/contexts/__tests__/AuthContext.tier.test.tsx[2m > [22m[2mAuthContext - Tier-Based Access[2m > [22m[2mWhite-label feature access validation[2m > [22m[2mshould deny access for Pro tier
[22m[39mWarning: An update to AuthProvider inside a test was not wrapped in act(...).

When testing, code that causes React state updates should be wrapped into act(...):

act(() => {
  /* fire events that update state */
});
/* assert on the output */

This ensures that you're testing the behavior the user would see in the browser. Learn more at https://reactjs.org/link/wrap-tests-with-act
    at AuthProvider (/app/src/contexts/AuthContext.tsx:16:25)
    at Router (/app/node_modules/react-router/dist/umd/react-router.development.js:1207:17)
    at BrowserRouter (/app/node_modules/react-router-dom/dist/umd/react-router-dom.development.js:695:7)
    at wrapper (/app/src/contexts/__tests__/AuthContext.tier.test.tsx:31:20)
Warning: An update to AuthProvider inside a test was not wrapped in act(...).

When testing, code that causes React state updates should be wrapped into act(...):

act(() => {
  /* fire events that update state */
});
/* assert on the output */

This ensures that you're testing the behavior the user would see in the browser. Learn more at https://reactjs.org/link/wrap-tests-with-act
    at AuthProvider (/app/src/contexts/AuthContext.tsx:16:25)
    at Router (/app/node_modules/react-router/dist/umd/react-router.development.js:1207:17)
    at BrowserRouter (/app/node_modules/react-router-dom/dist/umd/react-router-dom.development.js:695:7)
    at wrapper (/app/src/contexts/__tests__/AuthContext.tier.test.tsx:31:20)

[90mstdout[2m | src/contexts/__tests__/AuthContext.tier.test.tsx[2m > [22m[2mAuthContext - Tier-Based Access[2m > [22m[2mWhite-label feature access validation[2m > [22m[2mshould deny access for Pro tier
[22m[39m[AuthContext] Role fetched: pro

[90mstdout[2m | src/contexts/__tests__/AuthContext.tier.test.tsx[2m > [22m[2mAuthContext - Tier-Based Access[2m > [22m[2mWhite-label feature access validation[2m > [22m[2mshould deny access for Pro tier
[22m[39m[AUTH DEBUG] Setting loading to false after role check

[90mstdout[2m | src/contexts/__tests__/AuthContext.tier.test.tsx[2m > [22m[2mAuthContext - Tier-Based Access[2m > [22m[2mWhite-label feature access validation[2m > [22m[2mshould deny access for Pro tier
[22m[39m[MigrationHelper] Starting migration check for user: max-user
[MigrationHelper] Starting IndexedDB ‚Üí Supabase sync
[MigrationHelper] Starting Supabase sync for user: max-user
[AuthContext] No valid session for subscription check

[90mstdout[2m | src/contexts/__tests__/AuthContext.tier.test.tsx[2m > [22m[2mAuthContext - Tier-Based Access[2m > [22m[2mWhite-label feature access validation[2m > [22m[2mshould deny access for Pro tier
[22m[39m[MigrationHelper] ‚úÖ All data synced to Supabase successfully

[90mstdout[2m | src/contexts/__tests__/AuthContext.tier.test.tsx[2m > [22m[2mAuthContext - Tier-Based Access[2m > [22m[2mWhite-label feature access validation[2m > [22m[2mshould deny access for Pro tier
[22m[39m[MigrationHelper] IndexedDB ‚Üí Supabase sync completed
[MigrationHelper] Migration process completed successfully

 [32m‚úì[39m src/contexts/__tests__/AuthContext.tier.test.tsx [2m([22m[2m6 tests[22m[2m)[22m[33m 403[2mms[22m[39m
[90mstdout[2m | src/pages/__tests__/MaxTier.test.tsx
[22m[39m[Test Setup] IndexedDB polyfill status: { indexedDB: [32m'object'[39m, IDBKeyRange: [32m'function'[39m }
[Test Setup] Cache Storage API polyfill status: { caches: [32m'object'[39m, navigator_storage: [32m'object'[39m }

[90mstdout[2m | src/pages/__tests__/MaxTier.test.tsx
[22m[39m[BackgroundSync] Background Sync API not supported, using fallback

[90mstdout[2m | src/pages/__tests__/MaxTier.test.tsx[2m > [22m[2mMax AI Tier Features[2m > [22m[2mshould enable white-label branding with logo upload
[22m[39m[DB Service] Retrieved settings from DB: {
  proposalTemplate: [32m'classic'[39m,
  logoDisplayOption: [32m'both'[39m,
  notifyEmailAccepted: [33mtrue[39m,
  notifyEmailDeclined: [33mtrue[39m
}

[90mstderr[2m | src/pages/__tests__/MaxTier.test.tsx[2m > [22m[2mMax AI Tier Features[2m > [22m[2mshould enable white-label branding with logo upload
[22m[39m‚ö†Ô∏è React Router Future Flag Warning: React Router will begin wrapping state updates in `React.startTransition` in v7. You can use the `v7_startTransition` future flag to opt-in early. For more information, see https://reactrouter.com/v6/upgrading/future#v7_starttransition.
‚ö†Ô∏è React Router Future Flag Warning: Relative route resolution within Splat routes is changing in v7. You can use the `v7_relativeSplatPath` future flag to opt-in early. For more information, see https://reactrouter.com/v6/upgrading/future#v7_relativesplatpath.

 [32m‚úì[39m src/pages/__tests__/MaxTier.test.tsx [2m([22m[2m11 tests[22m[2m)[22m[33m 382[2mms[22m[39m
     [33m[2m‚úì[22m[39m should enable white-label branding with logo upload [33m 378[2mms[22m[39m
[90mstdout[2m | src/lib/__tests__/crypto.security.test.ts
[22m[39m[Test Setup] IndexedDB polyfill status: { indexedDB: [32m'object'[39m, IDBKeyRange: [32m'function'[39m }
[Test Setup] Cache Storage API polyfill status: { caches: [32m'object'[39m, navigator_storage: [32m'object'[39m }

[90mstderr[2m | src/lib/__tests__/crypto.security.test.ts[2m > [22m[2mCrypto Security[2m > [22m[2mEncryption/Decryption[2m > [22m[2mshould fail decryption with wrong password
[22m[39mDecryption failed: DOMException [OperationError]: The operation failed for an operation-specific reason
[90m    at AESCipherJob.onDone (node:internal/crypto/util:453:19)[39m {
  [cause]: [Error: Cipher job failed]
}

 [32m‚úì[39m src/lib/__tests__/crypto.security.test.ts [2m([22m[2m15 tests[22m[2m)[22m[32m 234[2mms[22m[39m
[90mstdout[2m | src/hooks/__tests__/useAI.tier.test.tsx
[22m[39m[Test Setup] IndexedDB polyfill status: { indexedDB: [32m'object'[39m, IDBKeyRange: [32m'function'[39m }
[Test Setup] Cache Storage API polyfill status: { caches: [32m'object'[39m, navigator_storage: [32m'object'[39m }

[90mstderr[2m | src/hooks/__tests__/useAI.tier.test.tsx[2m > [22m[2museAI Tier-Based Access Control[2m > [22m[2mPro Tier AI Features[2m > [22m[2mshould allow quote_title for Pro tier users
[22m[39mWarning: An update to TestComponent inside a test was not wrapped in act(...).

When testing, code that causes React state updates should be wrapped into act(...):

act(() => {
  /* fire events that update state */
});
/* assert on the output */

This ensures that you're testing the behavior the user would see in the browser. Learn more at https://reactjs.org/link/wrap-tests-with-act
    at TestComponent (/app/node_modules/@testing-library/react/dist/pure.js:329:5)
Warning: An update to TestComponent inside a test was not wrapped in act(...).

When testing, code that causes React state updates should be wrapped into act(...):

act(() => {
  /* fire events that update state */
});
/* assert on the output */

This ensures that you're testing the behavior the user would see in the browser. Learn more at https://reactjs.org/link/wrap-tests-with-act
    at TestComponent (/app/node_modules/@testing-library/react/dist/pure.js:329:5)

[90mstderr[2m | src/hooks/__tests__/useAI.tier.test.tsx[2m > [22m[2museAI Tier-Based Access Control[2m > [22m[2mPro Tier AI Features[2m > [22m[2mshould allow quote_title for Pro tier users
[22m[39mWarning: An update to TestComponent inside a test was not wrapped in act(...).

When testing, code that causes React state updates should be wrapped into act(...):

act(() => {
  /* fire events that update state */
});
/* assert on the output */

This ensures that you're testing the behavior the user would see in the browser. Learn more at https://reactjs.org/link/wrap-tests-with-act
    at TestComponent (/app/node_modules/@testing-library/react/dist/pure.js:329:5)
Warning: An update to TestComponent inside a test was not wrapped in act(...).

When testing, code that causes React state updates should be wrapped into act(...):

act(() => {
  /* fire events that update state */
});
/* assert on the output */

This ensures that you're testing the behavior the user would see in the browser. Learn more at https://reactjs.org/link/wrap-tests-with-act
    at TestComponent (/app/node_modules/@testing-library/react/dist/pure.js:329:5)

[90mstderr[2m | src/hooks/__tests__/useAI.tier.test.tsx[2m > [22m[2museAI Tier-Based Access Control[2m > [22m[2mPro Tier AI Features[2m > [22m[2mshould block quote_title for Free tier users
[22m[39mWarning: An update to TestComponent inside a test was not wrapped in act(...).

When testing, code that causes React state updates should be wrapped into act(...):

act(() => {
  /* fire events that update state */
});
/* assert on the output */

This ensures that you're testing the behavior the user would see in the browser. Learn more at https://reactjs.org/link/wrap-tests-with-act
    at TestComponent (/app/node_modules/@testing-library/react/dist/pure.js:329:5)
Warning: An update to TestComponent inside a test was not wrapped in act(...).

When testing, code that causes React state updates should be wrapped into act(...):

act(() => {
  /* fire events that update state */
});
/* assert on the output */

This ensures that you're testing the behavior the user would see in the browser. Learn more at https://reactjs.org/link/wrap-tests-with-act
    at TestComponent (/app/node_modules/@testing-library/react/dist/pure.js:329:5)

[90mstderr[2m | src/hooks/__tests__/useAI.tier.test.tsx[2m > [22m[2museAI Tier-Based Access Control[2m > [22m[2mPro Tier AI Features[2m > [22m[2mshould block quote_title for Free tier users
[22m[39mWarning: An update to TestComponent inside a test was not wrapped in act(...).

When testing, code that causes React state updates should be wrapped into act(...):

act(() => {
  /* fire events that update state */
});
/* assert on the output */

This ensures that you're testing the behavior the user would see in the browser. Learn more at https://reactjs.org/link/wrap-tests-with-act
    at TestComponent (/app/node_modules/@testing-library/react/dist/pure.js:329:5)

[90mstderr[2m | src/hooks/__tests__/useAI.tier.test.tsx[2m > [22m[2museAI Tier-Based Access Control[2m > [22m[2mPro Tier AI Features[2m > [22m[2mshould allow notes_generator for Pro tier users
[22m[39mWarning: An update to TestComponent inside a test was not wrapped in act(...).

When testing, code that causes React state updates should be wrapped into act(...):

act(() => {
  /* fire events that update state */
});
/* assert on the output */

This ensures that you're testing the behavior the user would see in the browser. Learn more at https://reactjs.org/link/wrap-tests-with-act
    at TestComponent (/app/node_modules/@testing-library/react/dist/pure.js:329:5)
Warning: An update to TestComponent inside a test was not wrapped in act(...).

When testing, code that causes React state updates should be wrapped into act(...):

act(() => {
  /* fire events that update state */
});
/* assert on the output */

This ensures that you're testing the behavior the user would see in the browser. Learn more at https://reactjs.org/link/wrap-tests-with-act
    at TestComponent (/app/node_modules/@testing-library/react/dist/pure.js:329:5)

[90mstderr[2m | src/hooks/__tests__/useAI.tier.test.tsx[2m > [22m[2museAI Tier-Based Access Control[2m > [22m[2mPro Tier AI Features[2m > [22m[2mshould allow notes_generator for Pro tier users
[22m[39mWarning: An update to TestComponent inside a test was not wrapped in act(...).

When testing, code that causes React state updates should be wrapped into act(...):

act(() => {
  /* fire events that update state */
});
/* assert on the output */

This ensures that you're testing the behavior the user would see in the browser. Learn more at https://reactjs.org/link/wrap-tests-with-act
    at TestComponent (/app/node_modules/@testing-library/react/dist/pure.js:329:5)
Warning: An update to TestComponent inside a test was not wrapped in act(...).

When testing, code that causes React state updates should be wrapped into act(...):

act(() => {
  /* fire events that update state */
});
/* assert on the output */

This ensures that you're testing the behavior the user would see in the browser. Learn more at https://reactjs.org/link/wrap-tests-with-act
    at TestComponent (/app/node_modules/@testing-library/react/dist/pure.js:329:5)

[90mstderr[2m | src/hooks/__tests__/useAI.tier.test.tsx[2m > [22m[2museAI Tier-Based Access Control[2m > [22m[2mPro Tier AI Features[2m > [22m[2mshould block notes_generator for Free tier users
[22m[39mWarning: An update to TestComponent inside a test was not wrapped in act(...).

When testing, code that causes React state updates should be wrapped into act(...):

act(() => {
  /* fire events that update state */
});
/* assert on the output */

This ensures that you're testing the behavior the user would see in the browser. Learn more at https://reactjs.org/link/wrap-tests-with-act
    at TestComponent (/app/node_modules/@testing-library/react/dist/pure.js:329:5)
Warning: An update to TestComponent inside a test was not wrapped in act(...).

When testing, code that causes React state updates should be wrapped into act(...):

act(() => {
  /* fire events that update state */
});
/* assert on the output */

This ensures that you're testing the behavior the user would see in the browser. Learn more at https://reactjs.org/link/wrap-tests-with-act
    at TestComponent (/app/node_modules/@testing-library/react/dist/pure.js:329:5)

[90mstderr[2m | src/hooks/__tests__/useAI.tier.test.tsx[2m > [22m[2museAI Tier-Based Access Control[2m > [22m[2mPro Tier AI Features[2m > [22m[2mshould block notes_generator for Free tier users
[22m[39mWarning: An update to TestComponent inside a test was not wrapped in act(...).

When testing, code that causes React state updates should be wrapped into act(...):

act(() => {
  /* fire events that update state */
});
/* assert on the output */

This ensures that you're testing the behavior the user would see in the browser. Learn more at https://reactjs.org/link/wrap-tests-with-act
    at TestComponent (/app/node_modules/@testing-library/react/dist/pure.js:329:5)

[90mstderr[2m | src/hooks/__tests__/useAI.tier.test.tsx[2m > [22m[2museAI Tier-Based Access Control[2m > [22m[2mPro Tier AI Features[2m > [22m[2mshould allow item_description for Pro tier users
[22m[39mWarning: An update to TestComponent inside a test was not wrapped in act(...).

When testing, code that causes React state updates should be wrapped into act(...):

act(() => {
  /* fire events that update state */
});
/* assert on the output */

This ensures that you're testing the behavior the user would see in the browser. Learn more at https://reactjs.org/link/wrap-tests-with-act
    at TestComponent (/app/node_modules/@testing-library/react/dist/pure.js:329:5)
Warning: An update to TestComponent inside a test was not wrapped in act(...).

When testing, code that causes React state updates should be wrapped into act(...):

act(() => {
  /* fire events that update state */
});
/* assert on the output */

This ensures that you're testing the behavior the user would see in the browser. Learn more at https://reactjs.org/link/wrap-tests-with-act
    at TestComponent (/app/node_modules/@testing-library/react/dist/pure.js:329:5)

[90mstderr[2m | src/hooks/__tests__/useAI.tier.test.tsx[2m > [22m[2museAI Tier-Based Access Control[2m > [22m[2mPro Tier AI Features[2m > [22m[2mshould allow item_description for Pro tier users
[22m[39mWarning: An update to TestComponent inside a test was not wrapped in act(...).

When testing, code that causes React state updates should be wrapped into act(...):

act(() => {
  /* fire events that update state */
});
/* assert on the output */

This ensures that you're testing the behavior the user would see in the browser. Learn more at https://reactjs.org/link/wrap-tests-with-act
    at TestComponent (/app/node_modules/@testing-library/react/dist/pure.js:329:5)
Warning: An update to TestComponent inside a test was not wrapped in act(...).

When testing, code that causes React state updates should be wrapped into act(...):

act(() => {
  /* fire events that update state */
});
/* assert on the output */

This ensures that you're testing the behavior the user would see in the browser. Learn more at https://reactjs.org/link/wrap-tests-with-act
    at TestComponent (/app/node_modules/@testing-library/react/dist/pure.js:329:5)

[90mstderr[2m | src/hooks/__tests__/useAI.tier.test.tsx[2m > [22m[2museAI Tier-Based Access Control[2m > [22m[2mPro Tier AI Features[2m > [22m[2mshould block item_description for Free tier users
[22m[39mWarning: An update to TestComponent inside a test was not wrapped in act(...).

When testing, code that causes React state updates should be wrapped into act(...):

act(() => {
  /* fire events that update state */
});
/* assert on the output */

This ensures that you're testing the behavior the user would see in the browser. Learn more at https://reactjs.org/link/wrap-tests-with-act
    at TestComponent (/app/node_modules/@testing-library/react/dist/pure.js:329:5)
Warning: An update to TestComponent inside a test was not wrapped in act(...).

When testing, code that causes React state updates should be wrapped into act(...):

act(() => {
  /* fire events that update state */
});
/* assert on the output */

This ensures that you're testing the behavior the user would see in the browser. Learn more at https://reactjs.org/link/wrap-tests-with-act
    at TestComponent (/app/node_modules/@testing-library/react/dist/pure.js:329:5)

[90mstderr[2m | src/hooks/__tests__/useAI.tier.test.tsx[2m > [22m[2museAI Tier-Based Access Control[2m > [22m[2mPro Tier AI Features[2m > [22m[2mshould block item_description for Free tier users
[22m[39mWarning: An update to TestComponent inside a test was not wrapped in act(...).

When testing, code that causes React state updates should be wrapped into act(...):

act(() => {
  /* fire events that update state */
});
/* assert on the output */

This ensures that you're testing the behavior the user would see in the browser. Learn more at https://reactjs.org/link/wrap-tests-with-act
    at TestComponent (/app/node_modules/@testing-library/react/dist/pure.js:329:5)

[90mstderr[2m | src/hooks/__tests__/useAI.tier.test.tsx[2m > [22m[2museAI Tier-Based Access Control[2m > [22m[2mPro Tier AI Features[2m > [22m[2mshould allow quote_summary for Pro tier users
[22m[39mWarning: An update to TestComponent inside a test was not wrapped in act(...).

When testing, code that causes React state updates should be wrapped into act(...):

act(() => {
  /* fire events that update state */
});
/* assert on the output */

This ensures that you're testing the behavior the user would see in the browser. Learn more at https://reactjs.org/link/wrap-tests-with-act
    at TestComponent (/app/node_modules/@testing-library/react/dist/pure.js:329:5)
Warning: An update to TestComponent inside a test was not wrapped in act(...).

When testing, code that causes React state updates should be wrapped into act(...):

act(() => {
  /* fire events that update state */
});
/* assert on the output */

This ensures that you're testing the behavior the user would see in the browser. Learn more at https://reactjs.org/link/wrap-tests-with-act
    at TestComponent (/app/node_modules/@testing-library/react/dist/pure.js:329:5)

[90mstderr[2m | src/hooks/__tests__/useAI.tier.test.tsx[2m > [22m[2museAI Tier-Based Access Control[2m > [22m[2mPro Tier AI Features[2m > [22m[2mshould allow quote_summary for Pro tier users
[22m[39mWarning: An update to TestComponent inside a test was not wrapped in act(...).

When testing, code that causes React state updates should be wrapped into act(...):

act(() => {
  /* fire events that update state */
});
/* assert on the output */

This ensures that you're testing the behavior the user would see in the browser. Learn more at https://reactjs.org/link/wrap-tests-with-act
    at TestComponent (/app/node_modules/@testing-library/react/dist/pure.js:329:5)
Warning: An update to TestComponent inside a test was not wrapped in act(...).

When testing, code that causes React state updates should be wrapped into act(...):

act(() => {
  /* fire events that update state */
});
/* assert on the output */

This ensures that you're testing the behavior the user would see in the browser. Learn more at https://reactjs.org/link/wrap-tests-with-act
    at TestComponent (/app/node_modules/@testing-library/react/dist/pure.js:329:5)

[90mstderr[2m | src/hooks/__tests__/useAI.tier.test.tsx[2m > [22m[2museAI Tier-Based Access Control[2m > [22m[2mPro Tier AI Features[2m > [22m[2mshould block quote_summary for Free tier users
[22m[39mWarning: An update to TestComponent inside a test was not wrapped in act(...).

When testing, code that causes React state updates should be wrapped into act(...):

act(() => {
  /* fire events that update state */
});
/* assert on the output */

This ensures that you're testing the behavior the user would see in the browser. Learn more at https://reactjs.org/link/wrap-tests-with-act
    at TestComponent (/app/node_modules/@testing-library/react/dist/pure.js:329:5)
Warning: An update to TestComponent inside a test was not wrapped in act(...).

When testing, code that causes React state updates should be wrapped into act(...):

act(() => {
  /* fire events that update state */
});
/* assert on the output */

This ensures that you're testing the behavior the user would see in the browser. Learn more at https://reactjs.org/link/wrap-tests-with-act
    at TestComponent (/app/node_modules/@testing-library/react/dist/pure.js:329:5)

[90mstderr[2m | src/hooks/__tests__/useAI.tier.test.tsx[2m > [22m[2museAI Tier-Based Access Control[2m > [22m[2mPro Tier AI Features[2m > [22m[2mshould block quote_summary for Free tier users
[22m[39mWarning: An update to TestComponent inside a test was not wrapped in act(...).

When testing, code that causes React state updates should be wrapped into act(...):

act(() => {
  /* fire events that update state */
});
/* assert on the output */

This ensures that you're testing the behavior the user would see in the browser. Learn more at https://reactjs.org/link/wrap-tests-with-act
    at TestComponent (/app/node_modules/@testing-library/react/dist/pure.js:329:5)

[90mstderr[2m | src/hooks/__tests__/useAI.tier.test.tsx[2m > [22m[2museAI Tier-Based Access Control[2m > [22m[2mPro Tier AI Features[2m > [22m[2mshould allow followup_message for Pro tier users
[22m[39mWarning: An update to TestComponent inside a test was not wrapped in act(...).

When testing, code that causes React state updates should be wrapped into act(...):

act(() => {
  /* fire events that update state */
});
/* assert on the output */

This ensures that you're testing the behavior the user would see in the browser. Learn more at https://reactjs.org/link/wrap-tests-with-act
    at TestComponent (/app/node_modules/@testing-library/react/dist/pure.js:329:5)
Warning: An update to TestComponent inside a test was not wrapped in act(...).

When testing, code that causes React state updates should be wrapped into act(...):

act(() => {
  /* fire events that update state */
});
/* assert on the output */

This ensures that you're testing the behavior the user would see in the browser. Learn more at https://reactjs.org/link/wrap-tests-with-act
    at TestComponent (/app/node_modules/@testing-library/react/dist/pure.js:329:5)

[90mstderr[2m | src/hooks/__tests__/useAI.tier.test.tsx[2m > [22m[2museAI Tier-Based Access Control[2m > [22m[2mPro Tier AI Features[2m > [22m[2mshould allow followup_message for Pro tier users
[22m[39mWarning: An update to TestComponent inside a test was not wrapped in act(...).

When testing, code that causes React state updates should be wrapped into act(...):

act(() => {
  /* fire events that update state */
});
/* assert on the output */

This ensures that you're testing the behavior the user would see in the browser. Learn more at https://reactjs.org/link/wrap-tests-with-act
    at TestComponent (/app/node_modules/@testing-library/react/dist/pure.js:329:5)
Warning: An update to TestComponent inside a test was not wrapped in act(...).

When testing, code that causes React state updates should be wrapped into act(...):

act(() => {
  /* fire events that update state */
});
/* assert on the output */

This ensures that you're testing the behavior the user would see in the browser. Learn more at https://reactjs.org/link/wrap-tests-with-act
    at TestComponent (/app/node_modules/@testing-library/react/dist/pure.js:329:5)

[90mstderr[2m | src/hooks/__tests__/useAI.tier.test.tsx[2m > [22m[2museAI Tier-Based Access Control[2m > [22m[2mPro Tier AI Features[2m > [22m[2mshould block followup_message for Free tier users
[22m[39mWarning: An update to TestComponent inside a test was not wrapped in act(...).

When testing, code that causes React state updates should be wrapped into act(...):

act(() => {
  /* fire events that update state */
});
/* assert on the output */

This ensures that you're testing the behavior the user would see in the browser. Learn more at https://reactjs.org/link/wrap-tests-with-act
    at TestComponent (/app/node_modules/@testing-library/react/dist/pure.js:329:5)
Warning: An update to TestComponent inside a test was not wrapped in act(...).

When testing, code that causes React state updates should be wrapped into act(...):

act(() => {
  /* fire events that update state */
});
/* assert on the output */

This ensures that you're testing the behavior the user would see in the browser. Learn more at https://reactjs.org/link/wrap-tests-with-act
    at TestComponent (/app/node_modules/@testing-library/react/dist/pure.js:329:5)

[90mstderr[2m | src/hooks/__tests__/useAI.tier.test.tsx[2m > [22m[2museAI Tier-Based Access Control[2m > [22m[2mPro Tier AI Features[2m > [22m[2mshould block followup_message for Free tier users
[22m[39mWarning: An update to TestComponent inside a test was not wrapped in act(...).

When testing, code that causes React state updates should be wrapped into act(...):

act(() => {
  /* fire events that update state */
});
/* assert on the output */

This ensures that you're testing the behavior the user would see in the browser. Learn more at https://reactjs.org/link/wrap-tests-with-act
    at TestComponent (/app/node_modules/@testing-library/react/dist/pure.js:329:5)

[90mstderr[2m | src/hooks/__tests__/useAI.tier.test.tsx[2m > [22m[2museAI Tier-Based Access Control[2m > [22m[2mPro Tier AI Features[2m > [22m[2mshould allow discount_justification for Pro tier users
[22m[39mWarning: An update to TestComponent inside a test was not wrapped in act(...).

When testing, code that causes React state updates should be wrapped into act(...):

act(() => {
  /* fire events that update state */
});
/* assert on the output */

This ensures that you're testing the behavior the user would see in the browser. Learn more at https://reactjs.org/link/wrap-tests-with-act
    at TestComponent (/app/node_modules/@testing-library/react/dist/pure.js:329:5)
Warning: An update to TestComponent inside a test was not wrapped in act(...).

When testing, code that causes React state updates should be wrapped into act(...):

act(() => {
  /* fire events that update state */
});
/* assert on the output */

This ensures that you're testing the behavior the user would see in the browser. Learn more at https://reactjs.org/link/wrap-tests-with-act
    at TestComponent (/app/node_modules/@testing-library/react/dist/pure.js:329:5)

[90mstderr[2m | src/hooks/__tests__/useAI.tier.test.tsx[2m > [22m[2museAI Tier-Based Access Control[2m > [22m[2mPro Tier AI Features[2m > [22m[2mshould allow discount_justification for Pro tier users
[22m[39mWarning: An update to TestComponent inside a test was not wrapped in act(...).

When testing, code that causes React state updates should be wrapped into act(...):

act(() => {
  /* fire events that update state */
});
/* assert on the output */

This ensures that you're testing the behavior the user would see in the browser. Learn more at https://reactjs.org/link/wrap-tests-with-act
    at TestComponent (/app/node_modules/@testing-library/react/dist/pure.js:329:5)
Warning: An update to TestComponent inside a test was not wrapped in act(...).

When testing, code that causes React state updates should be wrapped into act(...):

act(() => {
  /* fire events that update state */
});
/* assert on the output */

This ensures that you're testing the behavior the user would see in the browser. Learn more at https://reactjs.org/link/wrap-tests-with-act
    at TestComponent (/app/node_modules/@testing-library/react/dist/pure.js:329:5)

[90mstderr[2m | src/hooks/__tests__/useAI.tier.test.tsx[2m > [22m[2museAI Tier-Based Access Control[2m > [22m[2mPro Tier AI Features[2m > [22m[2mshould block discount_justification for Free tier users
[22m[39mWarning: An update to TestComponent inside a test was not wrapped in act(...).

When testing, code that causes React state updates should be wrapped into act(...):

act(() => {
  /* fire events that update state */
});
/* assert on the output */

This ensures that you're testing the behavior the user would see in the browser. Learn more at https://reactjs.org/link/wrap-tests-with-act
    at TestComponent (/app/node_modules/@testing-library/react/dist/pure.js:329:5)
Warning: An update to TestComponent inside a test was not wrapped in act(...).

When testing, code that causes React state updates should be wrapped into act(...):

act(() => {
  /* fire events that update state */
});
/* assert on the output */

This ensures that you're testing the behavior the user would see in the browser. Learn more at https://reactjs.org/link/wrap-tests-with-act
    at TestComponent (/app/node_modules/@testing-library/react/dist/pure.js:329:5)

[90mstderr[2m | src/hooks/__tests__/useAI.tier.test.tsx[2m > [22m[2museAI Tier-Based Access Control[2m > [22m[2mPro Tier AI Features[2m > [22m[2mshould block discount_justification for Free tier users
[22m[39mWarning: An update to TestComponent inside a test was not wrapped in act(...).

When testing, code that causes React state updates should be wrapped into act(...):

act(() => {
  /* fire events that update state */
});
/* assert on the output */

This ensures that you're testing the behavior the user would see in the browser. Learn more at https://reactjs.org/link/wrap-tests-with-act
    at TestComponent (/app/node_modules/@testing-library/react/dist/pure.js:329:5)

[90mstderr[2m | src/hooks/__tests__/useAI.tier.test.tsx[2m > [22m[2museAI Tier-Based Access Control[2m > [22m[2mPro Tier AI Features[2m > [22m[2mshould allow email_draft for Pro tier users
[22m[39mWarning: An update to TestComponent inside a test was not wrapped in act(...).

When testing, code that causes React state updates should be wrapped into act(...):

act(() => {
  /* fire events that update state */
});
/* assert on the output */

This ensures that you're testing the behavior the user would see in the browser. Learn more at https://reactjs.org/link/wrap-tests-with-act
    at TestComponent (/app/node_modules/@testing-library/react/dist/pure.js:329:5)
Warning: An update to TestComponent inside a test was not wrapped in act(...).

When testing, code that causes React state updates should be wrapped into act(...):

act(() => {
  /* fire events that update state */
});
/* assert on the output */

This ensures that you're testing the behavior the user would see in the browser. Learn more at https://reactjs.org/link/wrap-tests-with-act
    at TestComponent (/app/node_modules/@testing-library/react/dist/pure.js:329:5)

[90mstderr[2m | src/hooks/__tests__/useAI.tier.test.tsx[2m > [22m[2museAI Tier-Based Access Control[2m > [22m[2mPro Tier AI Features[2m > [22m[2mshould allow email_draft for Pro tier users
[22m[39mWarning: An update to TestComponent inside a test was not wrapped in act(...).

When testing, code that causes React state updates should be wrapped into act(...):

act(() => {
  /* fire events that update state */
});
/* assert on the output */

This ensures that you're testing the behavior the user would see in the browser. Learn more at https://reactjs.org/link/wrap-tests-with-act
    at TestComponent (/app/node_modules/@testing-library/react/dist/pure.js:329:5)
Warning: An update to TestComponent inside a test was not wrapped in act(...).

When testing, code that causes React state updates should be wrapped into act(...):

act(() => {
  /* fire events that update state */
});
/* assert on the output */

This ensures that you're testing the behavior the user would see in the browser. Learn more at https://reactjs.org/link/wrap-tests-with-act
    at TestComponent (/app/node_modules/@testing-library/react/dist/pure.js:329:5)

[90mstderr[2m | src/hooks/__tests__/useAI.tier.test.tsx[2m > [22m[2museAI Tier-Based Access Control[2m > [22m[2mPro Tier AI Features[2m > [22m[2mshould block email_draft for Free tier users
[22m[39mWarning: An update to TestComponent inside a test was not wrapped in act(...).

When testing, code that causes React state updates should be wrapped into act(...):

act(() => {
  /* fire events that update state */
});
/* assert on the output */

This ensures that you're testing the behavior the user would see in the browser. Learn more at https://reactjs.org/link/wrap-tests-with-act
    at TestComponent (/app/node_modules/@testing-library/react/dist/pure.js:329:5)
Warning: An update to TestComponent inside a test was not wrapped in act(...).

When testing, code that causes React state updates should be wrapped into act(...):

act(() => {
  /* fire events that update state */
});
/* assert on the output */

This ensures that you're testing the behavior the user would see in the browser. Learn more at https://reactjs.org/link/wrap-tests-with-act
    at TestComponent (/app/node_modules/@testing-library/react/dist/pure.js:329:5)

[90mstderr[2m | src/hooks/__tests__/useAI.tier.test.tsx[2m > [22m[2museAI Tier-Based Access Control[2m > [22m[2mPro Tier AI Features[2m > [22m[2mshould block email_draft for Free tier users
[22m[39mWarning: An update to TestComponent inside a test was not wrapped in act(...).

When testing, code that causes React state updates should be wrapped into act(...):

act(() => {
  /* fire events that update state */
});
/* assert on the output */

This ensures that you're testing the behavior the user would see in the browser. Learn more at https://reactjs.org/link/wrap-tests-with-act
    at TestComponent (/app/node_modules/@testing-library/react/dist/pure.js:329:5)

[90mstderr[2m | src/hooks/__tests__/useAI.tier.test.tsx[2m > [22m[2museAI Tier-Based Access Control[2m > [22m[2mPro Tier AI Features[2m > [22m[2mshould enforce 30/month limit for followup_message in Pro tier
[22m[39mWarning: An update to TestComponent inside a test was not wrapped in act(...).

When testing, code that causes React state updates should be wrapped into act(...):

act(() => {
  /* fire events that update state */
});
/* assert on the output */

This ensures that you're testing the behavior the user would see in the browser. Learn more at https://reactjs.org/link/wrap-tests-with-act
    at TestComponent (/app/node_modules/@testing-library/react/dist/pure.js:329:5)
Warning: An update to TestComponent inside a test was not wrapped in act(...).

When testing, code that causes React state updates should be wrapped into act(...):

act(() => {
  /* fire events that update state */
});
/* assert on the output */

This ensures that you're testing the behavior the user would see in the browser. Learn more at https://reactjs.org/link/wrap-tests-with-act
    at TestComponent (/app/node_modules/@testing-library/react/dist/pure.js:329:5)

[90mstderr[2m | src/hooks/__tests__/useAI.tier.test.tsx[2m > [22m[2museAI Tier-Based Access Control[2m > [22m[2mPro Tier AI Features[2m > [22m[2mshould enforce 30/month limit for followup_message in Pro tier
[22m[39mWarning: An update to TestComponent inside a test was not wrapped in act(...).

When testing, code that causes React state updates should be wrapped into act(...):

act(() => {
  /* fire events that update state */
});
/* assert on the output */

This ensures that you're testing the behavior the user would see in the browser. Learn more at https://reactjs.org/link/wrap-tests-with-act
    at TestComponent (/app/node_modules/@testing-library/react/dist/pure.js:329:5)

[90mstderr[2m | src/hooks/__tests__/useAI.tier.test.tsx[2m > [22m[2museAI Tier-Based Access Control[2m > [22m[2mMax AI Exclusive Features[2m > [22m[2mshould allow full_quote_generation for Max AI tier users
[22m[39mWarning: An update to TestComponent inside a test was not wrapped in act(...).

When testing, code that causes React state updates should be wrapped into act(...):

act(() => {
  /* fire events that update state */
});
/* assert on the output */

This ensures that you're testing the behavior the user would see in the browser. Learn more at https://reactjs.org/link/wrap-tests-with-act
    at TestComponent (/app/node_modules/@testing-library/react/dist/pure.js:329:5)
Warning: An update to TestComponent inside a test was not wrapped in act(...).

When testing, code that causes React state updates should be wrapped into act(...):

act(() => {
  /* fire events that update state */
});
/* assert on the output */

This ensures that you're testing the behavior the user would see in the browser. Learn more at https://reactjs.org/link/wrap-tests-with-act
    at TestComponent (/app/node_modules/@testing-library/react/dist/pure.js:329:5)

[90mstderr[2m | src/hooks/__tests__/useAI.tier.test.tsx[2m > [22m[2museAI Tier-Based Access Control[2m > [22m[2mMax AI Exclusive Features[2m > [22m[2mshould allow full_quote_generation for Max AI tier users
[22m[39mWarning: An update to TestComponent inside a test was not wrapped in act(...).

When testing, code that causes React state updates should be wrapped into act(...):

act(() => {
  /* fire events that update state */
});
/* assert on the output */

This ensures that you're testing the behavior the user would see in the browser. Learn more at https://reactjs.org/link/wrap-tests-with-act
    at TestComponent (/app/node_modules/@testing-library/react/dist/pure.js:329:5)
Warning: An update to TestComponent inside a test was not wrapped in act(...).

When testing, code that causes React state updates should be wrapped into act(...):

act(() => {
  /* fire events that update state */
});
/* assert on the output */

This ensures that you're testing the behavior the user would see in the browser. Learn more at https://reactjs.org/link/wrap-tests-with-act
    at TestComponent (/app/node_modules/@testing-library/react/dist/pure.js:329:5)

[90mstderr[2m | src/hooks/__tests__/useAI.tier.test.tsx[2m > [22m[2museAI Tier-Based Access Control[2m > [22m[2mMax AI Exclusive Features[2m > [22m[2mshould block full_quote_generation for Pro tier users
[22m[39mWarning: An update to TestComponent inside a test was not wrapped in act(...).

When testing, code that causes React state updates should be wrapped into act(...):

act(() => {
  /* fire events that update state */
});
/* assert on the output */

This ensures that you're testing the behavior the user would see in the browser. Learn more at https://reactjs.org/link/wrap-tests-with-act
    at TestComponent (/app/node_modules/@testing-library/react/dist/pure.js:329:5)
Warning: An update to TestComponent inside a test was not wrapped in act(...).

When testing, code that causes React state updates should be wrapped into act(...):

act(() => {
  /* fire events that update state */
});
/* assert on the output */

This ensures that you're testing the behavior the user would see in the browser. Learn more at https://reactjs.org/link/wrap-tests-with-act
    at TestComponent (/app/node_modules/@testing-library/react/dist/pure.js:329:5)

[90mstderr[2m | src/hooks/__tests__/useAI.tier.test.tsx[2m > [22m[2museAI Tier-Based Access Control[2m > [22m[2mMax AI Exclusive Features[2m > [22m[2mshould block full_quote_generation for Pro tier users
[22m[39mWarning: An update to TestComponent inside a test was not wrapped in act(...).

When testing, code that causes React state updates should be wrapped into act(...):

act(() => {
  /* fire events that update state */
});
/* assert on the output */

This ensures that you're testing the behavior the user would see in the browser. Learn more at https://reactjs.org/link/wrap-tests-with-act
    at TestComponent (/app/node_modules/@testing-library/react/dist/pure.js:329:5)

[90mstderr[2m | src/hooks/__tests__/useAI.tier.test.tsx[2m > [22m[2museAI Tier-Based Access Control[2m > [22m[2mMax AI Exclusive Features[2m > [22m[2mshould block full_quote_generation for Free tier users
[22m[39mWarning: An update to TestComponent inside a test was not wrapped in act(...).

When testing, code that causes React state updates should be wrapped into act(...):

act(() => {
  /* fire events that update state */
});
/* assert on the output */

This ensures that you're testing the behavior the user would see in the browser. Learn more at https://reactjs.org/link/wrap-tests-with-act
    at TestComponent (/app/node_modules/@testing-library/react/dist/pure.js:329:5)
Warning: An update to TestComponent inside a test was not wrapped in act(...).

When testing, code that causes React state updates should be wrapped into act(...):

act(() => {
  /* fire events that update state */
});
/* assert on the output */

This ensures that you're testing the behavior the user would see in the browser. Learn more at https://reactjs.org/link/wrap-tests-with-act
    at TestComponent (/app/node_modules/@testing-library/react/dist/pure.js:329:5)

[90mstderr[2m | src/hooks/__tests__/useAI.tier.test.tsx[2m > [22m[2museAI Tier-Based Access Control[2m > [22m[2mMax AI Exclusive Features[2m > [22m[2mshould block full_quote_generation for Free tier users
[22m[39mWarning: An update to TestComponent inside a test was not wrapped in act(...).

When testing, code that causes React state updates should be wrapped into act(...):

act(() => {
  /* fire events that update state */
});
/* assert on the output */

This ensures that you're testing the behavior the user would see in the browser. Learn more at https://reactjs.org/link/wrap-tests-with-act
    at TestComponent (/app/node_modules/@testing-library/react/dist/pure.js:329:5)

[90mstderr[2m | src/hooks/__tests__/useAI.tier.test.tsx[2m > [22m[2museAI Tier-Based Access Control[2m > [22m[2mMax AI Exclusive Features[2m > [22m[2mshould allow item_recommendations for Max AI tier users
[22m[39mWarning: An update to TestComponent inside a test was not wrapped in act(...).

When testing, code that causes React state updates should be wrapped into act(...):

act(() => {
  /* fire events that update state */
});
/* assert on the output */

This ensures that you're testing the behavior the user would see in the browser. Learn more at https://reactjs.org/link/wrap-tests-with-act
    at TestComponent (/app/node_modules/@testing-library/react/dist/pure.js:329:5)
Warning: An update to TestComponent inside a test was not wrapped in act(...).

When testing, code that causes React state updates should be wrapped into act(...):

act(() => {
  /* fire events that update state */
});
/* assert on the output */

This ensures that you're testing the behavior the user would see in the browser. Learn more at https://reactjs.org/link/wrap-tests-with-act
    at TestComponent (/app/node_modules/@testing-library/react/dist/pure.js:329:5)

[90mstderr[2m | src/hooks/__tests__/useAI.tier.test.tsx[2m > [22m[2museAI Tier-Based Access Control[2m > [22m[2mMax AI Exclusive Features[2m > [22m[2mshould allow item_recommendations for Max AI tier users
[22m[39mWarning: An update to TestComponent inside a test was not wrapped in act(...).

When testing, code that causes React state updates should be wrapped into act(...):

act(() => {
  /* fire events that update state */
});
/* assert on the output */

This ensures that you're testing the behavior the user would see in the browser. Learn more at https://reactjs.org/link/wrap-tests-with-act
    at TestComponent (/app/node_modules/@testing-library/react/dist/pure.js:329:5)
Warning: An update to TestComponent inside a test was not wrapped in act(...).

When testing, code that causes React state updates should be wrapped into act(...):

act(() => {
  /* fire events that update state */
});
/* assert on the output */

This ensures that you're testing the behavior the user would see in the browser. Learn more at https://reactjs.org/link/wrap-tests-with-act
    at TestComponent (/app/node_modules/@testing-library/react/dist/pure.js:329:5)

[90mstderr[2m | src/hooks/__tests__/useAI.tier.test.tsx[2m > [22m[2museAI Tier-Based Access Control[2m > [22m[2mMax AI Exclusive Features[2m > [22m[2mshould block item_recommendations for Pro tier users
[22m[39mWarning: An update to TestComponent inside a test was not wrapped in act(...).

When testing, code that causes React state updates should be wrapped into act(...):

act(() => {
  /* fire events that update state */
});
/* assert on the output */

This ensures that you're testing the behavior the user would see in the browser. Learn more at https://reactjs.org/link/wrap-tests-with-act
    at TestComponent (/app/node_modules/@testing-library/react/dist/pure.js:329:5)
Warning: An update to TestComponent inside a test was not wrapped in act(...).

When testing, code that causes React state updates should be wrapped into act(...):

act(() => {
  /* fire events that update state */
});
/* assert on the output */

This ensures that you're testing the behavior the user would see in the browser. Learn more at https://reactjs.org/link/wrap-tests-with-act
    at TestComponent (/app/node_modules/@testing-library/react/dist/pure.js:329:5)

[90mstderr[2m | src/hooks/__tests__/useAI.tier.test.tsx[2m > [22m[2museAI Tier-Based Access Control[2m > [22m[2mMax AI Exclusive Features[2m > [22m[2mshould block item_recommendations for Pro tier users
[22m[39mWarning: An update to TestComponent inside a test was not wrapped in act(...).

When testing, code that causes React state updates should be wrapped into act(...):

act(() => {
  /* fire events that update state */
});
/* assert on the output */

This ensures that you're testing the behavior the user would see in the browser. Learn more at https://reactjs.org/link/wrap-tests-with-act
    at TestComponent (/app/node_modules/@testing-library/react/dist/pure.js:329:5)

[90mstderr[2m | src/hooks/__tests__/useAI.tier.test.tsx[2m > [22m[2museAI Tier-Based Access Control[2m > [22m[2mMax AI Exclusive Features[2m > [22m[2mshould block item_recommendations for Free tier users
[22m[39mWarning: An update to TestComponent inside a test was not wrapped in act(...).

When testing, code that causes React state updates should be wrapped into act(...):

act(() => {
  /* fire events that update state */
});
/* assert on the output */

This ensures that you're testing the behavior the user would see in the browser. Learn more at https://reactjs.org/link/wrap-tests-with-act
    at TestComponent (/app/node_modules/@testing-library/react/dist/pure.js:329:5)
Warning: An update to TestComponent inside a test was not wrapped in act(...).

When testing, code that causes React state updates should be wrapped into act(...):

act(() => {
  /* fire events that update state */
});
/* assert on the output */

This ensures that you're testing the behavior the user would see in the browser. Learn more at https://reactjs.org/link/wrap-tests-with-act
    at TestComponent (/app/node_modules/@testing-library/react/dist/pure.js:329:5)

[90mstderr[2m | src/hooks/__tests__/useAI.tier.test.tsx[2m > [22m[2museAI Tier-Based Access Control[2m > [22m[2mMax AI Exclusive Features[2m > [22m[2mshould block item_recommendations for Free tier users
[22m[39mWarning: An update to TestComponent inside a test was not wrapped in act(...).

When testing, code that causes React state updates should be wrapped into act(...):

act(() => {
  /* fire events that update state */
});
/* assert on the output */

This ensures that you're testing the behavior the user would see in the browser. Learn more at https://reactjs.org/link/wrap-tests-with-act
    at TestComponent (/app/node_modules/@testing-library/react/dist/pure.js:329:5)

[90mstderr[2m | src/hooks/__tests__/useAI.tier.test.tsx[2m > [22m[2museAI Tier-Based Access Control[2m > [22m[2mMax AI Exclusive Features[2m > [22m[2mshould allow pricing_optimization for Max AI tier users
[22m[39mWarning: An update to TestComponent inside a test was not wrapped in act(...).

When testing, code that causes React state updates should be wrapped into act(...):

act(() => {
  /* fire events that update state */
});
/* assert on the output */

This ensures that you're testing the behavior the user would see in the browser. Learn more at https://reactjs.org/link/wrap-tests-with-act
    at TestComponent (/app/node_modules/@testing-library/react/dist/pure.js:329:5)
Warning: An update to TestComponent inside a test was not wrapped in act(...).

When testing, code that causes React state updates should be wrapped into act(...):

act(() => {
  /* fire events that update state */
});
/* assert on the output */

This ensures that you're testing the behavior the user would see in the browser. Learn more at https://reactjs.org/link/wrap-tests-with-act
    at TestComponent (/app/node_modules/@testing-library/react/dist/pure.js:329:5)

[90mstderr[2m | src/hooks/__tests__/useAI.tier.test.tsx[2m > [22m[2museAI Tier-Based Access Control[2m > [22m[2mMax AI Exclusive Features[2m > [22m[2mshould allow pricing_optimization for Max AI tier users
[22m[39mWarning: An update to TestComponent inside a test was not wrapped in act(...).

When testing, code that causes React state updates should be wrapped into act(...):

act(() => {
  /* fire events that update state */
});
/* assert on the output */

This ensures that you're testing the behavior the user would see in the browser. Learn more at https://reactjs.org/link/wrap-tests-with-act
    at TestComponent (/app/node_modules/@testing-library/react/dist/pure.js:329:5)
Warning: An update to TestComponent inside a test was not wrapped in act(...).

When testing, code that causes React state updates should be wrapped into act(...):

act(() => {
  /* fire events that update state */
});
/* assert on the output */

This ensures that you're testing the behavior the user would see in the browser. Learn more at https://reactjs.org/link/wrap-tests-with-act
    at TestComponent (/app/node_modules/@testing-library/react/dist/pure.js:329:5)

[90mstderr[2m | src/hooks/__tests__/useAI.tier.test.tsx[2m > [22m[2museAI Tier-Based Access Control[2m > [22m[2mMax AI Exclusive Features[2m > [22m[2mshould block pricing_optimization for Pro tier users
[22m[39mWarning: An update to TestComponent inside a test was not wrapped in act(...).

When testing, code that causes React state updates should be wrapped into act(...):

act(() => {
  /* fire events that update state */
});
/* assert on the output */

This ensures that you're testing the behavior the user would see in the browser. Learn more at https://reactjs.org/link/wrap-tests-with-act
    at TestComponent (/app/node_modules/@testing-library/react/dist/pure.js:329:5)
Warning: An update to TestComponent inside a test was not wrapped in act(...).

When testing, code that causes React state updates should be wrapped into act(...):

act(() => {
  /* fire events that update state */
});
/* assert on the output */

This ensures that you're testing the behavior the user would see in the browser. Learn more at https://reactjs.org/link/wrap-tests-with-act
    at TestComponent (/app/node_modules/@testing-library/react/dist/pure.js:329:5)

[90mstderr[2m | src/hooks/__tests__/useAI.tier.test.tsx[2m > [22m[2museAI Tier-Based Access Control[2m > [22m[2mMax AI Exclusive Features[2m > [22m[2mshould block pricing_optimization for Pro tier users
[22m[39mWarning: An update to TestComponent inside a test was not wrapped in act(...).

When testing, code that causes React state updates should be wrapped into act(...):

act(() => {
  /* fire events that update state */
});
/* assert on the output */

This ensures that you're testing the behavior the user would see in the browser. Learn more at https://reactjs.org/link/wrap-tests-with-act
    at TestComponent (/app/node_modules/@testing-library/react/dist/pure.js:329:5)

[90mstderr[2m | src/hooks/__tests__/useAI.tier.test.tsx[2m > [22m[2museAI Tier-Based Access Control[2m > [22m[2mMax AI Exclusive Features[2m > [22m[2mshould block pricing_optimization for Free tier users
[22m[39mWarning: An update to TestComponent inside a test was not wrapped in act(...).

When testing, code that causes React state updates should be wrapped into act(...):

act(() => {
  /* fire events that update state */
});
/* assert on the output */

This ensures that you're testing the behavior the user would see in the browser. Learn more at https://reactjs.org/link/wrap-tests-with-act
    at TestComponent (/app/node_modules/@testing-library/react/dist/pure.js:329:5)
Warning: An update to TestComponent inside a test was not wrapped in act(...).

When testing, code that causes React state updates should be wrapped into act(...):

act(() => {
  /* fire events that update state */
});
/* assert on the output */

This ensures that you're testing the behavior the user would see in the browser. Learn more at https://reactjs.org/link/wrap-tests-with-act
    at TestComponent (/app/node_modules/@testing-library/react/dist/pure.js:329:5)

[90mstderr[2m | src/hooks/__tests__/useAI.tier.test.tsx[2m > [22m[2museAI Tier-Based Access Control[2m > [22m[2mMax AI Exclusive Features[2m > [22m[2mshould block pricing_optimization for Free tier users
[22m[39mWarning: An update to TestComponent inside a test was not wrapped in act(...).

When testing, code that causes React state updates should be wrapped into act(...):

act(() => {
  /* fire events that update state */
});
/* assert on the output */

This ensures that you're testing the behavior the user would see in the browser. Learn more at https://reactjs.org/link/wrap-tests-with-act
    at TestComponent (/app/node_modules/@testing-library/react/dist/pure.js:329:5)

[90mstderr[2m | src/hooks/__tests__/useAI.tier.test.tsx[2m > [22m[2museAI Tier-Based Access Control[2m > [22m[2mMax AI Exclusive Features[2m > [22m[2mshould allow follow_up_suggestions for Max AI tier users
[22m[39mWarning: An update to TestComponent inside a test was not wrapped in act(...).

When testing, code that causes React state updates should be wrapped into act(...):

act(() => {
  /* fire events that update state */
});
/* assert on the output */

This ensures that you're testing the behavior the user would see in the browser. Learn more at https://reactjs.org/link/wrap-tests-with-act
    at TestComponent (/app/node_modules/@testing-library/react/dist/pure.js:329:5)
Warning: An update to TestComponent inside a test was not wrapped in act(...).

When testing, code that causes React state updates should be wrapped into act(...):

act(() => {
  /* fire events that update state */
});
/* assert on the output */

This ensures that you're testing the behavior the user would see in the browser. Learn more at https://reactjs.org/link/wrap-tests-with-act
    at TestComponent (/app/node_modules/@testing-library/react/dist/pure.js:329:5)

[90mstderr[2m | src/hooks/__tests__/useAI.tier.test.tsx[2m > [22m[2museAI Tier-Based Access Control[2m > [22m[2mMax AI Exclusive Features[2m > [22m[2mshould allow follow_up_suggestions for Max AI tier users
[22m[39mWarning: An update to TestComponent inside a test was not wrapped in act(...).

When testing, code that causes React state updates should be wrapped into act(...):

act(() => {
  /* fire events that update state */
});
/* assert on the output */

This ensures that you're testing the behavior the user would see in the browser. Learn more at https://reactjs.org/link/wrap-tests-with-act
    at TestComponent (/app/node_modules/@testing-library/react/dist/pure.js:329:5)
Warning: An update to TestComponent inside a test was not wrapped in act(...).

When testing, code that causes React state updates should be wrapped into act(...):

act(() => {
  /* fire events that update state */
});
/* assert on the output */

This ensures that you're testing the behavior the user would see in the browser. Learn more at https://reactjs.org/link/wrap-tests-with-act
    at TestComponent (/app/node_modules/@testing-library/react/dist/pure.js:329:5)

[90mstderr[2m | src/hooks/__tests__/useAI.tier.test.tsx[2m > [22m[2museAI Tier-Based Access Control[2m > [22m[2mMax AI Exclusive Features[2m > [22m[2mshould block follow_up_suggestions for Pro tier users
[22m[39mWarning: An update to TestComponent inside a test was not wrapped in act(...).

When testing, code that causes React state updates should be wrapped into act(...):

act(() => {
  /* fire events that update state */
});
/* assert on the output */

This ensures that you're testing the behavior the user would see in the browser. Learn more at https://reactjs.org/link/wrap-tests-with-act
    at TestComponent (/app/node_modules/@testing-library/react/dist/pure.js:329:5)
Warning: An update to TestComponent inside a test was not wrapped in act(...).

When testing, code that causes React state updates should be wrapped into act(...):

act(() => {
  /* fire events that update state */
});
/* assert on the output */

This ensures that you're testing the behavior the user would see in the browser. Learn more at https://reactjs.org/link/wrap-tests-with-act
    at TestComponent (/app/node_modules/@testing-library/react/dist/pure.js:329:5)

[90mstderr[2m | src/hooks/__tests__/useAI.tier.test.tsx[2m > [22m[2museAI Tier-Based Access Control[2m > [22m[2mMax AI Exclusive Features[2m > [22m[2mshould block follow_up_suggestions for Pro tier users
[22m[39mWarning: An update to TestComponent inside a test was not wrapped in act(...).

When testing, code that causes React state updates should be wrapped into act(...):

act(() => {
  /* fire events that update state */
});
/* assert on the output */

This ensures that you're testing the behavior the user would see in the browser. Learn more at https://reactjs.org/link/wrap-tests-with-act
    at TestComponent (/app/node_modules/@testing-library/react/dist/pure.js:329:5)

[90mstderr[2m | src/hooks/__tests__/useAI.tier.test.tsx[2m > [22m[2museAI Tier-Based Access Control[2m > [22m[2mMax AI Exclusive Features[2m > [22m[2mshould block follow_up_suggestions for Free tier users
[22m[39mWarning: An update to TestComponent inside a test was not wrapped in act(...).

When testing, code that causes React state updates should be wrapped into act(...):

act(() => {
  /* fire events that update state */
});
/* assert on the output */

This ensures that you're testing the behavior the user would see in the browser. Learn more at https://reactjs.org/link/wrap-tests-with-act
    at TestComponent (/app/node_modules/@testing-library/react/dist/pure.js:329:5)
Warning: An update to TestComponent inside a test was not wrapped in act(...).

When testing, code that causes React state updates should be wrapped into act(...):

act(() => {
  /* fire events that update state */
});
/* assert on the output */

This ensures that you're testing the behavior the user would see in the browser. Learn more at https://reactjs.org/link/wrap-tests-with-act
    at TestComponent (/app/node_modules/@testing-library/react/dist/pure.js:329:5)

[90mstderr[2m | src/hooks/__tests__/useAI.tier.test.tsx[2m > [22m[2museAI Tier-Based Access Control[2m > [22m[2mMax AI Exclusive Features[2m > [22m[2mshould block follow_up_suggestions for Free tier users
[22m[39mWarning: An update to TestComponent inside a test was not wrapped in act(...).

When testing, code that causes React state updates should be wrapped into act(...):

act(() => {
  /* fire events that update state */
});
/* assert on the output */

This ensures that you're testing the behavior the user would see in the browser. Learn more at https://reactjs.org/link/wrap-tests-with-act
    at TestComponent (/app/node_modules/@testing-library/react/dist/pure.js:329:5)

[90mstderr[2m | src/hooks/__tests__/useAI.tier.test.tsx[2m > [22m[2museAI Tier-Based Access Control[2m > [22m[2mMax AI Exclusive Features[2m > [22m[2mshould allow customer_insights for Max AI tier users
[22m[39mWarning: An update to TestComponent inside a test was not wrapped in act(...).

When testing, code that causes React state updates should be wrapped into act(...):

act(() => {
  /* fire events that update state */
});
/* assert on the output */

This ensures that you're testing the behavior the user would see in the browser. Learn more at https://reactjs.org/link/wrap-tests-with-act
    at TestComponent (/app/node_modules/@testing-library/react/dist/pure.js:329:5)
Warning: An update to TestComponent inside a test was not wrapped in act(...).

When testing, code that causes React state updates should be wrapped into act(...):

act(() => {
  /* fire events that update state */
});
/* assert on the output */

This ensures that you're testing the behavior the user would see in the browser. Learn more at https://reactjs.org/link/wrap-tests-with-act
    at TestComponent (/app/node_modules/@testing-library/react/dist/pure.js:329:5)

[90mstderr[2m | src/hooks/__tests__/useAI.tier.test.tsx[2m > [22m[2museAI Tier-Based Access Control[2m > [22m[2mMax AI Exclusive Features[2m > [22m[2mshould allow customer_insights for Max AI tier users
[22m[39mWarning: An update to TestComponent inside a test was not wrapped in act(...).

When testing, code that causes React state updates should be wrapped into act(...):

act(() => {
  /* fire events that update state */
});
/* assert on the output */

This ensures that you're testing the behavior the user would see in the browser. Learn more at https://reactjs.org/link/wrap-tests-with-act
    at TestComponent (/app/node_modules/@testing-library/react/dist/pure.js:329:5)
Warning: An update to TestComponent inside a test was not wrapped in act(...).

When testing, code that causes React state updates should be wrapped into act(...):

act(() => {
  /* fire events that update state */
});
/* assert on the output */

This ensures that you're testing the behavior the user would see in the browser. Learn more at https://reactjs.org/link/wrap-tests-with-act
    at TestComponent (/app/node_modules/@testing-library/react/dist/pure.js:329:5)

[90mstderr[2m | src/hooks/__tests__/useAI.tier.test.tsx[2m > [22m[2museAI Tier-Based Access Control[2m > [22m[2mMax AI Exclusive Features[2m > [22m[2mshould block customer_insights for Pro tier users
[22m[39mWarning: An update to TestComponent inside a test was not wrapped in act(...).

When testing, code that causes React state updates should be wrapped into act(...):

act(() => {
  /* fire events that update state */
});
/* assert on the output */

This ensures that you're testing the behavior the user would see in the browser. Learn more at https://reactjs.org/link/wrap-tests-with-act
    at TestComponent (/app/node_modules/@testing-library/react/dist/pure.js:329:5)
Warning: An update to TestComponent inside a test was not wrapped in act(...).

When testing, code that causes React state updates should be wrapped into act(...):

act(() => {
  /* fire events that update state */
});
/* assert on the output */

This ensures that you're testing the behavior the user would see in the browser. Learn more at https://reactjs.org/link/wrap-tests-with-act
    at TestComponent (/app/node_modules/@testing-library/react/dist/pure.js:329:5)

[90mstderr[2m | src/hooks/__tests__/useAI.tier.test.tsx[2m > [22m[2museAI Tier-Based Access Control[2m > [22m[2mMax AI Exclusive Features[2m > [22m[2mshould block customer_insights for Pro tier users
[22m[39mWarning: An update to TestComponent inside a test was not wrapped in act(...).

When testing, code that causes React state updates should be wrapped into act(...):

act(() => {
  /* fire events that update state */
});
/* assert on the output */

This ensures that you're testing the behavior the user would see in the browser. Learn more at https://reactjs.org/link/wrap-tests-with-act
    at TestComponent (/app/node_modules/@testing-library/react/dist/pure.js:329:5)

[90mstderr[2m | src/hooks/__tests__/useAI.tier.test.tsx[2m > [22m[2museAI Tier-Based Access Control[2m > [22m[2mMax AI Exclusive Features[2m > [22m[2mshould block customer_insights for Free tier users
[22m[39mWarning: An update to TestComponent inside a test was not wrapped in act(...).

When testing, code that causes React state updates should be wrapped into act(...):

act(() => {
  /* fire events that update state */
});
/* assert on the output */

This ensures that you're testing the behavior the user would see in the browser. Learn more at https://reactjs.org/link/wrap-tests-with-act
    at TestComponent (/app/node_modules/@testing-library/react/dist/pure.js:329:5)
Warning: An update to TestComponent inside a test was not wrapped in act(...).

When testing, code that causes React state updates should be wrapped into act(...):

act(() => {
  /* fire events that update state */
});
/* assert on the output */

This ensures that you're testing the behavior the user would see in the browser. Learn more at https://reactjs.org/link/wrap-tests-with-act
    at TestComponent (/app/node_modules/@testing-library/react/dist/pure.js:329:5)

[90mstderr[2m | src/hooks/__tests__/useAI.tier.test.tsx[2m > [22m[2museAI Tier-Based Access Control[2m > [22m[2mMax AI Exclusive Features[2m > [22m[2mshould block customer_insights for Free tier users
[22m[39mWarning: An update to TestComponent inside a test was not wrapped in act(...).

When testing, code that causes React state updates should be wrapped into act(...):

act(() => {
  /* fire events that update state */
});
/* assert on the output */

This ensures that you're testing the behavior the user would see in the browser. Learn more at https://reactjs.org/link/wrap-tests-with-act
    at TestComponent (/app/node_modules/@testing-library/react/dist/pure.js:329:5)

[90mstderr[2m | src/hooks/__tests__/useAI.tier.test.tsx[2m > [22m[2museAI Tier-Based Access Control[2m > [22m[2mMax AI Exclusive Features[2m > [22m[2mshould allow competitive_analysis for Max AI tier users
[22m[39mWarning: An update to TestComponent inside a test was not wrapped in act(...).

When testing, code that causes React state updates should be wrapped into act(...):

act(() => {
  /* fire events that update state */
});
/* assert on the output */

This ensures that you're testing the behavior the user would see in the browser. Learn more at https://reactjs.org/link/wrap-tests-with-act
    at TestComponent (/app/node_modules/@testing-library/react/dist/pure.js:329:5)
Warning: An update to TestComponent inside a test was not wrapped in act(...).

When testing, code that causes React state updates should be wrapped into act(...):

act(() => {
  /* fire events that update state */
});
/* assert on the output */

This ensures that you're testing the behavior the user would see in the browser. Learn more at https://reactjs.org/link/wrap-tests-with-act
    at TestComponent (/app/node_modules/@testing-library/react/dist/pure.js:329:5)

[90mstderr[2m | src/hooks/__tests__/useAI.tier.test.tsx[2m > [22m[2museAI Tier-Based Access Control[2m > [22m[2mMax AI Exclusive Features[2m > [22m[2mshould allow competitive_analysis for Max AI tier users
[22m[39mWarning: An update to TestComponent inside a test was not wrapped in act(...).

When testing, code that causes React state updates should be wrapped into act(...):

act(() => {
  /* fire events that update state */
});
/* assert on the output */

This ensures that you're testing the behavior the user would see in the browser. Learn more at https://reactjs.org/link/wrap-tests-with-act
    at TestComponent (/app/node_modules/@testing-library/react/dist/pure.js:329:5)
Warning: An update to TestComponent inside a test was not wrapped in act(...).

When testing, code that causes React state updates should be wrapped into act(...):

act(() => {
  /* fire events that update state */
});
/* assert on the output */

This ensures that you're testing the behavior the user would see in the browser. Learn more at https://reactjs.org/link/wrap-tests-with-act
    at TestComponent (/app/node_modules/@testing-library/react/dist/pure.js:329:5)

[90mstderr[2m | src/hooks/__tests__/useAI.tier.test.tsx[2m > [22m[2museAI Tier-Based Access Control[2m > [22m[2mMax AI Exclusive Features[2m > [22m[2mshould block competitive_analysis for Pro tier users
[22m[39mWarning: An update to TestComponent inside a test was not wrapped in act(...).

When testing, code that causes React state updates should be wrapped into act(...):

act(() => {
  /* fire events that update state */
});
/* assert on the output */

This ensures that you're testing the behavior the user would see in the browser. Learn more at https://reactjs.org/link/wrap-tests-with-act
    at TestComponent (/app/node_modules/@testing-library/react/dist/pure.js:329:5)
Warning: An update to TestComponent inside a test was not wrapped in act(...).

When testing, code that causes React state updates should be wrapped into act(...):

act(() => {
  /* fire events that update state */
});
/* assert on the output */

This ensures that you're testing the behavior the user would see in the browser. Learn more at https://reactjs.org/link/wrap-tests-with-act
    at TestComponent (/app/node_modules/@testing-library/react/dist/pure.js:329:5)

[90mstderr[2m | src/hooks/__tests__/useAI.tier.test.tsx[2m > [22m[2museAI Tier-Based Access Control[2m > [22m[2mMax AI Exclusive Features[2m > [22m[2mshould block competitive_analysis for Pro tier users
[22m[39mWarning: An update to TestComponent inside a test was not wrapped in act(...).

When testing, code that causes React state updates should be wrapped into act(...):

act(() => {
  /* fire events that update state */
});
/* assert on the output */

This ensures that you're testing the behavior the user would see in the browser. Learn more at https://reactjs.org/link/wrap-tests-with-act
    at TestComponent (/app/node_modules/@testing-library/react/dist/pure.js:329:5)

[90mstderr[2m | src/hooks/__tests__/useAI.tier.test.tsx[2m > [22m[2museAI Tier-Based Access Control[2m > [22m[2mMax AI Exclusive Features[2m > [22m[2mshould block competitive_analysis for Free tier users
[22m[39mWarning: An update to TestComponent inside a test was not wrapped in act(...).

When testing, code that causes React state updates should be wrapped into act(...):

act(() => {
  /* fire events that update state */
});
/* assert on the output */

This ensures that you're testing the behavior the user would see in the browser. Learn more at https://reactjs.org/link/wrap-tests-with-act
    at TestComponent (/app/node_modules/@testing-library/react/dist/pure.js:329:5)
Warning: An update to TestComponent inside a test was not wrapped in act(...).

When testing, code that causes React state updates should be wrapped into act(...):

act(() => {
  /* fire events that update state */
});
/* assert on the output */

This ensures that you're testing the behavior the user would see in the browser. Learn more at https://reactjs.org/link/wrap-tests-with-act
    at TestComponent (/app/node_modules/@testing-library/react/dist/pure.js:329:5)

[90mstderr[2m | src/hooks/__tests__/useAI.tier.test.tsx[2m > [22m[2museAI Tier-Based Access Control[2m > [22m[2mMax AI Exclusive Features[2m > [22m[2mshould block competitive_analysis for Free tier users
[22m[39mWarning: An update to TestComponent inside a test was not wrapped in act(...).

When testing, code that causes React state updates should be wrapped into act(...):

act(() => {
  /* fire events that update state */
});
/* assert on the output */

This ensures that you're testing the behavior the user would see in the browser. Learn more at https://reactjs.org/link/wrap-tests-with-act
    at TestComponent (/app/node_modules/@testing-library/react/dist/pure.js:329:5)

[90mstderr[2m | src/hooks/__tests__/useAI.tier.test.tsx[2m > [22m[2museAI Tier-Based Access Control[2m > [22m[2mAI Error Handling[2m > [22m[2mshould handle network errors gracefully
[22m[39mWarning: An update to TestComponent inside a test was not wrapped in act(...).

When testing, code that causes React state updates should be wrapped into act(...):

act(() => {
  /* fire events that update state */
});
/* assert on the output */

This ensures that you're testing the behavior the user would see in the browser. Learn more at https://reactjs.org/link/wrap-tests-with-act
    at TestComponent (/app/node_modules/@testing-library/react/dist/pure.js:329:5)
Warning: An update to TestComponent inside a test was not wrapped in act(...).

When testing, code that causes React state updates should be wrapped into act(...):

act(() => {
  /* fire events that update state */
});
/* assert on the output */

This ensures that you're testing the behavior the user would see in the browser. Learn more at https://reactjs.org/link/wrap-tests-with-act
    at TestComponent (/app/node_modules/@testing-library/react/dist/pure.js:329:5)

[90mstderr[2m | src/hooks/__tests__/useAI.tier.test.tsx[2m > [22m[2museAI Tier-Based Access Control[2m > [22m[2mAI Error Handling[2m > [22m[2mshould handle network errors gracefully
[22m[39mAI invoke error: Error: Network error
    at [90m/app/[39msrc/hooks/__tests__/useAI.tier.test.tsx:164:16
    at [90mfile:///app/[39mnode_modules/[4m@vitest/runner[24m/dist/index.js:157:11
    at [90mfile:///app/[39mnode_modules/[4m@vitest/runner[24m/dist/index.js:753:26
    at [90mfile:///app/[39mnode_modules/[4m@vitest/runner[24m/dist/index.js:1636:20
    at new Promise (<anonymous>)
    at runWithTimeout [90m(file:///app/[39mnode_modules/[4m@vitest/runner[24m/dist/index.js:1602:10[90m)[39m
    at runTest [90m(file:///app/[39mnode_modules/[4m@vitest/runner[24m/dist/index.js:1309:12[90m)[39m
    at runSuite [90m(file:///app/[39mnode_modules/[4m@vitest/runner[24m/dist/index.js:1468:8[90m)[39m
    at runSuite [90m(file:///app/[39mnode_modules/[4m@vitest/runner[24m/dist/index.js:1468:8[90m)[39m
    at runSuite [90m(file:///app/[39mnode_modules/[4m@vitest/runner[24m/dist/index.js:1468:8[90m)[39m

[90mstderr[2m | src/hooks/__tests__/useAI.tier.test.tsx[2m > [22m[2museAI Tier-Based Access Control[2m > [22m[2mAI Error Handling[2m > [22m[2mshould handle network errors gracefully
[22m[39mAI generation error: Error: Failed to connect to AI service. Please try again.
    at [90m/app/[39msrc/hooks/useAI.tsx:93:17
Warning: An update to TestComponent inside a test was not wrapped in act(...).

When testing, code that causes React state updates should be wrapped into act(...):

act(() => {
  /* fire events that update state */
});
/* assert on the output */

This ensures that you're testing the behavior the user would see in the browser. Learn more at https://reactjs.org/link/wrap-tests-with-act
    at TestComponent (/app/node_modules/@testing-library/react/dist/pure.js:329:5)

[90mstderr[2m | src/hooks/__tests__/useAI.tier.test.tsx[2m > [22m[2museAI Tier-Based Access Control[2m > [22m[2mAI Error Handling[2m > [22m[2mshould handle AI service errors gracefully
[22m[39mWarning: An update to TestComponent inside a test was not wrapped in act(...).

When testing, code that causes React state updates should be wrapped into act(...):

act(() => {
  /* fire events that update state */
});
/* assert on the output */

This ensures that you're testing the behavior the user would see in the browser. Learn more at https://reactjs.org/link/wrap-tests-with-act
    at TestComponent (/app/node_modules/@testing-library/react/dist/pure.js:329:5)
Warning: An update to TestComponent inside a test was not wrapped in act(...).

When testing, code that causes React state updates should be wrapped into act(...):

act(() => {
  /* fire events that update state */
});
/* assert on the output */

This ensures that you're testing the behavior the user would see in the browser. Learn more at https://reactjs.org/link/wrap-tests-with-act
    at TestComponent (/app/node_modules/@testing-library/react/dist/pure.js:329:5)

[90mstderr[2m | src/hooks/__tests__/useAI.tier.test.tsx[2m > [22m[2museAI Tier-Based Access Control[2m > [22m[2mAI Error Handling[2m > [22m[2mshould handle AI service errors gracefully
[22m[39mWarning: An update to TestComponent inside a test was not wrapped in act(...).

When testing, code that causes React state updates should be wrapped into act(...):

act(() => {
  /* fire events that update state */
});
/* assert on the output */

This ensures that you're testing the behavior the user would see in the browser. Learn more at https://reactjs.org/link/wrap-tests-with-act
    at TestComponent (/app/node_modules/@testing-library/react/dist/pure.js:329:5)

[90mstderr[2m | src/hooks/__tests__/useAI.tier.test.tsx[2m > [22m[2museAI Tier-Based Access Control[2m > [22m[2mAI Error Handling[2m > [22m[2mshould return upgrade info when upgrade is required
[22m[39mWarning: An update to TestComponent inside a test was not wrapped in act(...).

When testing, code that causes React state updates should be wrapped into act(...):

act(() => {
  /* fire events that update state */
});
/* assert on the output */

This ensures that you're testing the behavior the user would see in the browser. Learn more at https://reactjs.org/link/wrap-tests-with-act
    at TestComponent (/app/node_modules/@testing-library/react/dist/pure.js:329:5)
Warning: An update to TestComponent inside a test was not wrapped in act(...).

When testing, code that causes React state updates should be wrapped into act(...):

act(() => {
  /* fire events that update state */
});
/* assert on the output */

This ensures that you're testing the behavior the user would see in the browser. Learn more at https://reactjs.org/link/wrap-tests-with-act
    at TestComponent (/app/node_modules/@testing-library/react/dist/pure.js:329:5)

[90mstderr[2m | src/hooks/__tests__/useAI.tier.test.tsx[2m > [22m[2museAI Tier-Based Access Control[2m > [22m[2mAI Error Handling[2m > [22m[2mshould return upgrade info when upgrade is required
[22m[39mWarning: An update to TestComponent inside a test was not wrapped in act(...).

When testing, code that causes React state updates should be wrapped into act(...):

act(() => {
  /* fire events that update state */
});
/* assert on the output */

This ensures that you're testing the behavior the user would see in the browser. Learn more at https://reactjs.org/link/wrap-tests-with-act
    at TestComponent (/app/node_modules/@testing-library/react/dist/pure.js:329:5)

 [32m‚úì[39m src/hooks/__tests__/useAI.tier.test.tsx [2m([22m[2m36 tests[22m[2m)[22m[32m 290[2mms[22m[39m
[90mstdout[2m | src/lib/__tests__/indexed-db.test.ts
[22m[39m[Test Setup] IndexedDB polyfill status: { indexedDB: [32m'object'[39m, IDBKeyRange: [32m'function'[39m }
[Test Setup] Cache Storage API polyfill status: { caches: [32m'object'[39m, navigator_storage: [32m'object'[39m }

[90mstdout[2m | src/lib/__tests__/indexed-db.test.ts[2m > [22m[2mIndexedDB Wrapper[2m > [22m[2mBrowser Support[2m > [22m[2mshould detect IndexedDB support
[22m[39m[IndexedDB] Database deleted successfully

[90mstdout[2m | src/lib/__tests__/indexed-db.test.ts[2m > [22m[2mIndexedDB Wrapper[2m > [22m[2mBrowser Support[2m > [22m[2mshould detect IndexedDB support
[22m[39m[IndexedDB] Database deleted successfully

[90mstdout[2m | src/lib/__tests__/indexed-db.test.ts[2m > [22m[2mIndexedDB Wrapper[2m > [22m[2mCustomer Operations[2m > [22m[2mshould add a customer
[22m[39m[IndexedDB] Database deleted successfully

[90mstdout[2m | src/lib/__tests__/indexed-db.test.ts[2m > [22m[2mIndexedDB Wrapper[2m > [22m[2mCustomer Operations[2m > [22m[2mshould add a customer
[22m[39m[IndexedDB] Upgrading database schema to version [33m1[39m
[IndexedDB] Created customers store
[IndexedDB] Created items store
[IndexedDB] Created quotes store
[IndexedDB] Created company_settings store
[IndexedDB] Created sync_queue store

[90mstdout[2m | src/lib/__tests__/indexed-db.test.ts[2m > [22m[2mIndexedDB Wrapper[2m > [22m[2mCustomer Operations[2m > [22m[2mshould add a customer
[22m[39m[IndexedDB] Database opened successfully

[90mstdout[2m | src/lib/__tests__/indexed-db.test.ts[2m > [22m[2mIndexedDB Wrapper[2m > [22m[2mCustomer Operations[2m > [22m[2mshould add a customer
[22m[39m[IndexedDB] Added record to customers: test-customer-1

[90mstdout[2m | src/lib/__tests__/indexed-db.test.ts[2m > [22m[2mIndexedDB Wrapper[2m > [22m[2mCustomer Operations[2m > [22m[2mshould add a customer
[22m[39m[IndexedDB] Database connection closed

[90mstdout[2m | src/lib/__tests__/indexed-db.test.ts[2m > [22m[2mIndexedDB Wrapper[2m > [22m[2mCustomer Operations[2m > [22m[2mshould add a customer
[22m[39m[IndexedDB] Database deleted successfully

[90mstdout[2m | src/lib/__tests__/indexed-db.test.ts[2m > [22m[2mIndexedDB Wrapper[2m > [22m[2mCustomer Operations[2m > [22m[2mshould retrieve a customer by ID
[22m[39m[IndexedDB] Database deleted successfully

[90mstdout[2m | src/lib/__tests__/indexed-db.test.ts[2m > [22m[2mIndexedDB Wrapper[2m > [22m[2mCustomer Operations[2m > [22m[2mshould retrieve a customer by ID
[22m[39m[IndexedDB] Upgrading database schema to version [33m1[39m
[IndexedDB] Created customers store
[IndexedDB] Created items store
[IndexedDB] Created quotes store
[IndexedDB] Created company_settings store
[IndexedDB] Created sync_queue store

[90mstdout[2m | src/lib/__tests__/indexed-db.test.ts[2m > [22m[2mIndexedDB Wrapper[2m > [22m[2mCustomer Operations[2m > [22m[2mshould retrieve a customer by ID
[22m[39m[IndexedDB] Database opened successfully

[90mstdout[2m | src/lib/__tests__/indexed-db.test.ts[2m > [22m[2mIndexedDB Wrapper[2m > [22m[2mCustomer Operations[2m > [22m[2mshould retrieve a customer by ID
[22m[39m[IndexedDB] Added record to customers: test-customer-1

[90mstdout[2m | src/lib/__tests__/indexed-db.test.ts[2m > [22m[2mIndexedDB Wrapper[2m > [22m[2mCustomer Operations[2m > [22m[2mshould retrieve a customer by ID
[22m[39m[IndexedDB] Database connection closed

[90mstdout[2m | src/lib/__tests__/indexed-db.test.ts[2m > [22m[2mIndexedDB Wrapper[2m > [22m[2mCustomer Operations[2m > [22m[2mshould retrieve a customer by ID
[22m[39m[IndexedDB] Database deleted successfully

[90mstdout[2m | src/lib/__tests__/indexed-db.test.ts[2m > [22m[2mIndexedDB Wrapper[2m > [22m[2mCustomer Operations[2m > [22m[2mshould retrieve all customers for a user
[22m[39m[IndexedDB] Database deleted successfully

[90mstdout[2m | src/lib/__tests__/indexed-db.test.ts[2m > [22m[2mIndexedDB Wrapper[2m > [22m[2mCustomer Operations[2m > [22m[2mshould retrieve all customers for a user
[22m[39m[IndexedDB] Upgrading database schema to version [33m1[39m
[IndexedDB] Created customers store
[IndexedDB] Created items store
[IndexedDB] Created quotes store
[IndexedDB] Created company_settings store
[IndexedDB] Created sync_queue store

[90mstdout[2m | src/lib/__tests__/indexed-db.test.ts[2m > [22m[2mIndexedDB Wrapper[2m > [22m[2mCustomer Operations[2m > [22m[2mshould retrieve all customers for a user
[22m[39m[IndexedDB] Database opened successfully

[90mstdout[2m | src/lib/__tests__/indexed-db.test.ts[2m > [22m[2mIndexedDB Wrapper[2m > [22m[2mCustomer Operations[2m > [22m[2mshould retrieve all customers for a user
[22m[39m[IndexedDB] Added record to customers: test-customer-1

[90mstdout[2m | src/lib/__tests__/indexed-db.test.ts[2m > [22m[2mIndexedDB Wrapper[2m > [22m[2mCustomer Operations[2m > [22m[2mshould retrieve all customers for a user
[22m[39m[IndexedDB] Added record to customers: test-customer-2

[90mstdout[2m | src/lib/__tests__/indexed-db.test.ts[2m > [22m[2mIndexedDB Wrapper[2m > [22m[2mCustomer Operations[2m > [22m[2mshould retrieve all customers for a user
[22m[39m[IndexedDB] Database connection closed

[90mstdout[2m | src/lib/__tests__/indexed-db.test.ts[2m > [22m[2mIndexedDB Wrapper[2m > [22m[2mCustomer Operations[2m > [22m[2mshould retrieve all customers for a user
[22m[39m[IndexedDB] Database deleted successfully

[90mstdout[2m | src/lib/__tests__/indexed-db.test.ts[2m > [22m[2mIndexedDB Wrapper[2m > [22m[2mCustomer Operations[2m > [22m[2mshould update a customer
[22m[39m[IndexedDB] Database deleted successfully

[90mstdout[2m | src/lib/__tests__/indexed-db.test.ts[2m > [22m[2mIndexedDB Wrapper[2m > [22m[2mCustomer Operations[2m > [22m[2mshould update a customer
[22m[39m[IndexedDB] Upgrading database schema to version [33m1[39m
[IndexedDB] Created customers store
[IndexedDB] Created items store
[IndexedDB] Created quotes store
[IndexedDB] Created company_settings store
[IndexedDB] Created sync_queue store

[90mstdout[2m | src/lib/__tests__/indexed-db.test.ts[2m > [22m[2mIndexedDB Wrapper[2m > [22m[2mCustomer Operations[2m > [22m[2mshould update a customer
[22m[39m[IndexedDB] Database opened successfully

[90mstdout[2m | src/lib/__tests__/indexed-db.test.ts[2m > [22m[2mIndexedDB Wrapper[2m > [22m[2mCustomer Operations[2m > [22m[2mshould update a customer
[22m[39m[IndexedDB] Added record to customers: test-customer-1

[90mstdout[2m | src/lib/__tests__/indexed-db.test.ts[2m > [22m[2mIndexedDB Wrapper[2m > [22m[2mCustomer Operations[2m > [22m[2mshould update a customer
[22m[39m[IndexedDB] Updated record in customers: test-customer-1

[90mstdout[2m | src/lib/__tests__/indexed-db.test.ts[2m > [22m[2mIndexedDB Wrapper[2m > [22m[2mCustomer Operations[2m > [22m[2mshould update a customer
[22m[39m[IndexedDB] Database connection closed

[90mstdout[2m | src/lib/__tests__/indexed-db.test.ts[2m > [22m[2mIndexedDB Wrapper[2m > [22m[2mCustomer Operations[2m > [22m[2mshould update a customer
[22m[39m[IndexedDB] Database deleted successfully

[90mstdout[2m | src/lib/__tests__/indexed-db.test.ts[2m > [22m[2mIndexedDB Wrapper[2m > [22m[2mCustomer Operations[2m > [22m[2mshould delete a customer
[22m[39m[IndexedDB] Database deleted successfully

[90mstdout[2m | src/lib/__tests__/indexed-db.test.ts[2m > [22m[2mIndexedDB Wrapper[2m > [22m[2mCustomer Operations[2m > [22m[2mshould delete a customer
[22m[39m[IndexedDB] Upgrading database schema to version [33m1[39m
[IndexedDB] Created customers store
[IndexedDB] Created items store
[IndexedDB] Created quotes store
[IndexedDB] Created company_settings store
[IndexedDB] Created sync_queue store

[90mstdout[2m | src/lib/__tests__/indexed-db.test.ts[2m > [22m[2mIndexedDB Wrapper[2m > [22m[2mCustomer Operations[2m > [22m[2mshould delete a customer
[22m[39m[IndexedDB] Database opened successfully

[90mstdout[2m | src/lib/__tests__/indexed-db.test.ts[2m > [22m[2mIndexedDB Wrapper[2m > [22m[2mCustomer Operations[2m > [22m[2mshould delete a customer
[22m[39m[IndexedDB] Added record to customers: test-customer-1

[90mstdout[2m | src/lib/__tests__/indexed-db.test.ts[2m > [22m[2mIndexedDB Wrapper[2m > [22m[2mCustomer Operations[2m > [22m[2mshould delete a customer
[22m[39m[IndexedDB] Deleted record from customers: test-customer-1

[90mstdout[2m | src/lib/__tests__/indexed-db.test.ts[2m > [22m[2mIndexedDB Wrapper[2m > [22m[2mCustomer Operations[2m > [22m[2mshould delete a customer
[22m[39m[IndexedDB] Database connection closed

[90mstdout[2m | src/lib/__tests__/indexed-db.test.ts[2m > [22m[2mIndexedDB Wrapper[2m > [22m[2mCustomer Operations[2m > [22m[2mshould delete a customer
[22m[39m[IndexedDB] Database deleted successfully

[90mstdout[2m | src/lib/__tests__/indexed-db.test.ts[2m > [22m[2mIndexedDB Wrapper[2m > [22m[2mCustomer Operations[2m > [22m[2mshould clear all customers for a user
[22m[39m[IndexedDB] Database deleted successfully

[90mstdout[2m | src/lib/__tests__/indexed-db.test.ts[2m > [22m[2mIndexedDB Wrapper[2m > [22m[2mCustomer Operations[2m > [22m[2mshould clear all customers for a user
[22m[39m[IndexedDB] Upgrading database schema to version [33m1[39m
[IndexedDB] Created customers store
[IndexedDB] Created items store
[IndexedDB] Created quotes store
[IndexedDB] Created company_settings store
[IndexedDB] Created sync_queue store

[90mstdout[2m | src/lib/__tests__/indexed-db.test.ts[2m > [22m[2mIndexedDB Wrapper[2m > [22m[2mCustomer Operations[2m > [22m[2mshould clear all customers for a user
[22m[39m[IndexedDB] Database opened successfully

[90mstdout[2m | src/lib/__tests__/indexed-db.test.ts[2m > [22m[2mIndexedDB Wrapper[2m > [22m[2mCustomer Operations[2m > [22m[2mshould clear all customers for a user
[22m[39m[IndexedDB] Added record to customers: test-customer-1

[90mstdout[2m | src/lib/__tests__/indexed-db.test.ts[2m > [22m[2mIndexedDB Wrapper[2m > [22m[2mCustomer Operations[2m > [22m[2mshould clear all customers for a user
[22m[39m[IndexedDB] Added record to customers: test-customer-2

[90mstdout[2m | src/lib/__tests__/indexed-db.test.ts[2m > [22m[2mIndexedDB Wrapper[2m > [22m[2mCustomer Operations[2m > [22m[2mshould clear all customers for a user
[22m[39m[IndexedDB] Cleared all user data from customers

[90mstdout[2m | src/lib/__tests__/indexed-db.test.ts[2m > [22m[2mIndexedDB Wrapper[2m > [22m[2mCustomer Operations[2m > [22m[2mshould clear all customers for a user
[22m[39m[IndexedDB] Database connection closed

[90mstdout[2m | src/lib/__tests__/indexed-db.test.ts[2m > [22m[2mIndexedDB Wrapper[2m > [22m[2mCustomer Operations[2m > [22m[2mshould clear all customers for a user
[22m[39m[IndexedDB] Database deleted successfully

[90mstdout[2m | src/lib/__tests__/indexed-db.test.ts[2m > [22m[2mIndexedDB Wrapper[2m > [22m[2madd[2m > [22m[2mshould add a new record
[22m[39m[IndexedDB] Database deleted successfully

[90mstdout[2m | src/lib/__tests__/indexed-db.test.ts[2m > [22m[2mIndexedDB Wrapper[2m > [22m[2madd[2m > [22m[2mshould add a new record
[22m[39m[IndexedDB] Upgrading database schema to version [33m1[39m
[IndexedDB] Created customers store
[IndexedDB] Created items store
[IndexedDB] Created quotes store
[IndexedDB] Created company_settings store
[IndexedDB] Created sync_queue store

[90mstdout[2m | src/lib/__tests__/indexed-db.test.ts[2m > [22m[2mIndexedDB Wrapper[2m > [22m[2madd[2m > [22m[2mshould add a new record
[22m[39m[IndexedDB] Database opened successfully

[90mstdout[2m | src/lib/__tests__/indexed-db.test.ts[2m > [22m[2mIndexedDB Wrapper[2m > [22m[2madd[2m > [22m[2mshould add a new record
[22m[39m[IndexedDB] Added record to customers: test-customer-1764076722193

[90mstdout[2m | src/lib/__tests__/indexed-db.test.ts[2m > [22m[2mIndexedDB Wrapper[2m > [22m[2madd[2m > [22m[2mshould add a new record
[22m[39m[IndexedDB] Database connection closed

[90mstdout[2m | src/lib/__tests__/indexed-db.test.ts[2m > [22m[2mIndexedDB Wrapper[2m > [22m[2madd[2m > [22m[2mshould add a new record
[22m[39m[IndexedDB] Database deleted successfully

[90mstdout[2m | src/lib/__tests__/indexed-db.test.ts[2m > [22m[2mIndexedDB Wrapper[2m > [22m[2madd[2m > [22m[2mshould fail when adding record with same ID
[22m[39m[IndexedDB] Database deleted successfully

[90mstdout[2m | src/lib/__tests__/indexed-db.test.ts[2m > [22m[2mIndexedDB Wrapper[2m > [22m[2madd[2m > [22m[2mshould fail when adding record with same ID
[22m[39m[IndexedDB] Upgrading database schema to version [33m1[39m
[IndexedDB] Created customers store
[IndexedDB] Created items store
[IndexedDB] Created quotes store
[IndexedDB] Created company_settings store
[IndexedDB] Created sync_queue store

[90mstdout[2m | src/lib/__tests__/indexed-db.test.ts[2m > [22m[2mIndexedDB Wrapper[2m > [22m[2madd[2m > [22m[2mshould fail when adding record with same ID
[22m[39m[IndexedDB] Database opened successfully

[90mstdout[2m | src/lib/__tests__/indexed-db.test.ts[2m > [22m[2mIndexedDB Wrapper[2m > [22m[2madd[2m > [22m[2mshould fail when adding record with same ID
[22m[39m[IndexedDB] Added record to customers: duplicate-id

[90mstderr[2m | src/lib/__tests__/indexed-db.test.ts[2m > [22m[2mIndexedDB Wrapper[2m > [22m[2madd[2m > [22m[2mshould fail when adding record with same ID
[22m[39m[IndexedDB] Failed to add to customers: ConstraintError [DOMException] {}
[IndexedDB] Transaction error: [1mnull[22m

[90mstdout[2m | src/lib/__tests__/indexed-db.test.ts[2m > [22m[2mIndexedDB Wrapper[2m > [22m[2madd[2m > [22m[2mshould fail when adding record with same ID
[22m[39m[IndexedDB] Database connection closed

[90mstderr[2m | src/lib/__tests__/indexed-db.test.ts[2m > [22m[2mIndexedDB Wrapper[2m > [22m[2madd[2m > [22m[2mshould fail when adding record with same ID
[22m[39m[IndexedDB] Transaction aborted

[90mstdout[2m | src/lib/__tests__/indexed-db.test.ts[2m > [22m[2mIndexedDB Wrapper[2m > [22m[2madd[2m > [22m[2mshould fail when adding record with same ID
[22m[39m[IndexedDB] Database deleted successfully

[90mstdout[2m | src/lib/__tests__/indexed-db.test.ts[2m > [22m[2mIndexedDB Wrapper[2m > [22m[2mItem Operations[2m > [22m[2mshould add an item
[22m[39m[IndexedDB] Database deleted successfully

[90mstdout[2m | src/lib/__tests__/indexed-db.test.ts[2m > [22m[2mIndexedDB Wrapper[2m > [22m[2mItem Operations[2m > [22m[2mshould add an item
[22m[39m[IndexedDB] Upgrading database schema to version [33m1[39m
[IndexedDB] Created customers store
[IndexedDB] Created items store
[IndexedDB] Created quotes store
[IndexedDB] Created company_settings store
[IndexedDB] Created sync_queue store

[90mstdout[2m | src/lib/__tests__/indexed-db.test.ts[2m > [22m[2mIndexedDB Wrapper[2m > [22m[2mItem Operations[2m > [22m[2mshould add an item
[22m[39m[IndexedDB] Database opened successfully

[90mstdout[2m | src/lib/__tests__/indexed-db.test.ts[2m > [22m[2mIndexedDB Wrapper[2m > [22m[2mItem Operations[2m > [22m[2mshould add an item
[22m[39m[IndexedDB] Added record to items: test-item-1

[90mstdout[2m | src/lib/__tests__/indexed-db.test.ts[2m > [22m[2mIndexedDB Wrapper[2m > [22m[2mItem Operations[2m > [22m[2mshould add an item
[22m[39m[IndexedDB] Database connection closed

[90mstdout[2m | src/lib/__tests__/indexed-db.test.ts[2m > [22m[2mIndexedDB Wrapper[2m > [22m[2mItem Operations[2m > [22m[2mshould add an item
[22m[39m[IndexedDB] Database deleted successfully

[90mstdout[2m | src/lib/__tests__/indexed-db.test.ts[2m > [22m[2mIndexedDB Wrapper[2m > [22m[2mItem Operations[2m > [22m[2mshould retrieve an item by ID
[22m[39m[IndexedDB] Database deleted successfully

[90mstdout[2m | src/lib/__tests__/indexed-db.test.ts[2m > [22m[2mIndexedDB Wrapper[2m > [22m[2mItem Operations[2m > [22m[2mshould retrieve an item by ID
[22m[39m[IndexedDB] Upgrading database schema to version [33m1[39m
[IndexedDB] Created customers store
[IndexedDB] Created items store
[IndexedDB] Created quotes store
[IndexedDB] Created company_settings store
[IndexedDB] Created sync_queue store

[90mstdout[2m | src/lib/__tests__/indexed-db.test.ts[2m > [22m[2mIndexedDB Wrapper[2m > [22m[2mItem Operations[2m > [22m[2mshould retrieve an item by ID
[22m[39m[IndexedDB] Database opened successfully

[90mstdout[2m | src/lib/__tests__/indexed-db.test.ts[2m > [22m[2mIndexedDB Wrapper[2m > [22m[2mItem Operations[2m > [22m[2mshould retrieve an item by ID
[22m[39m[IndexedDB] Added record to items: test-item-1

[90mstdout[2m | src/lib/__tests__/indexed-db.test.ts[2m > [22m[2mIndexedDB Wrapper[2m > [22m[2mItem Operations[2m > [22m[2mshould retrieve an item by ID
[22m[39m[IndexedDB] Database connection closed

[90mstdout[2m | src/lib/__tests__/indexed-db.test.ts[2m > [22m[2mIndexedDB Wrapper[2m > [22m[2mItem Operations[2m > [22m[2mshould retrieve an item by ID
[22m[39m[IndexedDB] Database deleted successfully

[90mstdout[2m | src/lib/__tests__/indexed-db.test.ts[2m > [22m[2mIndexedDB Wrapper[2m > [22m[2mItem Operations[2m > [22m[2mshould update an item
[22m[39m[IndexedDB] Database deleted successfully

[90mstdout[2m | src/lib/__tests__/indexed-db.test.ts[2m > [22m[2mIndexedDB Wrapper[2m > [22m[2mItem Operations[2m > [22m[2mshould update an item
[22m[39m[IndexedDB] Upgrading database schema to version [33m1[39m
[IndexedDB] Created customers store
[IndexedDB] Created items store
[IndexedDB] Created quotes store
[IndexedDB] Created company_settings store
[IndexedDB] Created sync_queue store

[90mstdout[2m | src/lib/__tests__/indexed-db.test.ts[2m > [22m[2mIndexedDB Wrapper[2m > [22m[2mItem Operations[2m > [22m[2mshould update an item
[22m[39m[IndexedDB] Database opened successfully

[90mstdout[2m | src/lib/__tests__/indexed-db.test.ts[2m > [22m[2mIndexedDB Wrapper[2m > [22m[2mItem Operations[2m > [22m[2mshould update an item
[22m[39m[IndexedDB] Added record to items: test-item-1

[90mstdout[2m | src/lib/__tests__/indexed-db.test.ts[2m > [22m[2mIndexedDB Wrapper[2m > [22m[2mItem Operations[2m > [22m[2mshould update an item
[22m[39m[IndexedDB] Updated record in items: test-item-1

[90mstdout[2m | src/lib/__tests__/indexed-db.test.ts[2m > [22m[2mIndexedDB Wrapper[2m > [22m[2mItem Operations[2m > [22m[2mshould update an item
[22m[39m[IndexedDB] Database connection closed

[90mstdout[2m | src/lib/__tests__/indexed-db.test.ts[2m > [22m[2mIndexedDB Wrapper[2m > [22m[2mItem Operations[2m > [22m[2mshould update an item
[22m[39m[IndexedDB] Database deleted successfully

[90mstdout[2m | src/lib/__tests__/indexed-db.test.ts[2m > [22m[2mIndexedDB Wrapper[2m > [22m[2mItem Operations[2m > [22m[2mshould delete an item
[22m[39m[IndexedDB] Database deleted successfully

[90mstdout[2m | src/lib/__tests__/indexed-db.test.ts[2m > [22m[2mIndexedDB Wrapper[2m > [22m[2mItem Operations[2m > [22m[2mshould delete an item
[22m[39m[IndexedDB] Upgrading database schema to version [33m1[39m
[IndexedDB] Created customers store
[IndexedDB] Created items store
[IndexedDB] Created quotes store
[IndexedDB] Created company_settings store
[IndexedDB] Created sync_queue store

[90mstdout[2m | src/lib/__tests__/indexed-db.test.ts[2m > [22m[2mIndexedDB Wrapper[2m > [22m[2mItem Operations[2m > [22m[2mshould delete an item
[22m[39m[IndexedDB] Database opened successfully

[90mstdout[2m | src/lib/__tests__/indexed-db.test.ts[2m > [22m[2mIndexedDB Wrapper[2m > [22m[2mItem Operations[2m > [22m[2mshould delete an item
[22m[39m[IndexedDB] Added record to items: test-item-1

[90mstdout[2m | src/lib/__tests__/indexed-db.test.ts[2m > [22m[2mIndexedDB Wrapper[2m > [22m[2mItem Operations[2m > [22m[2mshould delete an item
[22m[39m[IndexedDB] Deleted record from items: test-item-1

[90mstdout[2m | src/lib/__tests__/indexed-db.test.ts[2m > [22m[2mIndexedDB Wrapper[2m > [22m[2mItem Operations[2m > [22m[2mshould delete an item
[22m[39m[IndexedDB] Database connection closed

[90mstdout[2m | src/lib/__tests__/indexed-db.test.ts[2m > [22m[2mIndexedDB Wrapper[2m > [22m[2mItem Operations[2m > [22m[2mshould delete an item
[22m[39m[IndexedDB] Database deleted successfully

[90mstdout[2m | src/lib/__tests__/indexed-db.test.ts[2m > [22m[2mIndexedDB Wrapper[2m > [22m[2mQuote Operations[2m > [22m[2mshould add a quote
[22m[39m[IndexedDB] Database deleted successfully

[90mstdout[2m | src/lib/__tests__/indexed-db.test.ts[2m > [22m[2mIndexedDB Wrapper[2m > [22m[2mQuote Operations[2m > [22m[2mshould add a quote
[22m[39m[IndexedDB] Upgrading database schema to version [33m1[39m
[IndexedDB] Created customers store
[IndexedDB] Created items store
[IndexedDB] Created quotes store
[IndexedDB] Created company_settings store
[IndexedDB] Created sync_queue store

[90mstdout[2m | src/lib/__tests__/indexed-db.test.ts[2m > [22m[2mIndexedDB Wrapper[2m > [22m[2mQuote Operations[2m > [22m[2mshould add a quote
[22m[39m[IndexedDB] Database opened successfully

[90mstdout[2m | src/lib/__tests__/indexed-db.test.ts[2m > [22m[2mIndexedDB Wrapper[2m > [22m[2mQuote Operations[2m > [22m[2mshould add a quote
[22m[39m[IndexedDB] Added record to quotes: test-quote-1

[90mstdout[2m | src/lib/__tests__/indexed-db.test.ts[2m > [22m[2mIndexedDB Wrapper[2m > [22m[2mQuote Operations[2m > [22m[2mshould add a quote
[22m[39m[IndexedDB] Database connection closed

[90mstdout[2m | src/lib/__tests__/indexed-db.test.ts[2m > [22m[2mIndexedDB Wrapper[2m > [22m[2mQuote Operations[2m > [22m[2mshould add a quote
[22m[39m[IndexedDB] Database deleted successfully

[90mstdout[2m | src/lib/__tests__/indexed-db.test.ts[2m > [22m[2mIndexedDB Wrapper[2m > [22m[2mQuote Operations[2m > [22m[2mshould retrieve a quote by ID
[22m[39m[IndexedDB] Database deleted successfully

[90mstdout[2m | src/lib/__tests__/indexed-db.test.ts[2m > [22m[2mIndexedDB Wrapper[2m > [22m[2mQuote Operations[2m > [22m[2mshould retrieve a quote by ID
[22m[39m[IndexedDB] Upgrading database schema to version [33m1[39m
[IndexedDB] Created customers store
[IndexedDB] Created items store
[IndexedDB] Created quotes store
[IndexedDB] Created company_settings store
[IndexedDB] Created sync_queue store

[90mstdout[2m | src/lib/__tests__/indexed-db.test.ts[2m > [22m[2mIndexedDB Wrapper[2m > [22m[2mQuote Operations[2m > [22m[2mshould retrieve a quote by ID
[22m[39m[IndexedDB] Database opened successfully

[90mstdout[2m | src/lib/__tests__/indexed-db.test.ts[2m > [22m[2mIndexedDB Wrapper[2m > [22m[2mQuote Operations[2m > [22m[2mshould retrieve a quote by ID
[22m[39m[IndexedDB] Added record to quotes: test-quote-1

[90mstdout[2m | src/lib/__tests__/indexed-db.test.ts[2m > [22m[2mIndexedDB Wrapper[2m > [22m[2mQuote Operations[2m > [22m[2mshould retrieve a quote by ID
[22m[39m[IndexedDB] Database connection closed

[90mstdout[2m | src/lib/__tests__/indexed-db.test.ts[2m > [22m[2mIndexedDB Wrapper[2m > [22m[2mQuote Operations[2m > [22m[2mshould retrieve a quote by ID
[22m[39m[IndexedDB] Database deleted successfully

[90mstdout[2m | src/lib/__tests__/indexed-db.test.ts[2m > [22m[2mIndexedDB Wrapper[2m > [22m[2mQuote Operations[2m > [22m[2mshould update quote status
[22m[39m[IndexedDB] Database deleted successfully

[90mstdout[2m | src/lib/__tests__/indexed-db.test.ts[2m > [22m[2mIndexedDB Wrapper[2m > [22m[2mQuote Operations[2m > [22m[2mshould update quote status
[22m[39m[IndexedDB] Upgrading database schema to version [33m1[39m
[IndexedDB] Created customers store
[IndexedDB] Created items store
[IndexedDB] Created quotes store
[IndexedDB] Created company_settings store
[IndexedDB] Created sync_queue store

[90mstdout[2m | src/lib/__tests__/indexed-db.test.ts[2m > [22m[2mIndexedDB Wrapper[2m > [22m[2mQuote Operations[2m > [22m[2mshould update quote status
[22m[39m[IndexedDB] Database opened successfully

[90mstdout[2m | src/lib/__tests__/indexed-db.test.ts[2m > [22m[2mIndexedDB Wrapper[2m > [22m[2mQuote Operations[2m > [22m[2mshould update quote status
[22m[39m[IndexedDB] Added record to quotes: test-quote-1

[90mstdout[2m | src/lib/__tests__/indexed-db.test.ts[2m > [22m[2mIndexedDB Wrapper[2m > [22m[2mQuote Operations[2m > [22m[2mshould update quote status
[22m[39m[IndexedDB] Updated record in quotes: test-quote-1

[90mstdout[2m | src/lib/__tests__/indexed-db.test.ts[2m > [22m[2mIndexedDB Wrapper[2m > [22m[2mQuote Operations[2m > [22m[2mshould update quote status
[22m[39m[IndexedDB] Database connection closed

[90mstdout[2m | src/lib/__tests__/indexed-db.test.ts[2m > [22m[2mIndexedDB Wrapper[2m > [22m[2mQuote Operations[2m > [22m[2mshould update quote status
[22m[39m[IndexedDB] Database deleted successfully

[90mstdout[2m | src/lib/__tests__/indexed-db.test.ts[2m > [22m[2mIndexedDB Wrapper[2m > [22m[2mQuote Operations[2m > [22m[2mshould delete a quote
[22m[39m[IndexedDB] Database deleted successfully

[90mstdout[2m | src/lib/__tests__/indexed-db.test.ts[2m > [22m[2mIndexedDB Wrapper[2m > [22m[2mQuote Operations[2m > [22m[2mshould delete a quote
[22m[39m[IndexedDB] Upgrading database schema to version [33m1[39m
[IndexedDB] Created customers store
[IndexedDB] Created items store
[IndexedDB] Created quotes store
[IndexedDB] Created company_settings store
[IndexedDB] Created sync_queue store

[90mstdout[2m | src/lib/__tests__/indexed-db.test.ts[2m > [22m[2mIndexedDB Wrapper[2m > [22m[2mQuote Operations[2m > [22m[2mshould delete a quote
[22m[39m[IndexedDB] Database opened successfully

[90mstdout[2m | src/lib/__tests__/indexed-db.test.ts[2m > [22m[2mIndexedDB Wrapper[2m > [22m[2mQuote Operations[2m > [22m[2mshould delete a quote
[22m[39m[IndexedDB] Added record to quotes: test-quote-1

[90mstdout[2m | src/lib/__tests__/indexed-db.test.ts[2m > [22m[2mIndexedDB Wrapper[2m > [22m[2mQuote Operations[2m > [22m[2mshould delete a quote
[22m[39m[IndexedDB] Deleted record from quotes: test-quote-1

[90mstdout[2m | src/lib/__tests__/indexed-db.test.ts[2m > [22m[2mIndexedDB Wrapper[2m > [22m[2mQuote Operations[2m > [22m[2mshould delete a quote
[22m[39m[IndexedDB] Database connection closed

[90mstdout[2m | src/lib/__tests__/indexed-db.test.ts[2m > [22m[2mIndexedDB Wrapper[2m > [22m[2mQuote Operations[2m > [22m[2mshould delete a quote
[22m[39m[IndexedDB] Database deleted successfully

[90mstdout[2m | src/lib/__tests__/indexed-db.test.ts[2m > [22m[2mIndexedDB Wrapper[2m > [22m[2mCompany Settings Operations[2m > [22m[2mshould save company settings
[22m[39m[IndexedDB] Database deleted successfully

[90mstdout[2m | src/lib/__tests__/indexed-db.test.ts[2m > [22m[2mIndexedDB Wrapper[2m > [22m[2mCompany Settings Operations[2m > [22m[2mshould save company settings
[22m[39m[IndexedDB] Upgrading database schema to version [33m1[39m
[IndexedDB] Created customers store
[IndexedDB] Created items store
[IndexedDB] Created quotes store
[IndexedDB] Created company_settings store
[IndexedDB] Created sync_queue store

[90mstdout[2m | src/lib/__tests__/indexed-db.test.ts[2m > [22m[2mIndexedDB Wrapper[2m > [22m[2mCompany Settings Operations[2m > [22m[2mshould save company settings
[22m[39m[IndexedDB] Database opened successfully

[90mstdout[2m | src/lib/__tests__/indexed-db.test.ts[2m > [22m[2mIndexedDB Wrapper[2m > [22m[2mCompany Settings Operations[2m > [22m[2mshould save company settings
[22m[39m[IndexedDB] Updated record in company_settings: [90mundefined[39m

[90mstdout[2m | src/lib/__tests__/indexed-db.test.ts[2m > [22m[2mIndexedDB Wrapper[2m > [22m[2mCompany Settings Operations[2m > [22m[2mshould save company settings
[22m[39m[IndexedDB] Database connection closed

[90mstdout[2m | src/lib/__tests__/indexed-db.test.ts[2m > [22m[2mIndexedDB Wrapper[2m > [22m[2mCompany Settings Operations[2m > [22m[2mshould save company settings
[22m[39m[IndexedDB] Database deleted successfully

[90mstdout[2m | src/lib/__tests__/indexed-db.test.ts[2m > [22m[2mIndexedDB Wrapper[2m > [22m[2mCompany Settings Operations[2m > [22m[2mshould update company settings
[22m[39m[IndexedDB] Database deleted successfully

[90mstdout[2m | src/lib/__tests__/indexed-db.test.ts[2m > [22m[2mIndexedDB Wrapper[2m > [22m[2mCompany Settings Operations[2m > [22m[2mshould update company settings
[22m[39m[IndexedDB] Upgrading database schema to version [33m1[39m
[IndexedDB] Created customers store
[IndexedDB] Created items store
[IndexedDB] Created quotes store
[IndexedDB] Created company_settings store
[IndexedDB] Created sync_queue store

[90mstdout[2m | src/lib/__tests__/indexed-db.test.ts[2m > [22m[2mIndexedDB Wrapper[2m > [22m[2mCompany Settings Operations[2m > [22m[2mshould update company settings
[22m[39m[IndexedDB] Database opened successfully

[90mstdout[2m | src/lib/__tests__/indexed-db.test.ts[2m > [22m[2mIndexedDB Wrapper[2m > [22m[2mCompany Settings Operations[2m > [22m[2mshould update company settings
[22m[39m[IndexedDB] Updated record in company_settings: [90mundefined[39m

[90mstdout[2m | src/lib/__tests__/indexed-db.test.ts[2m > [22m[2mIndexedDB Wrapper[2m > [22m[2mCompany Settings Operations[2m > [22m[2mshould update company settings
[22m[39m[IndexedDB] Updated record in company_settings: [90mundefined[39m

[90mstdout[2m | src/lib/__tests__/indexed-db.test.ts[2m > [22m[2mIndexedDB Wrapper[2m > [22m[2mCompany Settings Operations[2m > [22m[2mshould update company settings
[22m[39m[IndexedDB] Database connection closed

[90mstdout[2m | src/lib/__tests__/indexed-db.test.ts[2m > [22m[2mIndexedDB Wrapper[2m > [22m[2mCompany Settings Operations[2m > [22m[2mshould update company settings
[22m[39m[IndexedDB] Database deleted successfully

[90mstdout[2m | src/lib/__tests__/indexed-db.test.ts[2m > [22m[2mIndexedDB Wrapper[2m > [22m[2mStorage Statistics[2m > [22m[2mshould get storage statistics
[22m[39m[IndexedDB] Database deleted successfully

[90mstdout[2m | src/lib/__tests__/indexed-db.test.ts[2m > [22m[2mIndexedDB Wrapper[2m > [22m[2mStorage Statistics[2m > [22m[2mshould get storage statistics
[22m[39m[IndexedDB] Database deleted successfully

 [32m‚úì[39m src/lib/__tests__/indexed-db.test.ts [2m([22m[2m20 tests[22m[2m)[22m[32m 206[2mms[22m[39m
[90mstdout[2m | src/pages/__tests__/PublicQuoteView.whitelabel.test.tsx
[22m[39m[Test Setup] IndexedDB polyfill status: { indexedDB: [32m'object'[39m, IDBKeyRange: [32m'function'[39m }
[Test Setup] Cache Storage API polyfill status: { caches: [32m'object'[39m, navigator_storage: [32m'object'[39m }

[90mstderr[2m | src/pages/__tests__/PublicQuoteView.whitelabel.test.tsx[2m > [22m[2mPublicQuoteView - White-Label Branding[2m > [22m[2mTier-Based Footer Display[2m > [22m[2mshould show "Powered by Quote-it AI" footer for Pro tier users
[22m[39m‚ö†Ô∏è React Router Future Flag Warning: React Router will begin wrapping state updates in `React.startTransition` in v7. You can use the `v7_startTransition` future flag to opt-in early. For more information, see https://reactrouter.com/v6/upgrading/future#v7_starttransition.
‚ö†Ô∏è React Router Future Flag Warning: Relative route resolution within Splat routes is changing in v7. You can use the `v7_relativeSplatPath` future flag to opt-in early. For more information, see https://reactrouter.com/v6/upgrading/future#v7_relativesplatpath.

[90mstderr[2m | src/pages/__tests__/PublicQuoteView.whitelabel.test.tsx[2m > [22m[2mPublicQuoteView - White-Label Branding[2m > [22m[2mTier-Based Footer Display[2m > [22m[2mshould show "Powered by Quote-it AI" footer for Pro tier users
[22m[39mFailed to load quote: TypeError: __vite_ssr_import_8__.supabase.from(...).update is not a function
    at loadQuote [90m(/app/[39msrc/pages/PublicQuoteView.tsx:164:10[90m)[39m
[90m    at processTicksAndRejections (node:internal/process/task_queues:105:5)[39m

[90mstderr[2m | src/pages/__tests__/PublicQuoteView.whitelabel.test.tsx[2m > [22m[2mPublicQuoteView - White-Label Branding[2m > [22m[2mTier-Based Footer Display[2m > [22m[2mshould NOT show footer for Max AI tier users
[22m[39mWarning: An update to PublicQuoteView inside a test was not wrapped in act(...).

When testing, code that causes React state updates should be wrapped into act(...):

act(() => {
  /* fire events that update state */
});
/* assert on the output */

This ensures that you're testing the behavior the user would see in the browser. Learn more at https://reactjs.org/link/wrap-tests-with-act
    at PublicQuoteView (/app/src/pages/PublicQuoteView.tsx:30:69)
    at Router (/app/node_modules/react-router/dist/umd/react-router.development.js:1207:17)
    at BrowserRouter (/app/node_modules/react-router-dom/dist/umd/react-router-dom.development.js:695:7)

[90mstderr[2m | src/pages/__tests__/PublicQuoteView.whitelabel.test.tsx[2m > [22m[2mPublicQuoteView - White-Label Branding[2m > [22m[2mTier-Based Footer Display[2m > [22m[2mshould NOT show footer for Max AI tier users
[22m[39mWarning: An update to PublicQuoteView inside a test was not wrapped in act(...).

When testing, code that causes React state updates should be wrapped into act(...):

act(() => {
  /* fire events that update state */
});
/* assert on the output */

This ensures that you're testing the behavior the user would see in the browser. Learn more at https://reactjs.org/link/wrap-tests-with-act
    at PublicQuoteView (/app/src/pages/PublicQuoteView.tsx:30:69)
    at Router (/app/node_modules/react-router/dist/umd/react-router.development.js:1207:17)
    at BrowserRouter (/app/node_modules/react-router-dom/dist/umd/react-router-dom.development.js:695:7)

[90mstderr[2m | src/pages/__tests__/PublicQuoteView.whitelabel.test.tsx[2m > [22m[2mPublicQuoteView - White-Label Branding[2m > [22m[2mTier-Based Footer Display[2m > [22m[2mshould NOT show footer for Max AI tier users
[22m[39mWarning: An update to PublicQuoteView inside a test was not wrapped in act(...).

When testing, code that causes React state updates should be wrapped into act(...):

act(() => {
  /* fire events that update state */
});
/* assert on the output */

This ensures that you're testing the behavior the user would see in the browser. Learn more at https://reactjs.org/link/wrap-tests-with-act
    at PublicQuoteView (/app/src/pages/PublicQuoteView.tsx:30:69)
    at Router (/app/node_modules/react-router/dist/umd/react-router.development.js:1207:17)
    at BrowserRouter (/app/node_modules/react-router-dom/dist/umd/react-router-dom.development.js:695:7)
Failed to load quote: TypeError: __vite_ssr_import_8__.supabase.from(...).update is not a function
    at loadQuote [90m(/app/[39msrc/pages/PublicQuoteView.tsx:164:10[90m)[39m
Warning: An update to PublicQuoteView inside a test was not wrapped in act(...).

When testing, code that causes React state updates should be wrapped into act(...):

act(() => {
  /* fire events that update state */
});
/* assert on the output */

This ensures that you're testing the behavior the user would see in the browser. Learn more at https://reactjs.org/link/wrap-tests-with-act
    at PublicQuoteView (/app/src/pages/PublicQuoteView.tsx:30:69)
    at Router (/app/node_modules/react-router/dist/umd/react-router.development.js:1207:17)
    at BrowserRouter (/app/node_modules/react-router-dom/dist/umd/react-router-dom.development.js:695:7)

[90mstderr[2m | src/pages/__tests__/PublicQuoteView.whitelabel.test.tsx[2m > [22m[2mPublicQuoteView - White-Label Branding[2m > [22m[2mTier-Based Footer Display[2m > [22m[2mshould show footer for Free tier users
[22m[39mFailed to load quote: TypeError: __vite_ssr_import_8__.supabase.from(...).update is not a function
    at loadQuote [90m(/app/[39msrc/pages/PublicQuoteView.tsx:164:10[90m)[39m

[90mstderr[2m | src/pages/__tests__/PublicQuoteView.whitelabel.test.tsx[2m > [22m[2mPublicQuoteView - White-Label Branding[2m > [22m[2mDynamic Favicon Integration[2m > [22m[2mshould apply custom favicon for Max AI tier with company logo
[22m[39mWarning: An update to PublicQuoteView inside a test was not wrapped in act(...).

When testing, code that causes React state updates should be wrapped into act(...):

act(() => {
  /* fire events that update state */
});
/* assert on the output */

This ensures that you're testing the behavior the user would see in the browser. Learn more at https://reactjs.org/link/wrap-tests-with-act
    at PublicQuoteView (/app/src/pages/PublicQuoteView.tsx:30:69)
    at Router (/app/node_modules/react-router/dist/umd/react-router.development.js:1207:17)
    at BrowserRouter (/app/node_modules/react-router-dom/dist/umd/react-router-dom.development.js:695:7)

[90mstderr[2m | src/pages/__tests__/PublicQuoteView.whitelabel.test.tsx[2m > [22m[2mPublicQuoteView - White-Label Branding[2m > [22m[2mDynamic Favicon Integration[2m > [22m[2mshould apply custom favicon for Max AI tier with company logo
[22m[39mWarning: An update to PublicQuoteView inside a test was not wrapped in act(...).

When testing, code that causes React state updates should be wrapped into act(...):

act(() => {
  /* fire events that update state */
});
/* assert on the output */

This ensures that you're testing the behavior the user would see in the browser. Learn more at https://reactjs.org/link/wrap-tests-with-act
    at PublicQuoteView (/app/src/pages/PublicQuoteView.tsx:30:69)
    at Router (/app/node_modules/react-router/dist/umd/react-router.development.js:1207:17)
    at BrowserRouter (/app/node_modules/react-router-dom/dist/umd/react-router-dom.development.js:695:7)

[90mstderr[2m | src/pages/__tests__/PublicQuoteView.whitelabel.test.tsx[2m > [22m[2mPublicQuoteView - White-Label Branding[2m > [22m[2mDynamic Favicon Integration[2m > [22m[2mshould apply custom favicon for Max AI tier with company logo
[22m[39mFailed to load quote: TypeError: __vite_ssr_import_8__.supabase.from(...).update is not a function
    at loadQuote [90m(/app/[39msrc/pages/PublicQuoteView.tsx:164:10[90m)[39m
Warning: An update to PublicQuoteView inside a test was not wrapped in act(...).

When testing, code that causes React state updates should be wrapped into act(...):

act(() => {
  /* fire events that update state */
});
/* assert on the output */

This ensures that you're testing the behavior the user would see in the browser. Learn more at https://reactjs.org/link/wrap-tests-with-act
    at PublicQuoteView (/app/src/pages/PublicQuoteView.tsx:30:69)
    at Router (/app/node_modules/react-router/dist/umd/react-router.development.js:1207:17)
    at BrowserRouter (/app/node_modules/react-router-dom/dist/umd/react-router-dom.development.js:695:7)

[90mstderr[2m | src/pages/__tests__/PublicQuoteView.whitelabel.test.tsx[2m > [22m[2mPublicQuoteView - White-Label Branding[2m > [22m[2mDynamic Favicon Integration[2m > [22m[2mshould use default favicon for non-Max AI tier users
[22m[39mWarning: An update to PublicQuoteView inside a test was not wrapped in act(...).

When testing, code that causes React state updates should be wrapped into act(...):

act(() => {
  /* fire events that update state */
});
/* assert on the output */

This ensures that you're testing the behavior the user would see in the browser. Learn more at https://reactjs.org/link/wrap-tests-with-act
    at PublicQuoteView (/app/src/pages/PublicQuoteView.tsx:30:69)
    at Router (/app/node_modules/react-router/dist/umd/react-router.development.js:1207:17)
    at BrowserRouter (/app/node_modules/react-router-dom/dist/umd/react-router-dom.development.js:695:7)

[90mstderr[2m | src/pages/__tests__/PublicQuoteView.whitelabel.test.tsx[2m > [22m[2mPublicQuoteView - White-Label Branding[2m > [22m[2mDynamic Favicon Integration[2m > [22m[2mshould use default favicon for non-Max AI tier users
[22m[39mWarning: An update to PublicQuoteView inside a test was not wrapped in act(...).

When testing, code that causes React state updates should be wrapped into act(...):

act(() => {
  /* fire events that update state */
});
/* assert on the output */

This ensures that you're testing the behavior the user would see in the browser. Learn more at https://reactjs.org/link/wrap-tests-with-act
    at PublicQuoteView (/app/src/pages/PublicQuoteView.tsx:30:69)
    at Router (/app/node_modules/react-router/dist/umd/react-router.development.js:1207:17)
    at BrowserRouter (/app/node_modules/react-router-dom/dist/umd/react-router-dom.development.js:695:7)

[90mstderr[2m | src/pages/__tests__/PublicQuoteView.whitelabel.test.tsx[2m > [22m[2mPublicQuoteView - White-Label Branding[2m > [22m[2mDynamic Favicon Integration[2m > [22m[2mshould use default favicon for non-Max AI tier users
[22m[39mFailed to load quote: TypeError: __vite_ssr_import_8__.supabase.from(...).update is not a function
    at loadQuote [90m(/app/[39msrc/pages/PublicQuoteView.tsx:164:10[90m)[39m
Warning: An update to PublicQuoteView inside a test was not wrapped in act(...).

When testing, code that causes React state updates should be wrapped into act(...):

act(() => {
  /* fire events that update state */
});
/* assert on the output */

This ensures that you're testing the behavior the user would see in the browser. Learn more at https://reactjs.org/link/wrap-tests-with-act
    at PublicQuoteView (/app/src/pages/PublicQuoteView.tsx:30:69)
    at Router (/app/node_modules/react-router/dist/umd/react-router.development.js:1207:17)
    at BrowserRouter (/app/node_modules/react-router-dom/dist/umd/react-router-dom.development.js:695:7)

[90mstderr[2m | src/pages/__tests__/PublicQuoteView.whitelabel.test.tsx[2m > [22m[2mPublicQuoteView - White-Label Branding[2m > [22m[2mBrowser Title Customization[2m > [22m[2mshould use company name in title for Max AI tier users
[22m[39mWarning: An update to PublicQuoteView inside a test was not wrapped in act(...).

When testing, code that causes React state updates should be wrapped into act(...):

act(() => {
  /* fire events that update state */
});
/* assert on the output */

This ensures that you're testing the behavior the user would see in the browser. Learn more at https://reactjs.org/link/wrap-tests-with-act
    at PublicQuoteView (/app/src/pages/PublicQuoteView.tsx:30:69)
    at Router (/app/node_modules/react-router/dist/umd/react-router.development.js:1207:17)
    at BrowserRouter (/app/node_modules/react-router-dom/dist/umd/react-router-dom.development.js:695:7)

[90mstderr[2m | src/pages/__tests__/PublicQuoteView.whitelabel.test.tsx[2m > [22m[2mPublicQuoteView - White-Label Branding[2m > [22m[2mBrowser Title Customization[2m > [22m[2mshould use company name in title for Max AI tier users
[22m[39mWarning: An update to PublicQuoteView inside a test was not wrapped in act(...).

When testing, code that causes React state updates should be wrapped into act(...):

act(() => {
  /* fire events that update state */
});
/* assert on the output */

This ensures that you're testing the behavior the user would see in the browser. Learn more at https://reactjs.org/link/wrap-tests-with-act
    at PublicQuoteView (/app/src/pages/PublicQuoteView.tsx:30:69)
    at Router (/app/node_modules/react-router/dist/umd/react-router.development.js:1207:17)
    at BrowserRouter (/app/node_modules/react-router-dom/dist/umd/react-router-dom.development.js:695:7)

[90mstderr[2m | src/pages/__tests__/PublicQuoteView.whitelabel.test.tsx[2m > [22m[2mPublicQuoteView - White-Label Branding[2m > [22m[2mBrowser Title Customization[2m > [22m[2mshould use company name in title for Max AI tier users
[22m[39mFailed to load quote: TypeError: __vite_ssr_import_8__.supabase.from(...).update is not a function
    at loadQuote [90m(/app/[39msrc/pages/PublicQuoteView.tsx:164:10[90m)[39m
Warning: An update to PublicQuoteView inside a test was not wrapped in act(...).

When testing, code that causes React state updates should be wrapped into act(...):

act(() => {
  /* fire events that update state */
});
/* assert on the output */

This ensures that you're testing the behavior the user would see in the browser. Learn more at https://reactjs.org/link/wrap-tests-with-act
    at PublicQuoteView (/app/src/pages/PublicQuoteView.tsx:30:69)
    at Router (/app/node_modules/react-router/dist/umd/react-router.development.js:1207:17)
    at BrowserRouter (/app/node_modules/react-router-dom/dist/umd/react-router-dom.development.js:695:7)

 [32m‚úì[39m src/pages/__tests__/PublicQuoteView.whitelabel.test.tsx [2m([22m[2m6 tests[22m[2m)[22m[32m 171[2mms[22m[39m
[90mstdout[2m | src/lib/__tests__/integration.test.ts
[22m[39m[Test Setup] IndexedDB polyfill status: { indexedDB: [32m'object'[39m, IDBKeyRange: [32m'function'[39m }
[Test Setup] Cache Storage API polyfill status: { caches: [32m'object'[39m, navigator_storage: [32m'object'[39m }

[90mstdout[2m | src/lib/__tests__/integration.test.ts[2m > [22m[2mIntegration Tests - Real Application Data Flow[2m > [22m[2mMigration from localStorage to IndexedDB[2m > [22m[2mshould migrate customers from localStorage to IndexedDB
[22m[39m[IndexedDB] Upgrading database schema to version [33m1[39m
[IndexedDB] Created customers store
[IndexedDB] Created items store
[IndexedDB] Created quotes store
[IndexedDB] Created company_settings store
[IndexedDB] Created sync_queue store

[90mstdout[2m | src/lib/__tests__/integration.test.ts[2m > [22m[2mIntegration Tests - Real Application Data Flow[2m > [22m[2mMigration from localStorage to IndexedDB[2m > [22m[2mshould migrate customers from localStorage to IndexedDB
[22m[39m[IndexedDB] Database opened successfully

[90mstdout[2m | src/lib/__tests__/integration.test.ts[2m > [22m[2mIntegration Tests - Real Application Data Flow[2m > [22m[2mMigration from localStorage to IndexedDB[2m > [22m[2mshould migrate customers from localStorage to IndexedDB
[22m[39m[IndexedDB] Cleared all user data from customers

[90mstdout[2m | src/lib/__tests__/integration.test.ts[2m > [22m[2mIntegration Tests - Real Application Data Flow[2m > [22m[2mMigration from localStorage to IndexedDB[2m > [22m[2mshould migrate customers from localStorage to IndexedDB
[22m[39m[IndexedDB] Cleared all user data from items

[90mstdout[2m | src/lib/__tests__/integration.test.ts[2m > [22m[2mIntegration Tests - Real Application Data Flow[2m > [22m[2mMigration from localStorage to IndexedDB[2m > [22m[2mshould migrate customers from localStorage to IndexedDB
[22m[39m[IndexedDB] Cleared all user data from quotes

[90mstdout[2m | src/lib/__tests__/integration.test.ts[2m > [22m[2mIntegration Tests - Real Application Data Flow[2m > [22m[2mMigration from localStorage to IndexedDB[2m > [22m[2mshould migrate customers from localStorage to IndexedDB
[22m[39m[MigrationHelper] Starting migration check for user: test-user-123
[MigrationHelper] Starting localStorage ‚Üí IndexedDB migration

[90mstdout[2m | src/lib/__tests__/integration.test.ts[2m > [22m[2mIntegration Tests - Real Application Data Flow[2m > [22m[2mMigration from localStorage to IndexedDB[2m > [22m[2mshould migrate customers from localStorage to IndexedDB
[22m[39m[Migration] ========== STARTING INDEXEDDB MIGRATION ==========

[90mstdout[2m | src/lib/__tests__/integration.test.ts[2m > [22m[2mIntegration Tests - Real Application Data Flow[2m > [22m[2mMigration from localStorage to IndexedDB[2m > [22m[2mshould migrate customers from localStorage to IndexedDB
[22m[39m[IndexedDB] Added record to customers: cust-1

[90mstdout[2m | src/lib/__tests__/integration.test.ts[2m > [22m[2mIntegration Tests - Real Application Data Flow[2m > [22m[2mMigration from localStorage to IndexedDB[2m > [22m[2mshould migrate customers from localStorage to IndexedDB
[22m[39m[Migration] ========== MIGRATION COMPLETED SUCCESSFULLY ==========

[90mstdout[2m | src/lib/__tests__/integration.test.ts[2m > [22m[2mIntegration Tests - Real Application Data Flow[2m > [22m[2mMigration from localStorage to IndexedDB[2m > [22m[2mshould migrate customers from localStorage to IndexedDB
[22m[39m[MigrationHelper] Successfully migrated data from localStorage to IndexedDB

[90mstdout[2m | src/lib/__tests__/integration.test.ts[2m > [22m[2mIntegration Tests - Real Application Data Flow[2m > [22m[2mMigration from localStorage to IndexedDB[2m > [22m[2mshould migrate customers from localStorage to IndexedDB
[22m[39m[MigrationHelper] localStorage ‚Üí IndexedDB migration completed
[MigrationHelper] Starting IndexedDB ‚Üí Supabase sync
[MigrationHelper] Starting Supabase sync for user: test-user-123

[90mstderr[2m | src/lib/__tests__/integration.test.ts[2m > [22m[2mIntegration Tests - Real Application Data Flow[2m > [22m[2mMigration from localStorage to IndexedDB[2m > [22m[2mshould migrate customers from localStorage to IndexedDB
[22m[39m[MigrationHelper] Error during Supabase sync: TypeError: __vite_ssr_import_0__.supabase.from(...).upsert is not a function
    at syncIndexedDBToSupabase [90m(/app/[39msrc/lib/migration-helper.ts:94:10[90m)[39m
[90m    at runNextTicks (node:internal/process/task_queues:65:5)[39m
[90m    at processImmediate (node:internal/timers:453:9)[39m
    at Module.checkAndMigrateData [90m(/app/[39msrc/lib/migration-helper.ts:37:7[90m)[39m
    at [90m/app/[39msrc/lib/__tests__/integration.test.ts:81:7
    at [90mfile:///app/[39mnode_modules/[4m@vitest/runner[24m/dist/index.js:753:20

[90mstdout[2m | src/lib/__tests__/integration.test.ts[2m > [22m[2mIntegration Tests - Real Application Data Flow[2m > [22m[2mMigration from localStorage to IndexedDB[2m > [22m[2mshould migrate customers from localStorage to IndexedDB
[22m[39m[MigrationHelper] Syncing 1 customers to Supabase

[90mstdout[2m | src/lib/__tests__/integration.test.ts[2m > [22m[2mIntegration Tests - Real Application Data Flow[2m > [22m[2mMigration from localStorage to IndexedDB[2m > [22m[2mshould migrate customers from localStorage to IndexedDB
[22m[39m[MigrationHelper] IndexedDB ‚Üí Supabase sync completed
[MigrationHelper] Migration process completed successfully

[90mstdout[2m | src/lib/__tests__/integration.test.ts[2m > [22m[2mIntegration Tests - Real Application Data Flow[2m > [22m[2mMigration from localStorage to IndexedDB[2m > [22m[2mshould migrate items from localStorage to IndexedDB
[22m[39m[IndexedDB] Cleared all user data from customers

[90mstdout[2m | src/lib/__tests__/integration.test.ts[2m > [22m[2mIntegration Tests - Real Application Data Flow[2m > [22m[2mMigration from localStorage to IndexedDB[2m > [22m[2mshould migrate items from localStorage to IndexedDB
[22m[39m[IndexedDB] Cleared all user data from items

[90mstdout[2m | src/lib/__tests__/integration.test.ts[2m > [22m[2mIntegration Tests - Real Application Data Flow[2m > [22m[2mMigration from localStorage to IndexedDB[2m > [22m[2mshould migrate items from localStorage to IndexedDB
[22m[39m[IndexedDB] Cleared all user data from quotes

[90mstdout[2m | src/lib/__tests__/integration.test.ts[2m > [22m[2mIntegration Tests - Real Application Data Flow[2m > [22m[2mMigration from localStorage to IndexedDB[2m > [22m[2mshould migrate items from localStorage to IndexedDB
[22m[39m[MigrationHelper] Starting migration check for user: test-user-123
[MigrationHelper] Starting localStorage ‚Üí IndexedDB migration

[90mstdout[2m | src/lib/__tests__/integration.test.ts[2m > [22m[2mIntegration Tests - Real Application Data Flow[2m > [22m[2mMigration from localStorage to IndexedDB[2m > [22m[2mshould migrate items from localStorage to IndexedDB
[22m[39m[Migration] ========== STARTING INDEXEDDB MIGRATION ==========

[90mstdout[2m | src/lib/__tests__/integration.test.ts[2m > [22m[2mIntegration Tests - Real Application Data Flow[2m > [22m[2mMigration from localStorage to IndexedDB[2m > [22m[2mshould migrate items from localStorage to IndexedDB
[22m[39m[IndexedDB] Added record to items: item-1

[90mstdout[2m | src/lib/__tests__/integration.test.ts[2m > [22m[2mIntegration Tests - Real Application Data Flow[2m > [22m[2mMigration from localStorage to IndexedDB[2m > [22m[2mshould migrate items from localStorage to IndexedDB
[22m[39m[Migration] ========== MIGRATION COMPLETED SUCCESSFULLY ==========

[90mstdout[2m | src/lib/__tests__/integration.test.ts[2m > [22m[2mIntegration Tests - Real Application Data Flow[2m > [22m[2mMigration from localStorage to IndexedDB[2m > [22m[2mshould migrate items from localStorage to IndexedDB
[22m[39m[MigrationHelper] Successfully migrated data from localStorage to IndexedDB

[90mstdout[2m | src/lib/__tests__/integration.test.ts[2m > [22m[2mIntegration Tests - Real Application Data Flow[2m > [22m[2mMigration from localStorage to IndexedDB[2m > [22m[2mshould migrate items from localStorage to IndexedDB
[22m[39m[MigrationHelper] localStorage ‚Üí IndexedDB migration completed
[MigrationHelper] Starting IndexedDB ‚Üí Supabase sync
[MigrationHelper] Starting Supabase sync for user: test-user-123

[90mstderr[2m | src/lib/__tests__/integration.test.ts[2m > [22m[2mIntegration Tests - Real Application Data Flow[2m > [22m[2mMigration from localStorage to IndexedDB[2m > [22m[2mshould migrate items from localStorage to IndexedDB
[22m[39m[MigrationHelper] Error during Supabase sync: TypeError: __vite_ssr_import_0__.supabase.from(...).upsert is not a function
    at syncIndexedDBToSupabase [90m(/app/[39msrc/lib/migration-helper.ts:112:10[90m)[39m
[90m    at runNextTicks (node:internal/process/task_queues:65:5)[39m
[90m    at processImmediate (node:internal/timers:453:9)[39m
    at Module.checkAndMigrateData [90m(/app/[39msrc/lib/migration-helper.ts:37:7[90m)[39m
    at [90m/app/[39msrc/lib/__tests__/integration.test.ts:111:7
    at [90mfile:///app/[39mnode_modules/[4m@vitest/runner[24m/dist/index.js:753:20

[90mstdout[2m | src/lib/__tests__/integration.test.ts[2m > [22m[2mIntegration Tests - Real Application Data Flow[2m > [22m[2mMigration from localStorage to IndexedDB[2m > [22m[2mshould migrate items from localStorage to IndexedDB
[22m[39m[MigrationHelper] Syncing 1 items to Supabase

[90mstdout[2m | src/lib/__tests__/integration.test.ts[2m > [22m[2mIntegration Tests - Real Application Data Flow[2m > [22m[2mMigration from localStorage to IndexedDB[2m > [22m[2mshould migrate items from localStorage to IndexedDB
[22m[39m[MigrationHelper] IndexedDB ‚Üí Supabase sync completed
[MigrationHelper] Migration process completed successfully

[90mstdout[2m | src/lib/__tests__/integration.test.ts[2m > [22m[2mIntegration Tests - Real Application Data Flow[2m > [22m[2mMigration from localStorage to IndexedDB[2m > [22m[2mshould migrate quotes from localStorage to IndexedDB
[22m[39m[IndexedDB] Cleared all user data from customers

[90mstdout[2m | src/lib/__tests__/integration.test.ts[2m > [22m[2mIntegration Tests - Real Application Data Flow[2m > [22m[2mMigration from localStorage to IndexedDB[2m > [22m[2mshould migrate quotes from localStorage to IndexedDB
[22m[39m[IndexedDB] Cleared all user data from items

[90mstdout[2m | src/lib/__tests__/integration.test.ts[2m > [22m[2mIntegration Tests - Real Application Data Flow[2m > [22m[2mMigration from localStorage to IndexedDB[2m > [22m[2mshould migrate quotes from localStorage to IndexedDB
[22m[39m[IndexedDB] Cleared all user data from quotes

[90mstdout[2m | src/lib/__tests__/integration.test.ts[2m > [22m[2mIntegration Tests - Real Application Data Flow[2m > [22m[2mMigration from localStorage to IndexedDB[2m > [22m[2mshould migrate quotes from localStorage to IndexedDB
[22m[39m[MigrationHelper] Starting migration check for user: test-user-123
[MigrationHelper] Starting localStorage ‚Üí IndexedDB migration

[90mstdout[2m | src/lib/__tests__/integration.test.ts[2m > [22m[2mIntegration Tests - Real Application Data Flow[2m > [22m[2mMigration from localStorage to IndexedDB[2m > [22m[2mshould migrate quotes from localStorage to IndexedDB
[22m[39m[Migration] ========== STARTING INDEXEDDB MIGRATION ==========

[90mstdout[2m | src/lib/__tests__/integration.test.ts[2m > [22m[2mIntegration Tests - Real Application Data Flow[2m > [22m[2mMigration from localStorage to IndexedDB[2m > [22m[2mshould migrate quotes from localStorage to IndexedDB
[22m[39m[IndexedDB] Added record to quotes: quote-1

[90mstdout[2m | src/lib/__tests__/integration.test.ts[2m > [22m[2mIntegration Tests - Real Application Data Flow[2m > [22m[2mMigration from localStorage to IndexedDB[2m > [22m[2mshould migrate quotes from localStorage to IndexedDB
[22m[39m[Migration] ========== MIGRATION COMPLETED SUCCESSFULLY ==========

[90mstdout[2m | src/lib/__tests__/integration.test.ts[2m > [22m[2mIntegration Tests - Real Application Data Flow[2m > [22m[2mMigration from localStorage to IndexedDB[2m > [22m[2mshould migrate quotes from localStorage to IndexedDB
[22m[39m[MigrationHelper] Successfully migrated data from localStorage to IndexedDB

[90mstdout[2m | src/lib/__tests__/integration.test.ts[2m > [22m[2mIntegration Tests - Real Application Data Flow[2m > [22m[2mMigration from localStorage to IndexedDB[2m > [22m[2mshould migrate quotes from localStorage to IndexedDB
[22m[39m[MigrationHelper] localStorage ‚Üí IndexedDB migration completed
[MigrationHelper] Starting IndexedDB ‚Üí Supabase sync
[MigrationHelper] Starting Supabase sync for user: test-user-123

[90mstderr[2m | src/lib/__tests__/integration.test.ts[2m > [22m[2mIntegration Tests - Real Application Data Flow[2m > [22m[2mMigration from localStorage to IndexedDB[2m > [22m[2mshould migrate quotes from localStorage to IndexedDB
[22m[39m[MigrationHelper] Error during Supabase sync: TypeError: __vite_ssr_import_0__.supabase.from(...).upsert is not a function
    at syncIndexedDBToSupabase [90m(/app/[39msrc/lib/migration-helper.ts:130:10[90m)[39m
[90m    at runNextTicks (node:internal/process/task_queues:65:5)[39m
[90m    at processImmediate (node:internal/timers:453:9)[39m
    at Module.checkAndMigrateData [90m(/app/[39msrc/lib/migration-helper.ts:37:7[90m)[39m
    at [90m/app/[39msrc/lib/__tests__/integration.test.ts:143:7
    at [90mfile:///app/[39mnode_modules/[4m@vitest/runner[24m/dist/index.js:753:20

[90mstdout[2m | src/lib/__tests__/integration.test.ts[2m > [22m[2mIntegration Tests - Real Application Data Flow[2m > [22m[2mMigration from localStorage to IndexedDB[2m > [22m[2mshould migrate quotes from localStorage to IndexedDB
[22m[39m[MigrationHelper] Syncing 1 quotes to Supabase

[90mstdout[2m | src/lib/__tests__/integration.test.ts[2m > [22m[2mIntegration Tests - Real Application Data Flow[2m > [22m[2mMigration from localStorage to IndexedDB[2m > [22m[2mshould migrate quotes from localStorage to IndexedDB
[22m[39m[MigrationHelper] IndexedDB ‚Üí Supabase sync completed
[MigrationHelper] Migration process completed successfully

[90mstdout[2m | src/lib/__tests__/integration.test.ts[2m > [22m[2mIntegration Tests - Real Application Data Flow[2m > [22m[2mService Layer Integration with IndexedDB[2m > [22m[2mshould retrieve customers from IndexedDB when available
[22m[39m[IndexedDB] Cleared all user data from customers

[90mstdout[2m | src/lib/__tests__/integration.test.ts[2m > [22m[2mIntegration Tests - Real Application Data Flow[2m > [22m[2mService Layer Integration with IndexedDB[2m > [22m[2mshould retrieve customers from IndexedDB when available
[22m[39m[IndexedDB] Cleared all user data from items

[90mstdout[2m | src/lib/__tests__/integration.test.ts[2m > [22m[2mIntegration Tests - Real Application Data Flow[2m > [22m[2mService Layer Integration with IndexedDB[2m > [22m[2mshould retrieve customers from IndexedDB when available
[22m[39m[IndexedDB] Cleared all user data from quotes

[90mstdout[2m | src/lib/__tests__/integration.test.ts[2m > [22m[2mIntegration Tests - Real Application Data Flow[2m > [22m[2mService Layer Integration with IndexedDB[2m > [22m[2mshould retrieve customers from IndexedDB when available
[22m[39m[IndexedDB] Added record to customers: cust-1

[90mstdout[2m | src/lib/__tests__/integration.test.ts[2m > [22m[2mIntegration Tests - Real Application Data Flow[2m > [22m[2mService Layer Integration with IndexedDB[2m > [22m[2mshould retrieve customers from IndexedDB when available
[22m[39m[Dedup] Starting new request for fetch-customers-test-user-123
[CacheManager] Cache miss for customers:all

[90mstdout[2m | src/lib/__tests__/integration.test.ts[2m > [22m[2mIntegration Tests - Real Application Data Flow[2m > [22m[2mService Layer Integration with IndexedDB[2m > [22m[2mshould retrieve customers from IndexedDB when available
[22m[39m[CustomerService] IndexedDB check: found 1 customers
[CustomerService] Retrieved 1 customers from IndexedDB
[CacheManager] Cached customers:all

[90mstdout[2m | src/lib/__tests__/integration.test.ts[2m > [22m[2mIntegration Tests - Real Application Data Flow[2m > [22m[2mService Layer Integration with IndexedDB[2m > [22m[2mshould retrieve customers from IndexedDB when available
[22m[39m[CustomerService] Cached 1 customers from IndexedDB
[CustomerService] Online - will fetch from Supabase to sync
[CustomerService] Starting Supabase fetch for user test-user-123

[90mstdout[2m | src/lib/__tests__/integration.test.ts[2m > [22m[2mIntegration Tests - Real Application Data Flow[2m > [22m[2mService Layer Integration with IndexedDB[2m > [22m[2mshould retrieve customers from IndexedDB when available
[22m[39m[CustomerService] Supabase returned 0 customers
[CustomerService] Supabase empty - checking IndexedDB for local data

[90mstdout[2m | src/lib/__tests__/integration.test.ts[2m > [22m[2mIntegration Tests - Real Application Data Flow[2m > [22m[2mService Layer Integration with IndexedDB[2m > [22m[2mshould retrieve customers from IndexedDB when available
[22m[39m[CustomerService] IndexedDB has 1 customers
[CustomerService] Supabase empty, using 1 customers from IndexedDB
[CacheManager] Cached customers:all

[90mstdout[2m | src/lib/__tests__/integration.test.ts[2m > [22m[2mIntegration Tests - Real Application Data Flow[2m > [22m[2mService Layer Integration with IndexedDB[2m > [22m[2mshould retrieve customers from IndexedDB when available
[22m[39m[CustomerService] RETURNING 1 customers from IndexedDB

[90mstdout[2m | src/lib/__tests__/integration.test.ts[2m > [22m[2mIntegration Tests - Real Application Data Flow[2m > [22m[2mService Layer Integration with IndexedDB[2m > [22m[2mshould retrieve customers from IndexedDB when available
[22m[39m[Dedup] Cleanup for fetch-customers-test-user-123: success

[90mstdout[2m | src/lib/__tests__/integration.test.ts[2m > [22m[2mIntegration Tests - Real Application Data Flow[2m > [22m[2mService Layer Integration with IndexedDB[2m > [22m[2mshould save new customers to IndexedDB
[22m[39m[IndexedDB] Cleared all user data from customers

[90mstdout[2m | src/lib/__tests__/integration.test.ts[2m > [22m[2mIntegration Tests - Real Application Data Flow[2m > [22m[2mService Layer Integration with IndexedDB[2m > [22m[2mshould save new customers to IndexedDB
[22m[39m[IndexedDB] Cleared all user data from items

[90mstdout[2m | src/lib/__tests__/integration.test.ts[2m > [22m[2mIntegration Tests - Real Application Data Flow[2m > [22m[2mService Layer Integration with IndexedDB[2m > [22m[2mshould save new customers to IndexedDB
[22m[39m[IndexedDB] Cleared all user data from quotes

[90mstdout[2m | src/lib/__tests__/integration.test.ts[2m > [22m[2mIntegration Tests - Real Application Data Flow[2m > [22m[2mService Layer Integration with IndexedDB[2m > [22m[2mshould save new customers to IndexedDB
[22m[39m[IndexedDB] Added record to customers: cust-2

[90mstdout[2m | src/lib/__tests__/integration.test.ts[2m > [22m[2mIntegration Tests - Real Application Data Flow[2m > [22m[2mService Layer Integration with IndexedDB[2m > [22m[2mshould save new customers to IndexedDB
[22m[39m[CustomerService] Saved customer to IndexedDB
[CacheManager] Invalidated cache for customers:all
[CacheManager] Invalidated related cache: quotes:all

[90mstdout[2m | src/lib/__tests__/integration.test.ts[2m > [22m[2mIntegration Tests - Real Application Data Flow[2m > [22m[2mService Layer Integration with IndexedDB[2m > [22m[2mshould save new customers to IndexedDB
[22m[39m‚úÖ Successfully inserted customer into database

[90mstdout[2m | src/lib/__tests__/integration.test.ts[2m > [22m[2mIntegration Tests - Real Application Data Flow[2m > [22m[2mService Layer Integration with IndexedDB[2m > [22m[2mshould save new items to IndexedDB
[22m[39m[IndexedDB] Cleared all user data from customers

[90mstdout[2m | src/lib/__tests__/integration.test.ts[2m > [22m[2mIntegration Tests - Real Application Data Flow[2m > [22m[2mService Layer Integration with IndexedDB[2m > [22m[2mshould save new items to IndexedDB
[22m[39m[IndexedDB] Cleared all user data from items

[90mstdout[2m | src/lib/__tests__/integration.test.ts[2m > [22m[2mIntegration Tests - Real Application Data Flow[2m > [22m[2mService Layer Integration with IndexedDB[2m > [22m[2mshould save new items to IndexedDB
[22m[39m[IndexedDB] Cleared all user data from quotes

[90mstdout[2m | src/lib/__tests__/integration.test.ts[2m > [22m[2mIntegration Tests - Real Application Data Flow[2m > [22m[2mService Layer Integration with IndexedDB[2m > [22m[2mshould save new items to IndexedDB
[22m[39m[IndexedDB] Added record to items: item-2

[90mstdout[2m | src/lib/__tests__/integration.test.ts[2m > [22m[2mIntegration Tests - Real Application Data Flow[2m > [22m[2mService Layer Integration with IndexedDB[2m > [22m[2mshould save new items to IndexedDB
[22m[39m[ItemService] Saved item to IndexedDB
[CacheManager] Invalidated cache for items:all
[CacheManager] Invalidated related cache: quotes:all

[90mstdout[2m | src/lib/__tests__/integration.test.ts[2m > [22m[2mIntegration Tests - Real Application Data Flow[2m > [22m[2mService Layer Integration with IndexedDB[2m > [22m[2mshould save new items to IndexedDB
[22m[39m‚úÖ Successfully inserted item into database

[90mstdout[2m | src/lib/__tests__/integration.test.ts[2m > [22m[2mIntegration Tests - Real Application Data Flow[2m > [22m[2mService Layer Integration with IndexedDB[2m > [22m[2mshould save new quotes to IndexedDB
[22m[39m[IndexedDB] Cleared all user data from customers

[90mstdout[2m | src/lib/__tests__/integration.test.ts[2m > [22m[2mIntegration Tests - Real Application Data Flow[2m > [22m[2mService Layer Integration with IndexedDB[2m > [22m[2mshould save new quotes to IndexedDB
[22m[39m[IndexedDB] Cleared all user data from items

[90mstdout[2m | src/lib/__tests__/integration.test.ts[2m > [22m[2mIntegration Tests - Real Application Data Flow[2m > [22m[2mService Layer Integration with IndexedDB[2m > [22m[2mshould save new quotes to IndexedDB
[22m[39m[IndexedDB] Cleared all user data from quotes

[90mstdout[2m | src/lib/__tests__/integration.test.ts[2m > [22m[2mIntegration Tests - Real Application Data Flow[2m > [22m[2mService Layer Integration with IndexedDB[2m > [22m[2mshould save new quotes to IndexedDB
[22m[39m[IndexedDB] Added record to quotes: quote-2

[90mstdout[2m | src/lib/__tests__/integration.test.ts[2m > [22m[2mIntegration Tests - Real Application Data Flow[2m > [22m[2mService Layer Integration with IndexedDB[2m > [22m[2mshould save new quotes to IndexedDB
[22m[39m[QuoteService] Saved quote to IndexedDB
[CacheManager] Invalidated cache for quotes:all

[90mstdout[2m | src/lib/__tests__/integration.test.ts[2m > [22m[2mIntegration Tests - Real Application Data Flow[2m > [22m[2mService Layer Integration with IndexedDB[2m > [22m[2mshould save new quotes to IndexedDB
[22m[39m‚úÖ Successfully inserted quote into database

[90mstdout[2m | src/lib/__tests__/integration.test.ts[2m > [22m[2mIntegration Tests - Real Application Data Flow[2m > [22m[2mOffline-Online Sync Behavior[2m > [22m[2mshould work offline with IndexedDB
[22m[39m[IndexedDB] Cleared all user data from customers

[90mstdout[2m | src/lib/__tests__/integration.test.ts[2m > [22m[2mIntegration Tests - Real Application Data Flow[2m > [22m[2mOffline-Online Sync Behavior[2m > [22m[2mshould work offline with IndexedDB
[22m[39m[IndexedDB] Cleared all user data from items

[90mstdout[2m | src/lib/__tests__/integration.test.ts[2m > [22m[2mIntegration Tests - Real Application Data Flow[2m > [22m[2mOffline-Online Sync Behavior[2m > [22m[2mshould work offline with IndexedDB
[22m[39m[IndexedDB] Cleared all user data from quotes

[90mstdout[2m | src/lib/__tests__/integration.test.ts[2m > [22m[2mIntegration Tests - Real Application Data Flow[2m > [22m[2mOffline-Online Sync Behavior[2m > [22m[2mshould work offline with IndexedDB
[22m[39m[IndexedDB] Added record to customers: cust-offline

[90mstdout[2m | src/lib/__tests__/integration.test.ts[2m > [22m[2mIntegration Tests - Real Application Data Flow[2m > [22m[2mOffline-Online Sync Behavior[2m > [22m[2mshould work offline with IndexedDB
[22m[39m[CustomerService] Saved customer to IndexedDB
[CacheManager] Invalidated cache for customers:all
[CacheManager] Invalidated related cache: quotes:all

[90mstdout[2m | src/lib/__tests__/integration.test.ts[2m > [22m[2mIntegration Tests - Real Application Data Flow[2m > [22m[2mOffline-Online Sync Behavior[2m > [22m[2mshould retrieve data from IndexedDB when offline
[22m[39m[IndexedDB] Cleared all user data from customers

[90mstdout[2m | src/lib/__tests__/integration.test.ts[2m > [22m[2mIntegration Tests - Real Application Data Flow[2m > [22m[2mOffline-Online Sync Behavior[2m > [22m[2mshould retrieve data from IndexedDB when offline
[22m[39m[IndexedDB] Cleared all user data from items

[90mstdout[2m | src/lib/__tests__/integration.test.ts[2m > [22m[2mIntegration Tests - Real Application Data Flow[2m > [22m[2mOffline-Online Sync Behavior[2m > [22m[2mshould retrieve data from IndexedDB when offline
[22m[39m[IndexedDB] Cleared all user data from quotes

[90mstdout[2m | src/lib/__tests__/integration.test.ts[2m > [22m[2mIntegration Tests - Real Application Data Flow[2m > [22m[2mOffline-Online Sync Behavior[2m > [22m[2mshould retrieve data from IndexedDB when offline
[22m[39m[IndexedDB] Added record to items: item-offline

[90mstdout[2m | src/lib/__tests__/integration.test.ts[2m > [22m[2mIntegration Tests - Real Application Data Flow[2m > [22m[2mOffline-Online Sync Behavior[2m > [22m[2mshould retrieve data from IndexedDB when offline
[22m[39m[Dedup] Starting new request for fetch-items-test-user-123
[CacheManager] Cache miss for items:all

[90mstdout[2m | src/lib/__tests__/integration.test.ts[2m > [22m[2mIntegration Tests - Real Application Data Flow[2m > [22m[2mOffline-Online Sync Behavior[2m > [22m[2mshould retrieve data from IndexedDB when offline
[22m[39m[ItemService] Retrieved 1 items from IndexedDB
[CacheManager] Cached items:all

[90mstdout[2m | src/lib/__tests__/integration.test.ts[2m > [22m[2mIntegration Tests - Real Application Data Flow[2m > [22m[2mOffline-Online Sync Behavior[2m > [22m[2mshould retrieve data from IndexedDB when offline
[22m[39m[Dedup] Cleanup for fetch-items-test-user-123: success

[90mstdout[2m | src/lib/__tests__/integration.test.ts[2m > [22m[2mIntegration Tests - Real Application Data Flow[2m > [22m[2mData Persistence Across Sessions[2m > [22m[2mshould persist customer data across app restarts
[22m[39m[IndexedDB] Cleared all user data from customers

[90mstdout[2m | src/lib/__tests__/integration.test.ts[2m > [22m[2mIntegration Tests - Real Application Data Flow[2m > [22m[2mData Persistence Across Sessions[2m > [22m[2mshould persist customer data across app restarts
[22m[39m[IndexedDB] Cleared all user data from items

[90mstdout[2m | src/lib/__tests__/integration.test.ts[2m > [22m[2mIntegration Tests - Real Application Data Flow[2m > [22m[2mData Persistence Across Sessions[2m > [22m[2mshould persist customer data across app restarts
[22m[39m[IndexedDB] Cleared all user data from quotes

[90mstdout[2m | src/lib/__tests__/integration.test.ts[2m > [22m[2mIntegration Tests - Real Application Data Flow[2m > [22m[2mData Persistence Across Sessions[2m > [22m[2mshould persist customer data across app restarts
[22m[39m[IndexedDB] Added record to customers: cust-persist

[90mstdout[2m | src/lib/__tests__/integration.test.ts[2m > [22m[2mIntegration Tests - Real Application Data Flow[2m > [22m[2mData Persistence Across Sessions[2m > [22m[2mshould persist customer data across app restarts
[22m[39m[CustomerService] Saved customer to IndexedDB
[CacheManager] Invalidated cache for customers:all
[CacheManager] Invalidated related cache: quotes:all

[90mstdout[2m | src/lib/__tests__/integration.test.ts[2m > [22m[2mIntegration Tests - Real Application Data Flow[2m > [22m[2mData Persistence Across Sessions[2m > [22m[2mshould persist customer data across app restarts
[22m[39m‚úÖ Successfully inserted customer into database

[90mstdout[2m | src/lib/__tests__/integration.test.ts[2m > [22m[2mIntegration Tests - Real Application Data Flow[2m > [22m[2mData Persistence Across Sessions[2m > [22m[2mshould persist customer data across app restarts
[22m[39m[Dedup] Starting new request for fetch-customers-test-user-123
[CacheManager] Cache miss for customers:all

[90mstdout[2m | src/lib/__tests__/integration.test.ts[2m > [22m[2mIntegration Tests - Real Application Data Flow[2m > [22m[2mData Persistence Across Sessions[2m > [22m[2mshould persist customer data across app restarts
[22m[39m[CustomerService] IndexedDB check: found 1 customers
[CustomerService] Retrieved 1 customers from IndexedDB
[CacheManager] Cached customers:all

[90mstdout[2m | src/lib/__tests__/integration.test.ts[2m > [22m[2mIntegration Tests - Real Application Data Flow[2m > [22m[2mData Persistence Across Sessions[2m > [22m[2mshould persist customer data across app restarts
[22m[39m[CustomerService] Cached 1 customers from IndexedDB
[CustomerService] Online - will fetch from Supabase to sync
[CustomerService] Starting Supabase fetch for user test-user-123

[90mstdout[2m | src/lib/__tests__/integration.test.ts[2m > [22m[2mIntegration Tests - Real Application Data Flow[2m > [22m[2mData Persistence Across Sessions[2m > [22m[2mshould persist customer data across app restarts
[22m[39m[CustomerService] Supabase returned 0 customers
[CustomerService] Supabase empty - checking IndexedDB for local data

[90mstdout[2m | src/lib/__tests__/integration.test.ts[2m > [22m[2mIntegration Tests - Real Application Data Flow[2m > [22m[2mData Persistence Across Sessions[2m > [22m[2mshould persist customer data across app restarts
[22m[39m[CustomerService] IndexedDB has 1 customers
[CustomerService] Supabase empty, using 1 customers from IndexedDB
[CacheManager] Cached customers:all

[90mstdout[2m | src/lib/__tests__/integration.test.ts[2m > [22m[2mIntegration Tests - Real Application Data Flow[2m > [22m[2mData Persistence Across Sessions[2m > [22m[2mshould persist customer data across app restarts
[22m[39m[CustomerService] RETURNING 1 customers from IndexedDB

[90mstdout[2m | src/lib/__tests__/integration.test.ts[2m > [22m[2mIntegration Tests - Real Application Data Flow[2m > [22m[2mData Persistence Across Sessions[2m > [22m[2mshould persist customer data across app restarts
[22m[39m[Dedup] Cleanup for fetch-customers-test-user-123: success

 [32m‚úì[39m src/lib/__tests__/integration.test.ts [2m([22m[2m10 tests[22m[2m)[22m[32m 97[2mms[22m[39m
[90mstdout[2m | src/lib/__tests__/offline-crud.test.ts
[22m[39m[Test Setup] IndexedDB polyfill status: { indexedDB: [32m'object'[39m, IDBKeyRange: [32m'function'[39m }
[Test Setup] Cache Storage API polyfill status: { caches: [32m'object'[39m, navigator_storage: [32m'object'[39m }

[90mstdout[2m | src/lib/__tests__/offline-crud.test.ts[2m > [22m[2mOffline CRUD Operations[2m > [22m[2mOffline Customer Operations[2m > [22m[2mshould create customer offline and store in IndexedDB
[22m[39m[IndexedDB] Upgrading database schema to version [33m1[39m
[IndexedDB] Created customers store
[IndexedDB] Created items store
[IndexedDB] Created quotes store
[IndexedDB] Created company_settings store
[IndexedDB] Created sync_queue store

[90mstdout[2m | src/lib/__tests__/offline-crud.test.ts[2m > [22m[2mOffline CRUD Operations[2m > [22m[2mOffline Customer Operations[2m > [22m[2mshould create customer offline and store in IndexedDB
[22m[39m[IndexedDB] Database opened successfully

[90mstdout[2m | src/lib/__tests__/offline-crud.test.ts[2m > [22m[2mOffline CRUD Operations[2m > [22m[2mOffline Customer Operations[2m > [22m[2mshould create customer offline and store in IndexedDB
[22m[39m[IndexedDB] Cleared all user data from customers

[90mstdout[2m | src/lib/__tests__/offline-crud.test.ts[2m > [22m[2mOffline CRUD Operations[2m > [22m[2mOffline Customer Operations[2m > [22m[2mshould create customer offline and store in IndexedDB
[22m[39m[IndexedDB] Cleared all user data from items

[90mstdout[2m | src/lib/__tests__/offline-crud.test.ts[2m > [22m[2mOffline CRUD Operations[2m > [22m[2mOffline Customer Operations[2m > [22m[2mshould create customer offline and store in IndexedDB
[22m[39m[IndexedDB] Cleared all user data from quotes

[90mstdout[2m | src/lib/__tests__/offline-crud.test.ts[2m > [22m[2mOffline CRUD Operations[2m > [22m[2mOffline Customer Operations[2m > [22m[2mshould create customer offline and store in IndexedDB
[22m[39m[IndexedDB] Added record to customers: cust-1

[90mstdout[2m | src/lib/__tests__/offline-crud.test.ts[2m > [22m[2mOffline CRUD Operations[2m > [22m[2mOffline Customer Operations[2m > [22m[2mshould create customer offline and store in IndexedDB
[22m[39m[CustomerService] Saved customer to IndexedDB
[CacheManager] Invalidated cache for customers:all
[CacheManager] Invalidated related cache: quotes:all

[90mstdout[2m | src/lib/__tests__/offline-crud.test.ts[2m > [22m[2mOffline CRUD Operations[2m > [22m[2mOffline Customer Operations[2m > [22m[2mshould create customer offline and store in IndexedDB
[22m[39m[IndexedDB] Cleared all user data from customers

[90mstdout[2m | src/lib/__tests__/offline-crud.test.ts[2m > [22m[2mOffline CRUD Operations[2m > [22m[2mOffline Customer Operations[2m > [22m[2mshould create customer offline and store in IndexedDB
[22m[39m[IndexedDB] Cleared all user data from items

[90mstdout[2m | src/lib/__tests__/offline-crud.test.ts[2m > [22m[2mOffline CRUD Operations[2m > [22m[2mOffline Customer Operations[2m > [22m[2mshould create customer offline and store in IndexedDB
[22m[39m[IndexedDB] Cleared all user data from quotes

[90mstdout[2m | src/lib/__tests__/offline-crud.test.ts[2m > [22m[2mOffline CRUD Operations[2m > [22m[2mOffline Customer Operations[2m > [22m[2mshould read customer offline from IndexedDB
[22m[39m[IndexedDB] Cleared all user data from customers

[90mstdout[2m | src/lib/__tests__/offline-crud.test.ts[2m > [22m[2mOffline CRUD Operations[2m > [22m[2mOffline Customer Operations[2m > [22m[2mshould read customer offline from IndexedDB
[22m[39m[IndexedDB] Cleared all user data from items

[90mstdout[2m | src/lib/__tests__/offline-crud.test.ts[2m > [22m[2mOffline CRUD Operations[2m > [22m[2mOffline Customer Operations[2m > [22m[2mshould read customer offline from IndexedDB
[22m[39m[IndexedDB] Cleared all user data from quotes

[90mstdout[2m | src/lib/__tests__/offline-crud.test.ts[2m > [22m[2mOffline CRUD Operations[2m > [22m[2mOffline Customer Operations[2m > [22m[2mshould read customer offline from IndexedDB
[22m[39m[IndexedDB] Added record to customers: cust-1

[90mstdout[2m | src/lib/__tests__/offline-crud.test.ts[2m > [22m[2mOffline CRUD Operations[2m > [22m[2mOffline Customer Operations[2m > [22m[2mshould read customer offline from IndexedDB
[22m[39m[CustomerService] Saved customer to IndexedDB
[CacheManager] Invalidated cache for customers:all
[CacheManager] Invalidated related cache: quotes:all

[90mstdout[2m | src/lib/__tests__/offline-crud.test.ts[2m > [22m[2mOffline CRUD Operations[2m > [22m[2mOffline Customer Operations[2m > [22m[2mshould read customer offline from IndexedDB
[22m[39m[Dedup] Starting new request for fetch-customers-test-user-123
[CacheManager] Cache miss for customers:all

[90mstdout[2m | src/lib/__tests__/offline-crud.test.ts[2m > [22m[2mOffline CRUD Operations[2m > [22m[2mOffline Customer Operations[2m > [22m[2mshould read customer offline from IndexedDB
[22m[39m[CustomerService] IndexedDB check: found 1 customers
[CustomerService] Retrieved 1 customers from IndexedDB
[CacheManager] Cached customers:all

[90mstdout[2m | src/lib/__tests__/offline-crud.test.ts[2m > [22m[2mOffline CRUD Operations[2m > [22m[2mOffline Customer Operations[2m > [22m[2mshould read customer offline from IndexedDB
[22m[39m[CustomerService] Cached 1 customers from IndexedDB
[CustomerService] Offline - returning 1 customers from IndexedDB

[90mstdout[2m | src/lib/__tests__/offline-crud.test.ts[2m > [22m[2mOffline CRUD Operations[2m > [22m[2mOffline Customer Operations[2m > [22m[2mshould read customer offline from IndexedDB
[22m[39m[Dedup] Cleanup for fetch-customers-test-user-123: success

[90mstdout[2m | src/lib/__tests__/offline-crud.test.ts[2m > [22m[2mOffline CRUD Operations[2m > [22m[2mOffline Customer Operations[2m > [22m[2mshould read customer offline from IndexedDB
[22m[39m[IndexedDB] Cleared all user data from customers

[90mstdout[2m | src/lib/__tests__/offline-crud.test.ts[2m > [22m[2mOffline CRUD Operations[2m > [22m[2mOffline Customer Operations[2m > [22m[2mshould read customer offline from IndexedDB
[22m[39m[IndexedDB] Cleared all user data from items

[90mstdout[2m | src/lib/__tests__/offline-crud.test.ts[2m > [22m[2mOffline CRUD Operations[2m > [22m[2mOffline Customer Operations[2m > [22m[2mshould read customer offline from IndexedDB
[22m[39m[IndexedDB] Cleared all user data from quotes

[90mstdout[2m | src/lib/__tests__/offline-crud.test.ts[2m > [22m[2mOffline CRUD Operations[2m > [22m[2mOffline Customer Operations[2m > [22m[2mshould update customer offline
[22m[39m[IndexedDB] Cleared all user data from customers

[90mstdout[2m | src/lib/__tests__/offline-crud.test.ts[2m > [22m[2mOffline CRUD Operations[2m > [22m[2mOffline Customer Operations[2m > [22m[2mshould update customer offline
[22m[39m[IndexedDB] Cleared all user data from items

[90mstdout[2m | src/lib/__tests__/offline-crud.test.ts[2m > [22m[2mOffline CRUD Operations[2m > [22m[2mOffline Customer Operations[2m > [22m[2mshould update customer offline
[22m[39m[IndexedDB] Cleared all user data from quotes

[90mstdout[2m | src/lib/__tests__/offline-crud.test.ts[2m > [22m[2mOffline CRUD Operations[2m > [22m[2mOffline Customer Operations[2m > [22m[2mshould update customer offline
[22m[39m[IndexedDB] Added record to customers: cust-1

[90mstdout[2m | src/lib/__tests__/offline-crud.test.ts[2m > [22m[2mOffline CRUD Operations[2m > [22m[2mOffline Customer Operations[2m > [22m[2mshould update customer offline
[22m[39m[CustomerService] Saved customer to IndexedDB
[CacheManager] Invalidated cache for customers:all
[CacheManager] Invalidated related cache: quotes:all

[90mstdout[2m | src/lib/__tests__/offline-crud.test.ts[2m > [22m[2mOffline CRUD Operations[2m > [22m[2mOffline Customer Operations[2m > [22m[2mshould update customer offline
[22m[39m[IndexedDB] Updated record in customers: cust-1

[90mstdout[2m | src/lib/__tests__/offline-crud.test.ts[2m > [22m[2mOffline CRUD Operations[2m > [22m[2mOffline Customer Operations[2m > [22m[2mshould update customer offline
[22m[39m[CustomerService] Updated customer in IndexedDB
[CacheManager] Invalidated cache for customers:all
[CacheManager] Invalidated related cache: quotes:all

[90mstdout[2m | src/lib/__tests__/offline-crud.test.ts[2m > [22m[2mOffline CRUD Operations[2m > [22m[2mOffline Customer Operations[2m > [22m[2mshould update customer offline
[22m[39m[IndexedDB] Cleared all user data from customers

[90mstdout[2m | src/lib/__tests__/offline-crud.test.ts[2m > [22m[2mOffline CRUD Operations[2m > [22m[2mOffline Customer Operations[2m > [22m[2mshould update customer offline
[22m[39m[IndexedDB] Cleared all user data from items

[90mstdout[2m | src/lib/__tests__/offline-crud.test.ts[2m > [22m[2mOffline CRUD Operations[2m > [22m[2mOffline Customer Operations[2m > [22m[2mshould update customer offline
[22m[39m[IndexedDB] Cleared all user data from quotes

[90mstdout[2m | src/lib/__tests__/offline-crud.test.ts[2m > [22m[2mOffline CRUD Operations[2m > [22m[2mOffline Customer Operations[2m > [22m[2mshould delete customer offline
[22m[39m[IndexedDB] Cleared all user data from customers

[90mstdout[2m | src/lib/__tests__/offline-crud.test.ts[2m > [22m[2mOffline CRUD Operations[2m > [22m[2mOffline Customer Operations[2m > [22m[2mshould delete customer offline
[22m[39m[IndexedDB] Cleared all user data from items

[90mstdout[2m | src/lib/__tests__/offline-crud.test.ts[2m > [22m[2mOffline CRUD Operations[2m > [22m[2mOffline Customer Operations[2m > [22m[2mshould delete customer offline
[22m[39m[IndexedDB] Cleared all user data from quotes

[90mstdout[2m | src/lib/__tests__/offline-crud.test.ts[2m > [22m[2mOffline CRUD Operations[2m > [22m[2mOffline Customer Operations[2m > [22m[2mshould delete customer offline
[22m[39m[IndexedDB] Added record to customers: cust-1

[90mstdout[2m | src/lib/__tests__/offline-crud.test.ts[2m > [22m[2mOffline CRUD Operations[2m > [22m[2mOffline Customer Operations[2m > [22m[2mshould delete customer offline
[22m[39m[CustomerService] Saved customer to IndexedDB
[CacheManager] Invalidated cache for customers:all
[CacheManager] Invalidated related cache: quotes:all

[90mstdout[2m | src/lib/__tests__/offline-crud.test.ts[2m > [22m[2mOffline CRUD Operations[2m > [22m[2mOffline Customer Operations[2m > [22m[2mshould delete customer offline
[22m[39m[IndexedDB] Deleted record from customers: cust-1

[90mstdout[2m | src/lib/__tests__/offline-crud.test.ts[2m > [22m[2mOffline CRUD Operations[2m > [22m[2mOffline Customer Operations[2m > [22m[2mshould delete customer offline
[22m[39m[CustomerService] Deleted customer from IndexedDB
[CacheManager] Invalidated cache for customers:all
[CacheManager] Invalidated related cache: quotes:all

[90mstdout[2m | src/lib/__tests__/offline-crud.test.ts[2m > [22m[2mOffline CRUD Operations[2m > [22m[2mOffline Customer Operations[2m > [22m[2mshould delete customer offline
[22m[39m[Dedup] Starting new request for fetch-customers-user-1
[CacheManager] Cache miss for customers:all

[90mstdout[2m | src/lib/__tests__/offline-crud.test.ts[2m > [22m[2mOffline CRUD Operations[2m > [22m[2mOffline Customer Operations[2m > [22m[2mshould delete customer offline
[22m[39m[CustomerService] IndexedDB check: found 0 customers

[90mstdout[2m | src/lib/__tests__/offline-crud.test.ts[2m > [22m[2mOffline CRUD Operations[2m > [22m[2mOffline Customer Operations[2m > [22m[2mshould delete customer offline
[22m[39m[Dedup] Cleanup for fetch-customers-user-1: success

[90mstdout[2m | src/lib/__tests__/offline-crud.test.ts[2m > [22m[2mOffline CRUD Operations[2m > [22m[2mOffline Customer Operations[2m > [22m[2mshould delete customer offline
[22m[39m[IndexedDB] Cleared all user data from customers

[90mstdout[2m | src/lib/__tests__/offline-crud.test.ts[2m > [22m[2mOffline CRUD Operations[2m > [22m[2mOffline Customer Operations[2m > [22m[2mshould delete customer offline
[22m[39m[IndexedDB] Cleared all user data from items

[90mstdout[2m | src/lib/__tests__/offline-crud.test.ts[2m > [22m[2mOffline CRUD Operations[2m > [22m[2mOffline Customer Operations[2m > [22m[2mshould delete customer offline
[22m[39m[IndexedDB] Cleared all user data from quotes

[90mstdout[2m | src/lib/__tests__/offline-crud.test.ts[2m > [22m[2mOffline CRUD Operations[2m > [22m[2mOffline Item Operations[2m > [22m[2mshould create item offline
[22m[39m[IndexedDB] Cleared all user data from customers

[90mstdout[2m | src/lib/__tests__/offline-crud.test.ts[2m > [22m[2mOffline CRUD Operations[2m > [22m[2mOffline Item Operations[2m > [22m[2mshould create item offline
[22m[39m[IndexedDB] Cleared all user data from items

[90mstdout[2m | src/lib/__tests__/offline-crud.test.ts[2m > [22m[2mOffline CRUD Operations[2m > [22m[2mOffline Item Operations[2m > [22m[2mshould create item offline
[22m[39m[IndexedDB] Cleared all user data from quotes

[90mstdout[2m | src/lib/__tests__/offline-crud.test.ts[2m > [22m[2mOffline CRUD Operations[2m > [22m[2mOffline Item Operations[2m > [22m[2mshould create item offline
[22m[39m[IndexedDB] Added record to items: item-1

[90mstdout[2m | src/lib/__tests__/offline-crud.test.ts[2m > [22m[2mOffline CRUD Operations[2m > [22m[2mOffline Item Operations[2m > [22m[2mshould create item offline
[22m[39m[ItemService] Saved item to IndexedDB
[CacheManager] Invalidated cache for items:all
[CacheManager] Invalidated related cache: quotes:all

[90mstdout[2m | src/lib/__tests__/offline-crud.test.ts[2m > [22m[2mOffline CRUD Operations[2m > [22m[2mOffline Item Operations[2m > [22m[2mshould create item offline
[22m[39m[IndexedDB] Cleared all user data from customers

[90mstdout[2m | src/lib/__tests__/offline-crud.test.ts[2m > [22m[2mOffline CRUD Operations[2m > [22m[2mOffline Item Operations[2m > [22m[2mshould create item offline
[22m[39m[IndexedDB] Cleared all user data from items

[90mstdout[2m | src/lib/__tests__/offline-crud.test.ts[2m > [22m[2mOffline CRUD Operations[2m > [22m[2mOffline Item Operations[2m > [22m[2mshould create item offline
[22m[39m[IndexedDB] Cleared all user data from quotes

[90mstdout[2m | src/lib/__tests__/offline-crud.test.ts[2m > [22m[2mOffline CRUD Operations[2m > [22m[2mOffline Item Operations[2m > [22m[2mshould read item offline
[22m[39m[IndexedDB] Cleared all user data from customers

[90mstdout[2m | src/lib/__tests__/offline-crud.test.ts[2m > [22m[2mOffline CRUD Operations[2m > [22m[2mOffline Item Operations[2m > [22m[2mshould read item offline
[22m[39m[IndexedDB] Cleared all user data from items

[90mstdout[2m | src/lib/__tests__/offline-crud.test.ts[2m > [22m[2mOffline CRUD Operations[2m > [22m[2mOffline Item Operations[2m > [22m[2mshould read item offline
[22m[39m[IndexedDB] Cleared all user data from quotes

[90mstdout[2m | src/lib/__tests__/offline-crud.test.ts[2m > [22m[2mOffline CRUD Operations[2m > [22m[2mOffline Item Operations[2m > [22m[2mshould read item offline
[22m[39m[IndexedDB] Added record to items: item-1

[90mstdout[2m | src/lib/__tests__/offline-crud.test.ts[2m > [22m[2mOffline CRUD Operations[2m > [22m[2mOffline Item Operations[2m > [22m[2mshould read item offline
[22m[39m[ItemService] Saved item to IndexedDB
[CacheManager] Invalidated cache for items:all
[CacheManager] Invalidated related cache: quotes:all

[90mstdout[2m | src/lib/__tests__/offline-crud.test.ts[2m > [22m[2mOffline CRUD Operations[2m > [22m[2mOffline Item Operations[2m > [22m[2mshould read item offline
[22m[39m[Dedup] Starting new request for fetch-items-user-1
[CacheManager] Cache miss for items:all

[90mstdout[2m | src/lib/__tests__/offline-crud.test.ts[2m > [22m[2mOffline CRUD Operations[2m > [22m[2mOffline Item Operations[2m > [22m[2mshould read item offline
[22m[39m[ItemService] Retrieved 1 items from IndexedDB
[CacheManager] Cached items:all

[90mstdout[2m | src/lib/__tests__/offline-crud.test.ts[2m > [22m[2mOffline CRUD Operations[2m > [22m[2mOffline Item Operations[2m > [22m[2mshould read item offline
[22m[39m[Dedup] Cleanup for fetch-items-user-1: success

[90mstdout[2m | src/lib/__tests__/offline-crud.test.ts[2m > [22m[2mOffline CRUD Operations[2m > [22m[2mOffline Item Operations[2m > [22m[2mshould read item offline
[22m[39m[IndexedDB] Cleared all user data from customers

[90mstdout[2m | src/lib/__tests__/offline-crud.test.ts[2m > [22m[2mOffline CRUD Operations[2m > [22m[2mOffline Item Operations[2m > [22m[2mshould read item offline
[22m[39m[IndexedDB] Cleared all user data from items

[90mstdout[2m | src/lib/__tests__/offline-crud.test.ts[2m > [22m[2mOffline CRUD Operations[2m > [22m[2mOffline Item Operations[2m > [22m[2mshould read item offline
[22m[39m[IndexedDB] Cleared all user data from quotes

[90mstdout[2m | src/lib/__tests__/offline-crud.test.ts[2m > [22m[2mOffline CRUD Operations[2m > [22m[2mOffline Item Operations[2m > [22m[2mshould update item offline
[22m[39m[IndexedDB] Cleared all user data from customers

[90mstdout[2m | src/lib/__tests__/offline-crud.test.ts[2m > [22m[2mOffline CRUD Operations[2m > [22m[2mOffline Item Operations[2m > [22m[2mshould update item offline
[22m[39m[IndexedDB] Cleared all user data from items

[90mstdout[2m | src/lib/__tests__/offline-crud.test.ts[2m > [22m[2mOffline CRUD Operations[2m > [22m[2mOffline Item Operations[2m > [22m[2mshould update item offline
[22m[39m[IndexedDB] Cleared all user data from quotes

[90mstdout[2m | src/lib/__tests__/offline-crud.test.ts[2m > [22m[2mOffline CRUD Operations[2m > [22m[2mOffline Item Operations[2m > [22m[2mshould update item offline
[22m[39m[IndexedDB] Added record to items: item-1

[90mstdout[2m | src/lib/__tests__/offline-crud.test.ts[2m > [22m[2mOffline CRUD Operations[2m > [22m[2mOffline Item Operations[2m > [22m[2mshould update item offline
[22m[39m[ItemService] Saved item to IndexedDB
[CacheManager] Invalidated cache for items:all
[CacheManager] Invalidated related cache: quotes:all

[90mstdout[2m | src/lib/__tests__/offline-crud.test.ts[2m > [22m[2mOffline CRUD Operations[2m > [22m[2mOffline Item Operations[2m > [22m[2mshould update item offline
[22m[39m[IndexedDB] Updated record in items: item-1

[90mstdout[2m | src/lib/__tests__/offline-crud.test.ts[2m > [22m[2mOffline CRUD Operations[2m > [22m[2mOffline Item Operations[2m > [22m[2mshould update item offline
[22m[39m[ItemService] Updated item in IndexedDB
[CacheManager] Invalidated cache for items:all
[CacheManager] Invalidated related cache: quotes:all

[90mstdout[2m | src/lib/__tests__/offline-crud.test.ts[2m > [22m[2mOffline CRUD Operations[2m > [22m[2mOffline Item Operations[2m > [22m[2mshould update item offline
[22m[39m[IndexedDB] Cleared all user data from customers

[90mstdout[2m | src/lib/__tests__/offline-crud.test.ts[2m > [22m[2mOffline CRUD Operations[2m > [22m[2mOffline Item Operations[2m > [22m[2mshould update item offline
[22m[39m[IndexedDB] Cleared all user data from items

[90mstdout[2m | src/lib/__tests__/offline-crud.test.ts[2m > [22m[2mOffline CRUD Operations[2m > [22m[2mOffline Item Operations[2m > [22m[2mshould update item offline
[22m[39m[IndexedDB] Cleared all user data from quotes

[90mstdout[2m | src/lib/__tests__/offline-crud.test.ts[2m > [22m[2mOffline CRUD Operations[2m > [22m[2mOffline Item Operations[2m > [22m[2mshould delete item offline
[22m[39m[IndexedDB] Cleared all user data from customers

[90mstdout[2m | src/lib/__tests__/offline-crud.test.ts[2m > [22m[2mOffline CRUD Operations[2m > [22m[2mOffline Item Operations[2m > [22m[2mshould delete item offline
[22m[39m[IndexedDB] Cleared all user data from items

[90mstdout[2m | src/lib/__tests__/offline-crud.test.ts[2m > [22m[2mOffline CRUD Operations[2m > [22m[2mOffline Item Operations[2m > [22m[2mshould delete item offline
[22m[39m[IndexedDB] Cleared all user data from quotes

[90mstdout[2m | src/lib/__tests__/offline-crud.test.ts[2m > [22m[2mOffline CRUD Operations[2m > [22m[2mOffline Item Operations[2m > [22m[2mshould delete item offline
[22m[39m[IndexedDB] Added record to items: item-1

[90mstdout[2m | src/lib/__tests__/offline-crud.test.ts[2m > [22m[2mOffline CRUD Operations[2m > [22m[2mOffline Item Operations[2m > [22m[2mshould delete item offline
[22m[39m[ItemService] Saved item to IndexedDB
[CacheManager] Invalidated cache for items:all
[CacheManager] Invalidated related cache: quotes:all

[90mstdout[2m | src/lib/__tests__/offline-crud.test.ts[2m > [22m[2mOffline CRUD Operations[2m > [22m[2mOffline Item Operations[2m > [22m[2mshould delete item offline
[22m[39m[IndexedDB] Deleted record from items: item-1

[90mstdout[2m | src/lib/__tests__/offline-crud.test.ts[2m > [22m[2mOffline CRUD Operations[2m > [22m[2mOffline Item Operations[2m > [22m[2mshould delete item offline
[22m[39m[ItemService] Deleted item from IndexedDB
[CacheManager] Invalidated cache for items:all
[CacheManager] Invalidated related cache: quotes:all

[90mstdout[2m | src/lib/__tests__/offline-crud.test.ts[2m > [22m[2mOffline CRUD Operations[2m > [22m[2mOffline Item Operations[2m > [22m[2mshould delete item offline
[22m[39m[Dedup] Starting new request for fetch-items-user-1
[CacheManager] Cache miss for items:all

[90mstdout[2m | src/lib/__tests__/offline-crud.test.ts[2m > [22m[2mOffline CRUD Operations[2m > [22m[2mOffline Item Operations[2m > [22m[2mshould delete item offline
[22m[39m[Dedup] Cleanup for fetch-items-user-1: success

[90mstdout[2m | src/lib/__tests__/offline-crud.test.ts[2m > [22m[2mOffline CRUD Operations[2m > [22m[2mOffline Item Operations[2m > [22m[2mshould delete item offline
[22m[39m[IndexedDB] Cleared all user data from customers

[90mstdout[2m | src/lib/__tests__/offline-crud.test.ts[2m > [22m[2mOffline CRUD Operations[2m > [22m[2mOffline Item Operations[2m > [22m[2mshould delete item offline
[22m[39m[IndexedDB] Cleared all user data from items

[90mstdout[2m | src/lib/__tests__/offline-crud.test.ts[2m > [22m[2mOffline CRUD Operations[2m > [22m[2mOffline Item Operations[2m > [22m[2mshould delete item offline
[22m[39m[IndexedDB] Cleared all user data from quotes

[90mstdout[2m | src/lib/__tests__/offline-crud.test.ts[2m > [22m[2mOffline CRUD Operations[2m > [22m[2mOffline Quote Operations[2m > [22m[2mshould create quote offline
[22m[39m[IndexedDB] Cleared all user data from customers

[90mstdout[2m | src/lib/__tests__/offline-crud.test.ts[2m > [22m[2mOffline CRUD Operations[2m > [22m[2mOffline Quote Operations[2m > [22m[2mshould create quote offline
[22m[39m[IndexedDB] Cleared all user data from items

[90mstdout[2m | src/lib/__tests__/offline-crud.test.ts[2m > [22m[2mOffline CRUD Operations[2m > [22m[2mOffline Quote Operations[2m > [22m[2mshould create quote offline
[22m[39m[IndexedDB] Cleared all user data from quotes

[90mstdout[2m | src/lib/__tests__/offline-crud.test.ts[2m > [22m[2mOffline CRUD Operations[2m > [22m[2mOffline Quote Operations[2m > [22m[2mshould create quote offline
[22m[39m[IndexedDB] Added record to quotes: quote-1

[90mstdout[2m | src/lib/__tests__/offline-crud.test.ts[2m > [22m[2mOffline CRUD Operations[2m > [22m[2mOffline Quote Operations[2m > [22m[2mshould create quote offline
[22m[39m[QuoteService] Saved quote to IndexedDB
[CacheManager] Invalidated cache for quotes:all

[90mstdout[2m | src/lib/__tests__/offline-crud.test.ts[2m > [22m[2mOffline CRUD Operations[2m > [22m[2mOffline Quote Operations[2m > [22m[2mshould create quote offline
[22m[39m[IndexedDB] Cleared all user data from customers

[90mstdout[2m | src/lib/__tests__/offline-crud.test.ts[2m > [22m[2mOffline CRUD Operations[2m > [22m[2mOffline Quote Operations[2m > [22m[2mshould create quote offline
[22m[39m[IndexedDB] Cleared all user data from items

[90mstdout[2m | src/lib/__tests__/offline-crud.test.ts[2m > [22m[2mOffline CRUD Operations[2m > [22m[2mOffline Quote Operations[2m > [22m[2mshould create quote offline
[22m[39m[IndexedDB] Cleared all user data from quotes

[90mstdout[2m | src/lib/__tests__/offline-crud.test.ts[2m > [22m[2mOffline CRUD Operations[2m > [22m[2mOffline Quote Operations[2m > [22m[2mshould read quote offline
[22m[39m[IndexedDB] Cleared all user data from customers

[90mstdout[2m | src/lib/__tests__/offline-crud.test.ts[2m > [22m[2mOffline CRUD Operations[2m > [22m[2mOffline Quote Operations[2m > [22m[2mshould read quote offline
[22m[39m[IndexedDB] Cleared all user data from items

[90mstdout[2m | src/lib/__tests__/offline-crud.test.ts[2m > [22m[2mOffline CRUD Operations[2m > [22m[2mOffline Quote Operations[2m > [22m[2mshould read quote offline
[22m[39m[IndexedDB] Cleared all user data from quotes

[90mstdout[2m | src/lib/__tests__/offline-crud.test.ts[2m > [22m[2mOffline CRUD Operations[2m > [22m[2mOffline Quote Operations[2m > [22m[2mshould read quote offline
[22m[39m[IndexedDB] Added record to quotes: quote-1

[90mstdout[2m | src/lib/__tests__/offline-crud.test.ts[2m > [22m[2mOffline CRUD Operations[2m > [22m[2mOffline Quote Operations[2m > [22m[2mshould read quote offline
[22m[39m[QuoteService] Saved quote to IndexedDB
[CacheManager] Invalidated cache for quotes:all

[90mstdout[2m | src/lib/__tests__/offline-crud.test.ts[2m > [22m[2mOffline CRUD Operations[2m > [22m[2mOffline Quote Operations[2m > [22m[2mshould read quote offline
[22m[39m[Dedup] Starting new request for fetch-quotes-user-1
[CacheManager] Cache miss for quotes:all

[90mstdout[2m | src/lib/__tests__/offline-crud.test.ts[2m > [22m[2mOffline CRUD Operations[2m > [22m[2mOffline Quote Operations[2m > [22m[2mshould read quote offline
[22m[39m[QuoteService] Retrieved 1 quotes from IndexedDB
[CacheManager] Cached quotes:all

[90mstdout[2m | src/lib/__tests__/offline-crud.test.ts[2m > [22m[2mOffline CRUD Operations[2m > [22m[2mOffline Quote Operations[2m > [22m[2mshould read quote offline
[22m[39m[Dedup] Cleanup for fetch-quotes-user-1: success

[90mstdout[2m | src/lib/__tests__/offline-crud.test.ts[2m > [22m[2mOffline CRUD Operations[2m > [22m[2mOffline Quote Operations[2m > [22m[2mshould read quote offline
[22m[39m[IndexedDB] Cleared all user data from customers

[90mstdout[2m | src/lib/__tests__/offline-crud.test.ts[2m > [22m[2mOffline CRUD Operations[2m > [22m[2mOffline Quote Operations[2m > [22m[2mshould read quote offline
[22m[39m[IndexedDB] Cleared all user data from items

[90mstdout[2m | src/lib/__tests__/offline-crud.test.ts[2m > [22m[2mOffline CRUD Operations[2m > [22m[2mOffline Quote Operations[2m > [22m[2mshould read quote offline
[22m[39m[IndexedDB] Cleared all user data from quotes

[90mstdout[2m | src/lib/__tests__/offline-crud.test.ts[2m > [22m[2mOffline CRUD Operations[2m > [22m[2mOffline Quote Operations[2m > [22m[2mshould update quote offline
[22m[39m[IndexedDB] Cleared all user data from customers

[90mstdout[2m | src/lib/__tests__/offline-crud.test.ts[2m > [22m[2mOffline CRUD Operations[2m > [22m[2mOffline Quote Operations[2m > [22m[2mshould update quote offline
[22m[39m[IndexedDB] Cleared all user data from items

[90mstdout[2m | src/lib/__tests__/offline-crud.test.ts[2m > [22m[2mOffline CRUD Operations[2m > [22m[2mOffline Quote Operations[2m > [22m[2mshould update quote offline
[22m[39m[IndexedDB] Cleared all user data from quotes

[90mstdout[2m | src/lib/__tests__/offline-crud.test.ts[2m > [22m[2mOffline CRUD Operations[2m > [22m[2mOffline Quote Operations[2m > [22m[2mshould update quote offline
[22m[39m[IndexedDB] Added record to quotes: quote-1

[90mstdout[2m | src/lib/__tests__/offline-crud.test.ts[2m > [22m[2mOffline CRUD Operations[2m > [22m[2mOffline Quote Operations[2m > [22m[2mshould update quote offline
[22m[39m[QuoteService] Saved quote to IndexedDB
[CacheManager] Invalidated cache for quotes:all

[90mstdout[2m | src/lib/__tests__/offline-crud.test.ts[2m > [22m[2mOffline CRUD Operations[2m > [22m[2mOffline Quote Operations[2m > [22m[2mshould update quote offline
[22m[39m[IndexedDB] Updated record in quotes: quote-1

[90mstdout[2m | src/lib/__tests__/offline-crud.test.ts[2m > [22m[2mOffline CRUD Operations[2m > [22m[2mOffline Quote Operations[2m > [22m[2mshould update quote offline
[22m[39m[QuoteService] Updated quote in IndexedDB
[CacheManager] Invalidated cache for quotes:all

[90mstdout[2m | src/lib/__tests__/offline-crud.test.ts[2m > [22m[2mOffline CRUD Operations[2m > [22m[2mOffline Quote Operations[2m > [22m[2mshould update quote offline
[22m[39m[IndexedDB] Cleared all user data from customers

[90mstdout[2m | src/lib/__tests__/offline-crud.test.ts[2m > [22m[2mOffline CRUD Operations[2m > [22m[2mOffline Quote Operations[2m > [22m[2mshould update quote offline
[22m[39m[IndexedDB] Cleared all user data from items

[90mstdout[2m | src/lib/__tests__/offline-crud.test.ts[2m > [22m[2mOffline CRUD Operations[2m > [22m[2mOffline Quote Operations[2m > [22m[2mshould update quote offline
[22m[39m[IndexedDB] Cleared all user data from quotes

[90mstdout[2m | src/lib/__tests__/offline-crud.test.ts[2m > [22m[2mOffline CRUD Operations[2m > [22m[2mOffline Quote Operations[2m > [22m[2mshould delete quote offline
[22m[39m[IndexedDB] Cleared all user data from customers

[90mstdout[2m | src/lib/__tests__/offline-crud.test.ts[2m > [22m[2mOffline CRUD Operations[2m > [22m[2mOffline Quote Operations[2m > [22m[2mshould delete quote offline
[22m[39m[IndexedDB] Cleared all user data from items

[90mstdout[2m | src/lib/__tests__/offline-crud.test.ts[2m > [22m[2mOffline CRUD Operations[2m > [22m[2mOffline Quote Operations[2m > [22m[2mshould delete quote offline
[22m[39m[IndexedDB] Cleared all user data from quotes

[90mstdout[2m | src/lib/__tests__/offline-crud.test.ts[2m > [22m[2mOffline CRUD Operations[2m > [22m[2mOffline Quote Operations[2m > [22m[2mshould delete quote offline
[22m[39m[IndexedDB] Added record to quotes: quote-1

[90mstdout[2m | src/lib/__tests__/offline-crud.test.ts[2m > [22m[2mOffline CRUD Operations[2m > [22m[2mOffline Quote Operations[2m > [22m[2mshould delete quote offline
[22m[39m[QuoteService] Saved quote to IndexedDB
[CacheManager] Invalidated cache for quotes:all

[90mstdout[2m | src/lib/__tests__/offline-crud.test.ts[2m > [22m[2mOffline CRUD Operations[2m > [22m[2mOffline Quote Operations[2m > [22m[2mshould delete quote offline
[22m[39m[IndexedDB] Deleted record from quotes: quote-1

[90mstdout[2m | src/lib/__tests__/offline-crud.test.ts[2m > [22m[2mOffline CRUD Operations[2m > [22m[2mOffline Quote Operations[2m > [22m[2mshould delete quote offline
[22m[39m[QuoteService] Deleted quote from IndexedDB
[CacheManager] Invalidated cache for quotes:all

[90mstdout[2m | src/lib/__tests__/offline-crud.test.ts[2m > [22m[2mOffline CRUD Operations[2m > [22m[2mOffline Quote Operations[2m > [22m[2mshould delete quote offline
[22m[39m[Dedup] Starting new request for fetch-quotes-user-1
[CacheManager] Cache miss for quotes:all

[90mstdout[2m | src/lib/__tests__/offline-crud.test.ts[2m > [22m[2mOffline CRUD Operations[2m > [22m[2mOffline Quote Operations[2m > [22m[2mshould delete quote offline
[22m[39m[Dedup] Cleanup for fetch-quotes-user-1: success

[90mstdout[2m | src/lib/__tests__/offline-crud.test.ts[2m > [22m[2mOffline CRUD Operations[2m > [22m[2mOffline Quote Operations[2m > [22m[2mshould delete quote offline
[22m[39m[IndexedDB] Cleared all user data from customers

[90mstdout[2m | src/lib/__tests__/offline-crud.test.ts[2m > [22m[2mOffline CRUD Operations[2m > [22m[2mOffline Quote Operations[2m > [22m[2mshould delete quote offline
[22m[39m[IndexedDB] Cleared all user data from items

[90mstdout[2m | src/lib/__tests__/offline-crud.test.ts[2m > [22m[2mOffline CRUD Operations[2m > [22m[2mOffline Quote Operations[2m > [22m[2mshould delete quote offline
[22m[39m[IndexedDB] Cleared all user data from quotes

[90mstdout[2m | src/lib/__tests__/offline-crud.test.ts[2m > [22m[2mOffline CRUD Operations[2m > [22m[2mUI Instant Updates[2m > [22m[2mshould provide instant feedback for offline operations
[22m[39m[IndexedDB] Cleared all user data from customers

[90mstdout[2m | src/lib/__tests__/offline-crud.test.ts[2m > [22m[2mOffline CRUD Operations[2m > [22m[2mUI Instant Updates[2m > [22m[2mshould provide instant feedback for offline operations
[22m[39m[IndexedDB] Cleared all user data from items

[90mstdout[2m | src/lib/__tests__/offline-crud.test.ts[2m > [22m[2mOffline CRUD Operations[2m > [22m[2mUI Instant Updates[2m > [22m[2mshould provide instant feedback for offline operations
[22m[39m[IndexedDB] Cleared all user data from quotes

[90mstdout[2m | src/lib/__tests__/offline-crud.test.ts[2m > [22m[2mOffline CRUD Operations[2m > [22m[2mUI Instant Updates[2m > [22m[2mshould provide instant feedback for offline operations
[22m[39m[IndexedDB] Added record to customers: cust-1

[90mstdout[2m | src/lib/__tests__/offline-crud.test.ts[2m > [22m[2mOffline CRUD Operations[2m > [22m[2mUI Instant Updates[2m > [22m[2mshould provide instant feedback for offline operations
[22m[39m[CustomerService] Saved customer to IndexedDB
[CacheManager] Invalidated cache for customers:all
[CacheManager] Invalidated related cache: quotes:all

[90mstdout[2m | src/lib/__tests__/offline-crud.test.ts[2m > [22m[2mOffline CRUD Operations[2m > [22m[2mUI Instant Updates[2m > [22m[2mshould provide instant feedback for offline operations
[22m[39m[IndexedDB] Cleared all user data from customers

[90mstdout[2m | src/lib/__tests__/offline-crud.test.ts[2m > [22m[2mOffline CRUD Operations[2m > [22m[2mUI Instant Updates[2m > [22m[2mshould provide instant feedback for offline operations
[22m[39m[IndexedDB] Cleared all user data from items

[90mstdout[2m | src/lib/__tests__/offline-crud.test.ts[2m > [22m[2mOffline CRUD Operations[2m > [22m[2mUI Instant Updates[2m > [22m[2mshould provide instant feedback for offline operations
[22m[39m[IndexedDB] Cleared all user data from quotes

 [32m‚úì[39m src/lib/__tests__/offline-crud.test.ts [2m([22m[2m13 tests[22m[2m)[22m[32m 178[2mms[22m[39m
[90mstdout[2m | src/hooks/__tests__/useDynamicFavicon.test.tsx
[22m[39m[Test Setup] IndexedDB polyfill status: { indexedDB: [32m'object'[39m, IDBKeyRange: [32m'function'[39m }
[Test Setup] Cache Storage API polyfill status: { caches: [32m'object'[39m, navigator_storage: [32m'object'[39m }

 [32m‚úì[39m src/hooks/__tests__/useDynamicFavicon.test.tsx [2m([22m[2m5 tests[22m[2m)[22m[32m 25[2mms[22m[39m
[90mstdout[2m | src/lib/__tests__/indexed-db-migration.test.ts
[22m[39m[Test Setup] IndexedDB polyfill status: { indexedDB: [32m'object'[39m, IDBKeyRange: [32m'function'[39m }
[Test Setup] Cache Storage API polyfill status: { caches: [32m'object'[39m, navigator_storage: [32m'object'[39m }

[90mstdout[2m | src/lib/__tests__/indexed-db-migration.test.ts[2m > [22m[2mIndexedDB Migration[2m > [22m[2mBrowser Support Check[2m > [22m[2mshould check if IndexedDB is supported
[22m[39m[IndexedDB] Database deleted successfully

[90mstdout[2m | src/lib/__tests__/indexed-db-migration.test.ts[2m > [22m[2mIndexedDB Migration[2m > [22m[2mBrowser Support Check[2m > [22m[2mshould check if IndexedDB is supported
[22m[39m[IndexedDB] Database deleted successfully

[90mstdout[2m | src/lib/__tests__/indexed-db-migration.test.ts[2m > [22m[2mIndexedDB Migration[2m > [22m[2mMigration Status[2m > [22m[2mshould return true for needsMigration when data exists and DB is empty
[22m[39m[IndexedDB] Database deleted successfully

[90mstdout[2m | src/lib/__tests__/indexed-db-migration.test.ts[2m > [22m[2mIndexedDB Migration[2m > [22m[2mMigration Status[2m > [22m[2mshould return true for needsMigration when data exists and DB is empty
[22m[39m[IndexedDB] Upgrading database schema to version [33m1[39m
[IndexedDB] Created customers store
[IndexedDB] Created items store
[IndexedDB] Created quotes store
[IndexedDB] Created company_settings store
[IndexedDB] Created sync_queue store

[90mstdout[2m | src/lib/__tests__/indexed-db-migration.test.ts[2m > [22m[2mIndexedDB Migration[2m > [22m[2mMigration Status[2m > [22m[2mshould return true for needsMigration when data exists and DB is empty
[22m[39m[IndexedDB] Database opened successfully

[90mstdout[2m | src/lib/__tests__/indexed-db-migration.test.ts[2m > [22m[2mIndexedDB Migration[2m > [22m[2mMigration Status[2m > [22m[2mshould return true for needsMigration when data exists and DB is empty
[22m[39m[IndexedDB] Database connection closed

[90mstdout[2m | src/lib/__tests__/indexed-db-migration.test.ts[2m > [22m[2mIndexedDB Migration[2m > [22m[2mMigration Status[2m > [22m[2mshould return true for needsMigration when data exists and DB is empty
[22m[39m[IndexedDB] Database deleted successfully

[90mstdout[2m | src/lib/__tests__/indexed-db-migration.test.ts[2m > [22m[2mIndexedDB Migration[2m > [22m[2mMigration Status[2m > [22m[2mshould return false for needsMigration when no data exists
[22m[39m[IndexedDB] Database deleted successfully

[90mstdout[2m | src/lib/__tests__/indexed-db-migration.test.ts[2m > [22m[2mIndexedDB Migration[2m > [22m[2mMigration Status[2m > [22m[2mshould return false for needsMigration when no data exists
[22m[39m[IndexedDB] Database deleted successfully

[90mstdout[2m | src/lib/__tests__/indexed-db-migration.test.ts[2m > [22m[2mIndexedDB Migration[2m > [22m[2mMigration Process[2m > [22m[2mshould migrate all data successfully
[22m[39m[IndexedDB] Database deleted successfully

[90mstdout[2m | src/lib/__tests__/indexed-db-migration.test.ts[2m > [22m[2mIndexedDB Migration[2m > [22m[2mMigration Process[2m > [22m[2mshould migrate all data successfully
[22m[39m[Migration] ========== STARTING INDEXEDDB MIGRATION ==========

[90mstdout[2m | src/lib/__tests__/indexed-db-migration.test.ts[2m > [22m[2mIndexedDB Migration[2m > [22m[2mMigration Process[2m > [22m[2mshould migrate all data successfully
[22m[39m[IndexedDB] Upgrading database schema to version [33m1[39m
[IndexedDB] Created customers store
[IndexedDB] Created items store
[IndexedDB] Created quotes store
[IndexedDB] Created company_settings store
[IndexedDB] Created sync_queue store

[90mstdout[2m | src/lib/__tests__/indexed-db-migration.test.ts[2m > [22m[2mIndexedDB Migration[2m > [22m[2mMigration Process[2m > [22m[2mshould migrate all data successfully
[22m[39m[IndexedDB] Database opened successfully

[90mstdout[2m | src/lib/__tests__/indexed-db-migration.test.ts[2m > [22m[2mIndexedDB Migration[2m > [22m[2mMigration Process[2m > [22m[2mshould migrate all data successfully
[22m[39m[IndexedDB] Added record to customers: customer-1

[90mstdout[2m | src/lib/__tests__/indexed-db-migration.test.ts[2m > [22m[2mIndexedDB Migration[2m > [22m[2mMigration Process[2m > [22m[2mshould migrate all data successfully
[22m[39m[IndexedDB] Added record to items: item-1

[90mstdout[2m | src/lib/__tests__/indexed-db-migration.test.ts[2m > [22m[2mIndexedDB Migration[2m > [22m[2mMigration Process[2m > [22m[2mshould migrate all data successfully
[22m[39m[IndexedDB] Updated record in company_settings: [90mundefined[39m

[90mstdout[2m | src/lib/__tests__/indexed-db-migration.test.ts[2m > [22m[2mIndexedDB Migration[2m > [22m[2mMigration Process[2m > [22m[2mshould migrate all data successfully
[22m[39m[Migration] ========== MIGRATION COMPLETED SUCCESSFULLY ==========

[90mstdout[2m | src/lib/__tests__/indexed-db-migration.test.ts[2m > [22m[2mIndexedDB Migration[2m > [22m[2mMigration Process[2m > [22m[2mshould migrate all data successfully
[22m[39m[IndexedDB] Database connection closed

[90mstdout[2m | src/lib/__tests__/indexed-db-migration.test.ts[2m > [22m[2mIndexedDB Migration[2m > [22m[2mMigration Process[2m > [22m[2mshould migrate all data successfully
[22m[39m[IndexedDB] Database deleted successfully

[90mstdout[2m | src/lib/__tests__/indexed-db-migration.test.ts[2m > [22m[2mIndexedDB Migration[2m > [22m[2mMigration Process[2m > [22m[2mshould create backup before migration
[22m[39m[IndexedDB] Database deleted successfully

[90mstdout[2m | src/lib/__tests__/indexed-db-migration.test.ts[2m > [22m[2mIndexedDB Migration[2m > [22m[2mMigration Process[2m > [22m[2mshould create backup before migration
[22m[39m[Migration] ========== STARTING INDEXEDDB MIGRATION ==========

[90mstdout[2m | src/lib/__tests__/indexed-db-migration.test.ts[2m > [22m[2mIndexedDB Migration[2m > [22m[2mMigration Process[2m > [22m[2mshould create backup before migration
[22m[39m[IndexedDB] Upgrading database schema to version [33m1[39m
[IndexedDB] Created customers store
[IndexedDB] Created items store
[IndexedDB] Created quotes store
[IndexedDB] Created company_settings store
[IndexedDB] Created sync_queue store

[90mstdout[2m | src/lib/__tests__/indexed-db-migration.test.ts[2m > [22m[2mIndexedDB Migration[2m > [22m[2mMigration Process[2m > [22m[2mshould create backup before migration
[22m[39m[IndexedDB] Database opened successfully

[90mstdout[2m | src/lib/__tests__/indexed-db-migration.test.ts[2m > [22m[2mIndexedDB Migration[2m > [22m[2mMigration Process[2m > [22m[2mshould create backup before migration
[22m[39m[IndexedDB] Added record to customers: customer-1

[90mstdout[2m | src/lib/__tests__/indexed-db-migration.test.ts[2m > [22m[2mIndexedDB Migration[2m > [22m[2mMigration Process[2m > [22m[2mshould create backup before migration
[22m[39m[IndexedDB] Added record to items: item-1

[90mstdout[2m | src/lib/__tests__/indexed-db-migration.test.ts[2m > [22m[2mIndexedDB Migration[2m > [22m[2mMigration Process[2m > [22m[2mshould create backup before migration
[22m[39m[IndexedDB] Updated record in company_settings: [90mundefined[39m

[90mstdout[2m | src/lib/__tests__/indexed-db-migration.test.ts[2m > [22m[2mIndexedDB Migration[2m > [22m[2mMigration Process[2m > [22m[2mshould create backup before migration
[22m[39m[Migration] ========== MIGRATION COMPLETED SUCCESSFULLY ==========

[90mstdout[2m | src/lib/__tests__/indexed-db-migration.test.ts[2m > [22m[2mIndexedDB Migration[2m > [22m[2mMigration Process[2m > [22m[2mshould create backup before migration
[22m[39m[IndexedDB] Database connection closed

[90mstdout[2m | src/lib/__tests__/indexed-db-migration.test.ts[2m > [22m[2mIndexedDB Migration[2m > [22m[2mMigration Process[2m > [22m[2mshould create backup before migration
[22m[39m[IndexedDB] Database deleted successfully

 [32m‚úì[39m src/lib/__tests__/indexed-db-migration.test.ts [2m([22m[2m5 tests[22m[2m)[22m[32m 17[2mms[22m[39m
[90mstdout[2m | src/lib/__tests__/cache-manager.test.ts
[22m[39m[Test Setup] IndexedDB polyfill status: { indexedDB: [32m'object'[39m, IDBKeyRange: [32m'function'[39m }
[Test Setup] Cache Storage API polyfill status: { caches: [32m'object'[39m, navigator_storage: [32m'object'[39m }

[90mstdout[2m | src/lib/__tests__/cache-manager.test.ts[2m > [22m[2mCache Utilities[2m > [22m[2mclearAllCaches[2m > [22m[2mshould clear all existing caches
[22m[39m[CacheUtils] Deleting cache: test-cache-1
[CacheUtils] Deleting cache: test-cache-2
[CacheUtils] Deleting cache: test-cache-3

[90mstdout[2m | src/lib/__tests__/cache-manager.test.ts[2m > [22m[2mCache Utilities[2m > [22m[2mclearAllCaches[2m > [22m[2mshould clear all existing caches
[22m[39m[CacheUtils] All caches cleared successfully

[90mstdout[2m | src/lib/__tests__/cache-manager.test.ts[2m > [22m[2mCache Utilities[2m > [22m[2mclearCache[2m > [22m[2mshould clear specific cache by name
[22m[39m[CacheUtils] Cache test-cache deleted

[90mstdout[2m | src/lib/__tests__/cache-manager.test.ts[2m > [22m[2mCache Utilities[2m > [22m[2mclearCache[2m > [22m[2mshould return false for non-existent cache
[22m[39m[CacheUtils] Cache non-existent-cache not found

[90mstdout[2m | src/lib/__tests__/cache-manager.test.ts[2m > [22m[2mCache Utilities[2m > [22m[2mclearOldCaches[2m > [22m[2mshould clear caches that don't match current version
[22m[39m[CacheUtils] Deleting old cache: quote-it-ai-static-v1.0
[CacheUtils] Deleting old cache: quote-it-ai-api-v1.0

[90mstdout[2m | src/lib/__tests__/cache-manager.test.ts[2m > [22m[2mCache Utilities[2m > [22m[2mclearOldCaches[2m > [22m[2mshould clear caches that don't match current version
[22m[39m[CacheUtils] Cleared 2 old caches

[90mstdout[2m | src/lib/__tests__/cache-manager.test.ts[2m > [22m[2mCache Utilities[2m > [22m[2mclearOldCaches[2m > [22m[2mshould not clear current version caches
[22m[39m[CacheUtils] Cleared 0 old caches

[90mstdout[2m | src/lib/__tests__/cache-manager.test.ts[2m > [22m[2mCache Utilities[2m > [22m[2mwarmUpCache[2m > [22m[2mshould cache specified URLs
[22m[39m[CacheUtils] Warmed up 3/3 URLs in test-cache

[90mstderr[2m | src/lib/__tests__/cache-manager.test.ts[2m > [22m[2mCache Utilities[2m > [22m[2mwarmUpCache[2m > [22m[2mshould handle failed fetches gracefully
[22m[39m[CacheUtils] Failed to cache https://test.example.com/test1: Error: Network error
    at [90m/app/[39msrc/lib/__tests__/cache-manager.test.ts:210:48
    at [90mfile:///app/[39mnode_modules/[4m@vitest/runner[24m/dist/index.js:157:11
    at [90mfile:///app/[39mnode_modules/[4m@vitest/runner[24m/dist/index.js:753:26
    at [90mfile:///app/[39mnode_modules/[4m@vitest/runner[24m/dist/index.js:1636:20
    at new Promise (<anonymous>)
    at runWithTimeout [90m(file:///app/[39mnode_modules/[4m@vitest/runner[24m/dist/index.js:1602:10[90m)[39m
    at runTest [90m(file:///app/[39mnode_modules/[4m@vitest/runner[24m/dist/index.js:1309:12[90m)[39m
[90m    at processTicksAndRejections (node:internal/process/task_queues:105:5)[39m
    at runSuite [90m(file:///app/[39mnode_modules/[4m@vitest/runner[24m/dist/index.js:1468:8[90m)[39m
    at runSuite [90m(file:///app/[39mnode_modules/[4m@vitest/runner[24m/dist/index.js:1468:8[90m)[39m
[CacheUtils] Failed to cache https://test.example.com/test2: Error: Network error
    at [90m/app/[39msrc/lib/__tests__/cache-manager.test.ts:210:48
    at [90mfile:///app/[39mnode_modules/[4m@vitest/runner[24m/dist/index.js:157:11
    at [90mfile:///app/[39mnode_modules/[4m@vitest/runner[24m/dist/index.js:753:26
    at [90mfile:///app/[39mnode_modules/[4m@vitest/runner[24m/dist/index.js:1636:20
    at new Promise (<anonymous>)
    at runWithTimeout [90m(file:///app/[39mnode_modules/[4m@vitest/runner[24m/dist/index.js:1602:10[90m)[39m
    at runTest [90m(file:///app/[39mnode_modules/[4m@vitest/runner[24m/dist/index.js:1309:12[90m)[39m
[90m    at processTicksAndRejections (node:internal/process/task_queues:105:5)[39m
    at runSuite [90m(file:///app/[39mnode_modules/[4m@vitest/runner[24m/dist/index.js:1468:8[90m)[39m
    at runSuite [90m(file:///app/[39mnode_modules/[4m@vitest/runner[24m/dist/index.js:1468:8[90m)[39m

[90mstdout[2m | src/lib/__tests__/cache-manager.test.ts[2m > [22m[2mCache Utilities[2m > [22m[2mwarmUpCache[2m > [22m[2mshould handle failed fetches gracefully
[22m[39m[CacheUtils] Warmed up 0/2 URLs in test-cache

[90mstderr[2m | src/lib/__tests__/cache-manager.test.ts[2m > [22m[2mCache Utilities[2m > [22m[2mexportCacheData[2m > [22m[2mshould export complete cache data
[22m[39m[CacheUtils] Error analyzing cache test-cache: TypeError: Body is unusable: Body has already been read
[90m    at consumeBody (node:internal/deps/undici/undici:5712:15)[39m
[90m    at _Response.blob (node:internal/deps/undici/undici:5646:18)[39m
    at [90m/app/[39msrc/lib/cache-utils.ts:79:43
[90m    at processTicksAndRejections (node:internal/process/task_queues:105:5)[39m
    at async Promise.all (index 0)
    at getCacheDetails [90m(/app/[39msrc/lib/cache-utils.ts:68:21[90m)[39m
    at async Promise.all (index 0)
    at getCacheStats [90m(/app/[39msrc/lib/cache-utils.ts:178:28[90m)[39m
    at async Promise.all (index 2)
    at exportCacheData [90m(/app/[39msrc/lib/cache-utils.ts:252:34[90m)[39m

 [32m‚úì[39m src/lib/__tests__/cache-manager.test.ts [2m([22m[2m15 tests[22m[2m)[22m[32m 22[2mms[22m[39m
[90mstdout[2m | src/lib/__tests__/db-service.test.ts
[22m[39m[Test Setup] IndexedDB polyfill status: { indexedDB: [32m'object'[39m, IDBKeyRange: [32m'function'[39m }
[Test Setup] Cache Storage API polyfill status: { caches: [32m'object'[39m, navigator_storage: [32m'object'[39m }

[90mstdout[2m | src/lib/__tests__/db-service.test.ts[2m > [22m[2mDatabase Service - Repository Pattern[2m > [22m[2mRepository Abstraction[2m > [22m[2mshould abstract direct Supabase access for customers
[22m[39m[Dedup] Starting new request for fetch-customers-user-1
[CacheManager] Cache miss for customers:all

[90mstdout[2m | src/lib/__tests__/db-service.test.ts[2m > [22m[2mDatabase Service - Repository Pattern[2m > [22m[2mRepository Abstraction[2m > [22m[2mshould abstract direct Supabase access for customers
[22m[39m[IndexedDB] Upgrading database schema to version [33m1[39m
[IndexedDB] Created customers store
[IndexedDB] Created items store
[IndexedDB] Created quotes store
[IndexedDB] Created company_settings store
[IndexedDB] Created sync_queue store

[90mstdout[2m | src/lib/__tests__/db-service.test.ts[2m > [22m[2mDatabase Service - Repository Pattern[2m > [22m[2mRepository Abstraction[2m > [22m[2mshould abstract direct Supabase access for customers
[22m[39m[IndexedDB] Database opened successfully

[90mstdout[2m | src/lib/__tests__/db-service.test.ts[2m > [22m[2mDatabase Service - Repository Pattern[2m > [22m[2mRepository Abstraction[2m > [22m[2mshould abstract direct Supabase access for customers
[22m[39m[CustomerService] IndexedDB check: found 0 customers
[CustomerService] Starting Supabase fetch for user user-1

[90mstdout[2m | src/lib/__tests__/db-service.test.ts[2m > [22m[2mDatabase Service - Repository Pattern[2m > [22m[2mRepository Abstraction[2m > [22m[2mshould abstract direct Supabase access for customers
[22m[39m[CustomerService] Supabase returned 0 customers
[CustomerService] Supabase empty - checking IndexedDB for local data

[90mstdout[2m | src/lib/__tests__/db-service.test.ts[2m > [22m[2mDatabase Service - Repository Pattern[2m > [22m[2mRepository Abstraction[2m > [22m[2mshould abstract direct Supabase access for customers
[22m[39m[CustomerService] IndexedDB has 0 customers
[CustomerService] Caching 0 customers from Supabase
[CacheManager] Cached customers:all

[90mstdout[2m | src/lib/__tests__/db-service.test.ts[2m > [22m[2mDatabase Service - Repository Pattern[2m > [22m[2mRepository Abstraction[2m > [22m[2mshould abstract direct Supabase access for customers
[22m[39m[CustomerService] RETURNING 0 customers from Supabase

[90mstdout[2m | src/lib/__tests__/db-service.test.ts[2m > [22m[2mDatabase Service - Repository Pattern[2m > [22m[2mRepository Abstraction[2m > [22m[2mshould abstract direct Supabase access for customers
[22m[39m[Dedup] Cleanup for fetch-customers-user-1: success

[90mstdout[2m | src/lib/__tests__/db-service.test.ts[2m > [22m[2mDatabase Service - Repository Pattern[2m > [22m[2mRepository Abstraction[2m > [22m[2mshould use local DB as single source of truth when offline
[22m[39m[IndexedDB] Added record to customers: cust-1

[90mstdout[2m | src/lib/__tests__/db-service.test.ts[2m > [22m[2mDatabase Service - Repository Pattern[2m > [22m[2mRepository Abstraction[2m > [22m[2mshould use local DB as single source of truth when offline
[22m[39m[CustomerService] Saved customer to IndexedDB
[CacheManager] Invalidated cache for customers:all
[CacheManager] Invalidated related cache: quotes:all

[90mstdout[2m | src/lib/__tests__/db-service.test.ts[2m > [22m[2mDatabase Service - Repository Pattern[2m > [22m[2mRepository Abstraction[2m > [22m[2mshould use local DB as single source of truth when offline
[22m[39m[Dedup] Starting new request for fetch-customers-user-1
[CacheManager] Cache miss for customers:all

[90mstdout[2m | src/lib/__tests__/db-service.test.ts[2m > [22m[2mDatabase Service - Repository Pattern[2m > [22m[2mRepository Abstraction[2m > [22m[2mshould use local DB as single source of truth when offline
[22m[39m[CustomerService] IndexedDB check: found 1 customers
[CustomerService] Retrieved 1 customers from IndexedDB
[CacheManager] Cached customers:all

[90mstdout[2m | src/lib/__tests__/db-service.test.ts[2m > [22m[2mDatabase Service - Repository Pattern[2m > [22m[2mRepository Abstraction[2m > [22m[2mshould use local DB as single source of truth when offline
[22m[39m[CustomerService] Cached 1 customers from IndexedDB
[CustomerService] Offline - returning 1 customers from IndexedDB

[90mstdout[2m | src/lib/__tests__/db-service.test.ts[2m > [22m[2mDatabase Service - Repository Pattern[2m > [22m[2mRepository Abstraction[2m > [22m[2mshould use local DB as single source of truth when offline
[22m[39m[Dedup] Cleanup for fetch-customers-user-1: success

 [32m‚úì[39m src/lib/__tests__/db-service.test.ts [2m([22m[2m4 tests[22m[2m)[22m[32m 16[2mms[22m[39m
[90mstdout[2m | src/lib/__tests__/local-db.test.ts
[22m[39m[Test Setup] IndexedDB polyfill status: { indexedDB: [32m'object'[39m, IDBKeyRange: [32m'function'[39m }
[Test Setup] Cache Storage API polyfill status: { caches: [32m'object'[39m, navigator_storage: [32m'object'[39m }

 [32m‚úì[39m src/lib/__tests__/local-db.test.ts [2m([22m[2m17 tests[22m[2m)[22m[32m 84[2mms[22m[39m
[90mstdout[2m | src/lib/__tests__/storage-cache.test.ts
[22m[39m[Test Setup] IndexedDB polyfill status: { indexedDB: [32m'object'[39m, IDBKeyRange: [32m'function'[39m }
[Test Setup] Cache Storage API polyfill status: { caches: [32m'object'[39m, navigator_storage: [32m'object'[39m }

[90mstderr[2m | src/lib/__tests__/storage-cache.test.ts[2m > [22m[2mStorageCache[2m > [22m[2mError Handling[2m > [22m[2mshould handle QuotaExceededError gracefully
[22m[39mlocalStorage quota exceeded. Attempting cleanup...
Failed to write even after cleanup. localStorage is critically full.

 [32m‚úì[39m src/lib/__tests__/storage-cache.test.ts [2m([22m[2m8 tests[22m[2m)[22m[32m 7[2mms[22m[39m
[90mstdout[2m | src/lib/__tests__/cache-integration.test.ts
[22m[39m[Test Setup] IndexedDB polyfill status: { indexedDB: [32m'object'[39m, IDBKeyRange: [32m'function'[39m }
[Test Setup] Cache Storage API polyfill status: { caches: [32m'object'[39m, navigator_storage: [32m'object'[39m }

[90mstdout[2m | src/lib/__tests__/cache-integration.test.ts[2m > [22m[2mCache System Integration[2m > [22m[2mCache Manager & Performance Monitor Integration[2m > [22m[2mshould track performance metrics when cache operations occur
[22m[39m[CacheManager] All caches cleared

[90mstdout[2m | src/lib/__tests__/cache-integration.test.ts[2m > [22m[2mCache System Integration[2m > [22m[2mCache Manager & Performance Monitor Integration[2m > [22m[2mshould track performance metrics when cache operations occur
[22m[39m[CacheManager] Cached test-key:all

[90mstdout[2m | src/lib/__tests__/cache-integration.test.ts[2m > [22m[2mCache System Integration[2m > [22m[2mCache Manager & Performance Monitor Integration[2m > [22m[2mshould track performance metrics when cache operations occur
[22m[39m[CacheManager] Memory cache hit for test-key:all

[90mstdout[2m | src/lib/__tests__/cache-integration.test.ts[2m > [22m[2mCache System Integration[2m > [22m[2mCache Manager & Performance Monitor Integration[2m > [22m[2mshould handle cache quotas correctly
[22m[39m[CacheManager] All caches cleared

[90mstdout[2m | src/lib/__tests__/cache-integration.test.ts[2m > [22m[2mCache System Integration[2m > [22m[2mRate Limiter & Cache Integration[2m > [22m[2mshould respect rate limits for cached API calls
[22m[39m[CacheManager] All caches cleared

[90mstdout[2m | src/lib/__tests__/cache-integration.test.ts[2m > [22m[2mCache System Integration[2m > [22m[2mPerformance Monitor Subscribers[2m > [22m[2mshould notify subscribers when metrics update
[22m[39m[CacheManager] All caches cleared

 [32m‚úì[39m src/lib/__tests__/cache-integration.test.ts [2m([22m[2m4 tests[22m[2m)[22m[32m 8[2mms[22m[39m
[90mstdout[2m | src/lib/__tests__/background-sync.test.ts
[22m[39m[Test Setup] IndexedDB polyfill status: { indexedDB: [32m'object'[39m, IDBKeyRange: [32m'function'[39m }
[Test Setup] Cache Storage API polyfill status: { caches: [32m'object'[39m, navigator_storage: [32m'object'[39m }

 [32m‚úì[39m src/lib/__tests__/background-sync.test.ts [2m([22m[2m6 tests[22m[2m)[22m[32m 5[2mms[22m[39m

[31m‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ[39m[1m[41m Failed Tests 7 [49m[22m[31m‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ[39m

[41m[1m FAIL [22m[49m src/pages/__tests__/FreeTier.test.tsx[2m > [22mFree Tier Features[2m > [22mshould block AI features and show upgrade prompt
[31m[1mTestingLibraryElementError[22m[39m: Unable to find an element with the text: /create quote/i. This could be because the text is broken up by multiple elements. In this case, you can provide a function for your text matcher to make your matcher more flexible.

Ignored nodes: comments, script, style
[36m<body>[39m
  [36m<div>[39m
    [36m<div[39m
      [33mclass[39m=[32m"w-full max-w-[1800px] mx-auto space-y-4 pb-20 md:pb-6 px-4 md:px-6"[39m
    [36m>[39m
      [36m<div[39m
        [33mclass[39m=[32m"flex flex-col gap-3 sm:flex-row sm:items-center sm:justify-between"[39m
      [36m>[39m
        [36m<div>[39m
          [36m<h2[39m
            [33mclass[39m=[32m"text-2xl sm:text-3xl font-bold tracking-tight"[39m
          [36m>[39m
            [0mCreate New Quote[0m
          [36m</h2>[39m
          [36m<p[39m
            [33mclass[39m=[32m"text-sm sm:text-base text-muted-foreground"[39m
          [36m>[39m
            [0mBuild a professional quote for your customer[0m
          [36m</p>[39m
        [36m</div>[39m
        [36m<div[39m
          [33mclass[39m=[32m"flex flex-col sm:flex-row gap-2 w-full sm:w-auto"[39m
        [36m>[39m
          [36m<button[39m
            [33mclass[39m=[32m"inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0 border border-input bg-background hover:bg-accent hover:text-accent-foreground h-10 px-4 py-2 w-full sm:w-auto"[39m
          [36m>[39m
            [0mCancel[0m
          [36m</button>[39m
          [36m<button[39m
            [33mclass[39m=[32m"inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0 bg-secondary text-secondary-foreground hover:bg-secondary/80 h-10 px-4 py-2 w-full sm:w-auto"[39m
          [36m>[39m
            [0mSave Draft[0m
          [36m</button>[39m
          [36m<button[39m
            [33mclass[39m=[32m"inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0 bg-primary text-primary-foreground hover:bg-primary/90 h-10 px-4 py-2 w-full sm:w-auto"[39m
          [36m>[39m
            [0mSend Quote[0m
          [36m</button>[39m
        [36m</div>[39m
      [36m</div>[39m
      [36m<div[39m
        [33mclass[39m=[32m"grid gap-4 lg:gap-6 lg:grid-cols-[1fr_380px]"[39m
      [36m>[39m
        [36m<div[39m
          [33mclass[39m=[32m"space-y-6 min-w-0"[39m
        [36m>[39m
          [36m<div[39m
            [33mclass[39m=[32m"rounded-lg border bg-card text-card-foreground shadow-sm"[39m
          [36m>[39m
            [36m<div[39m
              [33mclass[39m=[32m"flex flex-col space-y-1.5 p-6"[39m
            [36m>[39m
              [36m<h3[39m
                [33mclass[39m=[32m"text-2xl font-semibold leading-none tracking-tight flex items-center gap-2"[39m
              [36m>[39m
                [36m<svg[39m
                  [33mclass[39m=[32m"lucide lucide-user h-5 w-5"[39m
                  [33mfill[39m=[32m"none"[39m
                  [33mheight[39m=[32m"24"[39m
                  [33mstroke[39m=[32m"currentColor"[39m
                  [33mstroke-linecap[39m=[32m"round"[39m
                  [33mstroke-linejoin[39m=[32m"round"[39m
                  [33mstroke-width[39m=[32m"2"[39m
                  [33mviewBox[39m=[32m"0 0 24 24"[39m
                  [33mwidth[39m=[32m"24"[39m
                  [33mxmlns[39m=[32m"http://www.w3.org/2000/svg"[39m
                [36m>[39m
                  [36m<path[39m
                    [33md[39m=[32m"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2"[39m
                  [36m/>[39m
                  [36m<circle[39m
                    [33mcx[39m=[32m"12"[39m
                    [33mcy[39m=[32m"7"[39m
                    [33mr[39m=[32m"4"[39m
                  [36m/>[39m
                [36m</svg>[39m
                [0mQuote Details[0m
              [36m</h3>[39m
            [36m</div>[39m
            [36m<div[39m
              [33mclass[39m=[32m"p-6 pt-0 space-y-4"[39m
            [36m>[39m
              [36m<div[39m
                [33mclass[39m=[32m"space-y-2"[39m
              [36m>[39m
                [36m<label[39m
                  [33mclass[39m=[32m"text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"[39m
                  [33mfor[39m=[32m"customer"[39m
                [36m>[39m
                  [0mSelect Customer *[0m
                [36m</label>[39m
                [36m<button[39m
                  [33maria-autocomplete[39m=[32m"none"[39m
                  [33maria-controls[39m=[32m"radix-:r0:"[39m
                  [33maria-expanded[39m=[32m"false"[39m
                  [33mclass[39m=[32m"flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1"[39m
                  [33mdata-placeholder[39m=[32m""[39m
                  [33mdata-state[39m=[32m"closed"[39m
                  [33mdir[39m=[32m"ltr"[39m
                  [33mrole[39m=[32m"combobox"[39m
                  [33mtype[39m=[32m"button"[39m
                [36m>[39m
                  [36m<span[39m
                    [33mstyle[39m=[32m"pointer-events: none;"[39m
                  [36m>[39m
                    [0mChoose a customer...[0m
                  [36m</span>[39m
                  [36m<svg[39m
                    [33maria-hidden[39m=[32m"true"[39m
                    [33mclass[39m=[32m"lucide lucide-chevron-down h-4 w-4 opacity-50"[39m
                    [33mfill[39m=[32m"none"[39m
                    [33mheight[39m=[32m"24"[39m
                    [33mstroke[39m=[32m"currentColor"[39m
                    [33mstroke-linecap[39m=[32m"round"[39m
                    [33mstroke-linejoin[39m=[32m"round"[39m
                    [33mstroke-width[39m=[32m"2"[39m
                    [33mviewBox[39m=[32m"0 0 24 24"[39m
                    [33mwidth[39m=[32m"24"[39m
                    [33mxmlns[39m=[32m"http://www.w3.org/2000/svg"[39m
                  [36m>[39m
                    [36m<path[39m
                      [33md[39m=[32m"m6 9 6...

Ignored nodes: comments, script, style
[36m<html[39m
  [33mclass[39m=[32m"light"[39m
[36m>[39m
  [36m<head />[39m
  [36m<body>[39m
    [36m<div>[39m
      [36m<div[39m
        [33mclass[39m=[32m"w-full max-w-[1800px] mx-auto space-y-4 pb-20 md:pb-6 px-4 md:px-6"[39m
      [36m>[39m
        [36m<div[39m
          [33mclass[39m=[32m"flex flex-col gap-3 sm:flex-row sm:items-center sm:justify-between"[39m
        [36m>[39m
          [36m<div>[39m
            [36m<h2[39m
              [33mclass[39m=[32m"text-2xl sm:text-3xl font-bold tracking-tight"[39m
            [36m>[39m
              [0mCreate New Quote[0m
            [36m</h2>[39m
            [36m<p[39m
              [33mclass[39m=[32m"text-sm sm:text-base text-muted-foreground"[39m
            [36m>[39m
              [0mBuild a professional quote for your customer[0m
            [36m</p>[39m
          [36m</div>[39m
          [36m<div[39m
            [33mclass[39m=[32m"flex flex-col sm:flex-row gap-2 w-full sm:w-auto"[39m
          [36m>[39m
            [36m<button[39m
              [33mclass[39m=[32m"inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0 border border-input bg-background hover:bg-accent hover:text-accent-foreground h-10 px-4 py-2 w-full sm:w-auto"[39m
            [36m>[39m
              [0mCancel[0m
            [36m</button>[39m
            [36m<button[39m
              [33mclass[39m=[32m"inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0 bg-secondary text-secondary-foreground hover:bg-secondary/80 h-10 px-4 py-2 w-full sm:w-auto"[39m
            [36m>[39m
              [0mSave Draft[0m
            [36m</button>[39m
            [36m<button[39m
              [33mclass[39m=[32m"inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0 bg-primary text-primary-foreground hover:bg-primary/90 h-10 px-4 py-2 w-full sm:w-auto"[39m
            [36m>[39m
              [0mSend Quote[0m
            [36m</button>[39m
          [36m</div>[39m
        [36m</div>[39m
        [36m<div[39m
          [33mclass[39m=[32m"grid gap-4 lg:gap-6 lg:grid-cols-[1fr_380px]"[39m
        [36m>[39m
          [36m<div[39m
            [33mclass[39m=[32m"space-y-6 min-w-0"[39m
          [36m>[39m
            [36m<div[39m
              [33mclass[39m=[32m"rounded-lg border bg-card text-card-foreground shadow-sm"[39m
            [36m>[39m
              [36m<div[39m
                [33mclass[39m=[32m"flex flex-col space-y-1.5 p-6"[39m
              [36m>[39m
                [36m<h3[39m
                  [33mclass[39m=[32m"text-2xl font-semibold leading-none tracking-tight flex items-center gap-2"[39m
                [36m>[39m
                  [36m<svg[39m
                    [33mclass[39m=[32m"lucide lucide-user h-5 w-5"[39m
                    [33mfill[39m=[32m"none"[39m
                    [33mheight[39m=[32m"24"[39m
                    [33mstroke[39m=[32m"currentColor"[39m
                    [33mstroke-linecap[39m=[32m"round"[39m
                    [33mstroke-linejoin[39m=[32m"round"[39m
                    [33mstroke-width[39m=[32m"2"[39m
                    [33mviewBox[39m=[32m"0 0 24 24"[39m
                    [33mwidth[39m=[32m"24"[39m
                    [33mxmlns[39m=[32m"http://www.w3.org/2000/svg"[39m
                  [36m>[39m
                    [36m<path[39m
                      [33md[39m=[32m"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2"[39m
                    [36m/>[39m
                    [36m<circle[39m
                      [33mcx[39m=[32m"12"[39m
                      [33mcy[39m=[32m"7"[39m
                      [33mr[39m=[32m"4"[39m
                    [36m/>[39m
                  [36m</svg>[39m
                  [0mQuote Details[0m
                [36m</h3>[39m
              [36m</div>[39m
              [36m<div[39m
                [33mclass[39m=[32m"p-6 pt-0 space-y-4"[39m
              [36m>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"space-y-2"[39m
                [36m>[39m
                  [36m<label[39m
                    [33mclass[39m=[32m"text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"[39m
                    [33mfor[39m=[32m"customer"[39m
                  [36m>[39m
                    [0mSelect Customer *[0m
                  [36m</label>[39m
                  [36m<button[39m
                    [33maria-autocomplete[39m=[32m"none"[39m
                    [33maria-controls[39m=[32m"radix-:r0:"[39m
                    [33maria-expanded[39m=[32m"false"[39m
                    [33mclass[39m=[32m"flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1"[39m
                    [33mdata-placeholder[39m=[32m""[39m
                    [33mdata-state[39m=[32m"closed"[39m
                    [33mdir[39m=[32m"ltr"[39m
                    [33mrole[39m=[32m"combobox"[39m
                    [33mtype[39m=[32m"button"[39m
                  [36m>[39m
                    [36m<span[39m
                      [33mstyle[39m=[32m"pointer-events: none;"[39m
                    [36m>[39m
                      [0mChoose a customer...[0m
                    [36m</span>[39m
                    [36m<svg[39m
                      [33maria-hidden[39m=[32m"true"[39m
                      [33mclass[39m=[32m"lucide lucide-chevron-down h-4 w-4 opacity-50"[39m
                      [33mfill[39m=[32m"none"[39m
                      [33mheight[39m=[32m"24"[39m
                      [33mstroke[39m=[32m"currentColor"[39m
                      [33mstroke-linecap[39m=[32m"round"[39m
                      [33mstroke-linejoin[39m=[32m"round"[39m
                      [33mstroke-width...
[90m [2m‚ùØ[22m Proxy.waitFor node_modules/@testing-library/dom/dist/wait-for.js:[2m163:27[22m[39m
[36m [2m‚ùØ[22m src/pages/__tests__/FreeTier.test.tsx:[2m72:11[22m[39m
    [90m 70| [39m    [34mrender[39m([33m<[39m[33mNewQuote[39m [33m/[39m[33m>[39m[33m,[39m { wrapper })[33m;[39m
    [90m 71| [39m
    [90m 72| [39m    [35mawait[39m [34mwaitFor[39m(() [33m=>[39m {
    [90m   | [39m          [31m^[39m
    [90m 73| [39m      [90m// Free tier should see basic quote creation[39m
    [90m 74| [39m      [34mexpect[39m(screen[33m.[39m[34mgetByText[39m([36m/create quote/i[39m))[33m.[39m[34mtoBeInTheDocument[39m()[33m;[39m

[31m[2m‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ[1/7]‚éØ[22m[39m

[41m[1m FAIL [22m[49m src/pages/__tests__/ProTier.test.tsx[2m > [22mPro Tier Features[2m > [22mshould block white-label branding
[31m[1mTestingLibraryElementError[22m[39m: Found multiple elements with the text: /max ai/i

Here are the matching elements:

Ignored nodes: comments, script, style
[36m<div[39m
  [33mclass[39m=[32m"text-sm [&_p]:leading-relaxed"[39m
[36m>[39m
  [0mWhite-label branding is available exclusively for Max AI tier subscribers.[0m
  [36m<button[39m
    [33mclass[39m=[32m"inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0 text-primary underline-offset-4 hover:underline p-0 h-auto ml-1"[39m
  [36m>[39m
    [0mUpgrade to Max AI[0m
  [36m</button>[39m
[36m</div>[39m

Ignored nodes: comments, script, style
[36m<button[39m
  [33mclass[39m=[32m"inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0 text-primary underline-offset-4 hover:underline p-0 h-auto ml-1"[39m
[36m>[39m
  [0mUpgrade to Max AI[0m
[36m</button>[39m

(If this is intentional, then use the `*AllBy*` variant of the query (like `queryAllByText`, `getAllByText`, or `findAllByText`)).

Ignored nodes: comments, script, style
[36m<body>[39m
  [36m<div>[39m
    [36m<div[39m
      [33mclass[39m=[32m"space-y-6 max-w-4xl overflow-x-hidden"[39m
    [36m>[39m
      [36m<div>[39m
        [36m<h2[39m
          [33mclass[39m=[32m"text-3xl font-bold tracking-tight"[39m
        [36m>[39m
          [0mSettings[0m
        [36m</h2>[39m
        [36m<p[39m
          [33mclass[39m=[32m"text-muted-foreground"[39m
        [36m>[39m
          [0mConfigure your company information and preferences[0m
        [36m</p>[39m
      [36m</div>[39m
      [36m<div[39m
        [33mclass[39m=[32m"space-y-6"[39m
      [36m>[39m
        [36m<div[39m
          [33mclass[39m=[32m"rounded-lg border bg-card text-card-foreground shadow-sm"[39m
        [36m>[39m
          [36m<div[39m
            [33mclass[39m=[32m"flex flex-col space-y-1.5 p-6"[39m
          [36m>[39m
            [36m<h3[39m
              [33mclass[39m=[32m"text-2xl font-semibold leading-none tracking-tight flex items-center gap-2"[39m
            [36m>[39m
              [36m<svg[39m
                [33mclass[39m=[32m"lucide lucide-palette h-5 w-5"[39m
                [33mfill[39m=[32m"none"[39m
                [33mheight[39m=[32m"24"[39m
                [33mstroke[39m=[32m"currentColor"[39m
                [33mstroke-linecap[39m=[32m"round"[39m
                [33mstroke-linejoin[39m=[32m"round"[39m
                [33mstroke-width[39m=[32m"2"[39m
                [33mviewBox[39m=[32m"0 0 24 24"[39m
                [33mwidth[39m=[32m"24"[39m
                [33mxmlns[39m=[32m"http://www.w3.org/2000/svg"[39m
              [36m>[39m
                [36m<circle[39m
                  [33mcx[39m=[32m"13.5"[39m
                  [33mcy[39m=[32m"6.5"[39m
                  [33mfill[39m=[32m"currentColor"[39m
                  [33mr[39m=[32m".5"[39m
                [36m/>[39m
                [36m<circle[39m
                  [33mcx[39m=[32m"17.5"[39m
                  [33mcy[39m=[32m"10.5"[39m
                  [33mfill[39m=[32m"currentColor"[39m
                  [33mr[39m=[32m".5"[39m
                [36m/>[39m
                [36m<circle[39m
                  [33mcx[39m=[32m"8.5"[39m
                  [33mcy[39m=[32m"7.5"[39m
                  [33mfill[39m=[32m"currentColor"[39m
                  [33mr[39m=[32m".5"[39m
                [36m/>[39m
                [36m<circle[39m
                  [33mcx[39m=[32m"6.5"[39m
                  [33mcy[39m=[32m"12.5"[39m
                  [33mfill[39m=[32m"currentColor"[39m
                  [33mr[39m=[32m".5"[39m
                [36m/>[39m
                [36m<path[39m
                  [33md[39m=[32m"M12 2C6.5 2 2 6.5 2 12s4.5 10 10 10c.926 0 1.648-.746 1.648-1.688 0-.437-.18-.835-.437-1.125-.29-.289-.438-.652-.438-1.125a1.64 1.64 0 0 1 1.668-1.668h1.996c3.051 0 5.555-2.503 5.555-5.554C21.965 6.012 17.461 2 12 2z"[39m
                [36m/>[39m
              [36m</svg>[39m
              [0mBranding[0m
            [36m</h3>[39m
            [36m<p[39m
              [33mclass[39m=[32m"text-sm text-muted-foreground"[39m
            [36m>[39m
              [0mCustomize your brand colors and logo[0m
            [36m</p>[39m
          [36m</div>[39m
          [36m<div[39m
            [33mclass[39m=[32m"p-6 pt-0 space-y-6"[39m
          [36m>[39m
            [36m<div[39m
              [33mclass[39m=[32m"space-y-3"[39m
            [36m>[39m
              [36m<label[39m
                [33mclass[39m=[32m"text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"[39m
                [33mfor[39m=[32m"logo-upload"[39m
              [36m>[39m
                [0mCompany Logo for Branding[0m
              [36m</label>[39m
              [36m<div[39m
                [33mclass[39m=[32m"relative w-full rounded-lg border p-4 [&>svg~*]:pl-7 [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground bg-background text-foreground"[39m
                [33mrole[39m=[32m"alert"[39m
              [36m>[39m
                [36m<svg[39m
                  [33mclass[39m=[32m"lucide lucide-crown h-4 w-4"[39m
                  [33mfill[39m=[32m"none"[39m
                  [33mheight[39m=[32m"24"[39m
                  [33mstroke[39m=[32m"currentColor"[39m
                  [33mstroke-linecap[39m=[32m"round"[39m
                  [33mstroke-linejoin[39m=[32m"round"[39m
                  [33mstroke-width[39m=[32m"2"[39m
                  [33mviewBox[39m=[32m"0 0 24 24"[39m
                  [33mwidth[39m=[32m"24"[39m
                  [33mxmlns[39m=[32m"http://www.w3.org/2000/svg"[39m
                [36m>[39m
                  [36m<path[39m
                    [33md[39m=[32m"M11.562 3.266a.5.5 0 0 1 .876 0L15.39 8.87a1 1 0 0 0 1.516.294L21.183 5.5a.5.5 0 0 1 .798.519l-2.834 10.246a1 1 0 0 1-.956.734H5.81a1 1 0 0 1-.957-.734L2.02 6.02a.5.5 0 0 1 .798-.519l4.276 3.664a1 1 0 0 0 1.516-.294z"[39m
                  [36m/>[39m
                  [36m<path[39m
                    [33md[39m=[32m"M5 21h14"[39m
                  [36m/>[39m
                [36m</svg>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"text-sm [&_p]:leading-relaxed"[39m
                [36m>[39m
                  [0mWhite-label branding is available exclusively for Max AI tier subscribers.[0m
                  [36m<button[39m
                    [33mclass[39m=[32m"inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0 text-primary underline-offset-4 hover:underline p-0 h-auto ml-1"[39m
                  [36m>[39m
                    [0mUpgrade to Max AI[0m
                  [36m</button>[39m
                [36m</div>[39m
              [36m</div>[39m
            [36m</div>[39m
            [36m<div[39m
              [33mclass[39m=[32m"space-y-4 pt-4 border-t"[39m
            [36m>[39m
              [36m<div[39m
                [33mclass[39m=[32m"grid gap-4 md:grid-cols-2"[39m
              [36m>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"space-y-2"[39m
                [36m>[39m
                  [36m<label[39m
                    [33mclass[39m=[32m"text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"[39m
                    [33mfor[39m=[32m"primaryColor"[39m
                  [36m>[39m
                    [0mPrimary Color[0m
                  [36m</label>[39...

Ignored nodes: comments, script, style
[36m<html[39m
  [33mclass[39m=[32m"light"[39m
[36m>[39m
  [36m<head />[39m
  [36m<body>[39m
    [36m<div>[39m
      [36m<div[39m
        [33mclass[39m=[32m"space-y-6 max-w-4xl overflow-x-hidden"[39m
      [36m>[39m
        [36m<div>[39m
          [36m<h2[39m
            [33mclass[39m=[32m"text-3xl font-bold tracking-tight"[39m
          [36m>[39m
            [0mSettings[0m
          [36m</h2>[39m
          [36m<p[39m
            [33mclass[39m=[32m"text-muted-foreground"[39m
          [36m>[39m
            [0mConfigure your company information and preferences[0m
          [36m</p>[39m
        [36m</div>[39m
        [36m<div[39m
          [33mclass[39m=[32m"space-y-6"[39m
        [36m>[39m
          [36m<div[39m
            [33mclass[39m=[32m"rounded-lg border bg-card text-card-foreground shadow-sm"[39m
          [36m>[39m
            [36m<div[39m
              [33mclass[39m=[32m"flex flex-col space-y-1.5 p-6"[39m
            [36m>[39m
              [36m<h3[39m
                [33mclass[39m=[32m"text-2xl font-semibold leading-none tracking-tight flex items-center gap-2"[39m
              [36m>[39m
                [36m<svg[39m
                  [33mclass[39m=[32m"lucide lucide-palette h-5 w-5"[39m
                  [33mfill[39m=[32m"none"[39m
                  [33mheight[39m=[32m"24"[39m
                  [33mstroke[39m=[32m"currentColor"[39m
                  [33mstroke-linecap[39m=[32m"round"[39m
                  [33mstroke-linejoin[39m=[32m"round"[39m
                  [33mstroke-width[39m=[32m"2"[39m
                  [33mviewBox[39m=[32m"0 0 24 24"[39m
                  [33mwidth[39m=[32m"24"[39m
                  [33mxmlns[39m=[32m"http://www.w3.org/2000/svg"[39m
                [36m>[39m
                  [36m<circle[39m
                    [33mcx[39m=[32m"13.5"[39m
                    [33mcy[39m=[32m"6.5"[39m
                    [33mfill[39m=[32m"currentColor"[39m
                    [33mr[39m=[32m".5"[39m
                  [36m/>[39m
                  [36m<circle[39m
                    [33mcx[39m=[32m"17.5"[39m
                    [33mcy[39m=[32m"10.5"[39m
                    [33mfill[39m=[32m"currentColor"[39m
                    [33mr[39m=[32m".5"[39m
                  [36m/>[39m
                  [36m<circle[39m
                    [33mcx[39m=[32m"8.5"[39m
                    [33mcy[39m=[32m"7.5"[39m
                    [33mfill[39m=[32m"currentColor"[39m
                    [33mr[39m=[32m".5"[39m
                  [36m/>[39m
                  [36m<circle[39m
                    [33mcx[39m=[32m"6.5"[39m
                    [33mcy[39m=[32m"12.5"[39m
                    [33mfill[39m=[32m"currentColor"[39m
                    [33mr[39m=[32m".5"[39m
                  [36m/>[39m
                  [36m<path[39m
                    [33md[39m=[32m"M12 2C6.5 2 2 6.5 2 12s4.5 10 10 10c.926 0 1.648-.746 1.648-1.688 0-.437-.18-.835-.437-1.125-.29-.289-.438-.652-.438-1.125a1.64 1.64 0 0 1 1.668-1.668h1.996c3.051 0 5.555-2.503 5.555-5.554C21.965 6.012 17.461 2 12 2z"[39m
                  [36m/>[39m
                [36m</svg>[39m
                [0mBranding[0m
              [36m</h3>[39m
              [36m<p[39m
                [33mclass[39m=[32m"text-sm text-muted-foreground"[39m
              [36m>[39m
                [0mCustomize your brand colors and logo[0m
              [36m</p>[39m
            [36m</div>[39m
            [36m<div[39m
              [33mclass[39m=[32m"p-6 pt-0 space-y-6"[39m
            [36m>[39m
              [36m<div[39m
                [33mclass[39m=[32m"space-y-3"[39m
              [36m>[39m
                [36m<label[39m
                  [33mclass[39m=[32m"text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"[39m
                  [33mfor[39m=[32m"logo-upload"[39m
                [36m>[39m
                  [0mCompany Logo for Branding[0m
                [36m</label>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"relative w-full rounded-lg border p-4 [&>svg~*]:pl-7 [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground bg-background text-foreground"[39m
                  [33mrole[39m=[32m"alert"[39m
                [36m>[39m
                  [36m<svg[39m
                    [33mclass[39m=[32m"lucide lucide-crown h-4 w-4"[39m
                    [33mfill[39m=[32m"none"[39m
                    [33mheight[39m=[32m"24"[39m
                    [33mstroke[39m=[32m"currentColor"[39m
                    [33mstroke-linecap[39m=[32m"round"[39m
                    [33mstroke-linejoin[39m=[32m"round"[39m
                    [33mstroke-width[39m=[32m"2"[39m
                    [33mviewBox[39m=[32m"0 0 24 24"[39m
                    [33mwidth[39m=[32m"24"[39m
                    [33mxmlns[39m=[32m"http://www.w3.org/2000/svg"[39m
                  [36m>[39m
                    [36m<path[39m
                      [33md[39m=[32m"M11.562 3.266a.5.5 0 0 1 .876 0L15.39 8.87a1 1 0 0 0 1.516.294L21.183 5.5a.5.5 0 0 1 .798.519l-2.834 10.246a1 1 0 0 1-.956.734H5.81a1 1 0 0 1-.957-.734L2.02 6.02a.5.5 0 0 1 .798-.519l4.276 3.664a1 1 0 0 0 1.516-.294z"[39m
                    [36m/>[39m
                    [36m<path[39m
                      [33md[39m=[32m"M5 21h14"[39m
                    [36m/>[39m
                  [36m</svg>[39m
                  [36m<div[39m
                    [33mclass[39m=[32m"text-sm [&_p]:leading-relaxed"[39m
                  [36m>[39m
                    [0mWhite-label branding is available exclusively for Max AI tier subscribers.[0m
                    [36m<button[39m
                      [33mclass[39m=[32m"inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0 text-primary underline-offset-4 hover:underline p-0 h-auto ml-1"[39m
                    [36m>[39m
                      [0mUpgrade to Max AI[0m
                    [36m</button>[39m
                  [36m</div>[39m
                [36m</div>[39m
              [36m</div>[39m
              [36m<div[39m
                [33mclass[39m=[32m"space-y-4 pt-4 border-t"[39m
              [36m>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"grid gap-4 md:grid-cols-2"[39m
                [36m>[39m
                  [36m<div[39m
                    [33mclass[39m=[32m"space-y-2"[39m
                  ...
[90m [2m‚ùØ[22m waitFor node_modules/@testing-library/dom/dist/wait-for.js:[2m163:27[22m[39m
[36m [2m‚ùØ[22m src/pages/__tests__/ProTier.test.tsx:[2m138:11[22m[39m
    [90m136| [39m    [34mrender[39m([33m<[39m[33mSettings[39m [33m/[39m[33m>[39m[33m,[39m { wrapper })[33m;[39m
    [90m137| [39m
    [90m138| [39m    [35mawait[39m [34mwaitFor[39m(() [33m=>[39m {
    [90m   | [39m          [31m^[39m
    [90m139| [39m      [90m// Pro tier should see upgrade message for white-label features[39m
    [90m140| [39m      [35mconst[39m upgradeText [33m=[39m screen[33m.[39m[34mqueryByText[39m([36m/max ai/i[39m)[33m;[39m

[31m[2m‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ[2/7]‚éØ[22m[39m

[41m[1m FAIL [22m[49m src/pages/__tests__/Settings.whitelabel.test.tsx[2m > [22mSettings - White-Label Branding[2m > [22mLogo Upload Functionality[2m > [22mshould validate file size (max 2MB)
[31m[1mAssertionError[22m[39m: expected "vi.fn()" to be called with arguments: [ ObjectContaining{‚Ä¶} ][90m

Number of calls: [1m0[22m
[39m

Ignored nodes: comments, script, style
[36m<html[39m
  [33mclass[39m=[32m"light"[39m
[36m>[39m
  [36m<head />[39m
  [36m<body>[39m
    [36m<div>[39m
      [36m<div[39m
        [33mclass[39m=[32m"space-y-6 max-w-4xl overflow-x-hidden"[39m
      [36m>[39m
        [36m<div>[39m
          [36m<h2[39m
            [33mclass[39m=[32m"text-3xl font-bold tracking-tight"[39m
          [36m>[39m
            [0mSettings[0m
          [36m</h2>[39m
          [36m<p[39m
            [33mclass[39m=[32m"text-muted-foreground"[39m
          [36m>[39m
            [0mConfigure your company information and preferences[0m
          [36m</p>[39m
        [36m</div>[39m
        [36m<div[39m
          [33mclass[39m=[32m"space-y-6"[39m
        [36m>[39m
          [36m<div[39m
            [33mclass[39m=[32m"rounded-lg border bg-card text-card-foreground shadow-sm"[39m
          [36m>[39m
            [36m<div[39m
              [33mclass[39m=[32m"flex flex-col space-y-1.5 p-6"[39m
            [36m>[39m
              [36m<h3[39m
                [33mclass[39m=[32m"text-2xl font-semibold leading-none tracking-tight flex items-center gap-2"[39m
              [36m>[39m
                [36m<svg[39m
                  [33mclass[39m=[32m"lucide lucide-palette h-5 w-5"[39m
                  [33mfill[39m=[32m"none"[39m
                  [33mheight[39m=[32m"24"[39m
                  [33mstroke[39m=[32m"currentColor"[39m
                  [33mstroke-linecap[39m=[32m"round"[39m
                  [33mstroke-linejoin[39m=[32m"round"[39m
                  [33mstroke-width[39m=[32m"2"[39m
                  [33mviewBox[39m=[32m"0 0 24 24"[39m
                  [33mwidth[39m=[32m"24"[39m
                  [33mxmlns[39m=[32m"http://www.w3.org/2000/svg"[39m
                [36m>[39m
                  [36m<circle[39m
                    [33mcx[39m=[32m"13.5"[39m
                    [33mcy[39m=[32m"6.5"[39m
                    [33mfill[39m=[32m"currentColor"[39m
                    [33mr[39m=[32m".5"[39m
                  [36m/>[39m
                  [36m<circle[39m
                    [33mcx[39m=[32m"17.5"[39m
                    [33mcy[39m=[32m"10.5"[39m
                    [33mfill[39m=[32m"currentColor"[39m
                    [33mr[39m=[32m".5"[39m
                  [36m/>[39m
                  [36m<circle[39m
                    [33mcx[39m=[32m"8.5"[39m
                    [33mcy[39m=[32m"7.5"[39m
                    [33mfill[39m=[32m"currentColor"[39m
                    [33mr[39m=[32m".5"[39m
                  [36m/>[39m
                  [36m<circle[39m
                    [33mcx[39m=[32m"6.5"[39m
                    [33mcy[39m=[32m"12.5"[39m
                    [33mfill[39m=[32m"currentColor"[39m
                    [33mr[39m=[32m".5"[39m
                  [36m/>[39m
                  [36m<path[39m
                    [33md[39m=[32m"M12 2C6.5 2 2 6.5 2 12s4.5 10 10 10c.926 0 1.648-.746 1.648-1.688 0-.437-.18-.835-.437-1.125-.29-.289-.438-.652-.438-1.125a1.64 1.64 0 0 1 1.668-1.668h1.996c3.051 0 5.555-2.503 5.555-5.554C21.965 6.012 17.461 2 12 2z"[39m
                  [36m/>[39m
                [36m</svg>[39m
                [0mBranding[0m
              [36m</h3>[39m
              [36m<p[39m
                [33mclass[39m=[32m"text-sm text-muted-foreground"[39m
              [36m>[39m
                [0mCustomize your brand colors and logo[0m
              [36m</p>[39m
            [36m</div>[39m
            [36m<div[39m
              [33mclass[39m=[32m"p-6 pt-0 space-y-6"[39m
            [36m>[39m
              [36m<div[39m
                [33mclass[39m=[32m"space-y-3"[39m
              [36m>[39m
                [36m<label[39m
                  [33mclass[39m=[32m"text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"[39m
                  [33mfor[39m=[32m"logo-upload"[39m
                [36m>[39m
                  [0mCompany Logo for Branding[0m
                [36m</label>[39m
                [36m<div>[39m
                  [36m<input[39m
                    [33maccept[39m=[32m"image/*"[39m
                    [33maria-label[39m=[32m"Company Logo for Branding"[39m
                    [33mclass[39m=[32m"hidden"[39m
                    [33mid[39m=[32m"logo-upload"[39m
                    [33mtype[39m=[32m"file"[39m
                  [36m/>[39m
                  [36m<label[39m
                    [33mfor[39m=[32m"logo-upload"[39m
                  [36m>[39m
                    [36m<span[39m
                      [33mclass[39m=[32m"inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0 border border-input bg-background hover:bg-accent hover:text-accent-foreground h-10 px-4 py-2"[39m
                    [36m>[39m
                      [36m<svg[39m
                        [33mclass[39m=[32m"lucide lucide-upload mr-2 h-4 w-4"[39m
                        [33mfill[39m=[32m"none"[39m
                        [33mheight[39m=[32m"24"[39m
                        [33mstroke[39m=[32m"currentColor"[39m
                        [33mstroke-linecap[39m=[32m"round"[39m
                        [33mstroke-linejoin[39m=[32m"round"[39m
                        [33mstroke-width[39m=[32m"2"[39m
                        [33mviewBox[39m=[32m"0 0 24 24"[39m
                        [33mwidth[39m=[32m"24"[39m
                        [33mxmlns[39m=[32m"http://www.w3.org/2000/svg"[39m
                      [36m>[39m
                        [36m<path[39m
                          [33md[39m=[32m"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"[39m
                        [36m/>[39m
                        [36m<polyline[39m
                          [33mpoints[39m=[32m"17 8 12 3 7 8"[39m
                        [36m/>[39m
                        [36m<line[39m
                          [33mx1[39m=[32m"12"[39m
                          [33mx2[39m=[32m"12"[39m
                          [33my1[39m=[32m"3"[39m
                          [33my2[39m=[32m"15"[39m
                        [36m/>[39m
                      [36m</svg>[39m
                      [0mUpload Logo[0m
                    [36m</span>[39m
                  [36m</label>[39m
                  [36m<p[39m
                    [33mclass[39m=[32m"text-sm text-muted-foreground mt-2"[39m
                  [36m>[39m
                    [0mRecommended: PNG or SVG, max 2MB[0m
                  [36m</p>[39m
                [...
[36m [2m‚ùØ[22m __vi_import_2__.waitFor.timeout src/pages/__tests__/Settings.whitelabel.test.tsx:[2m184:27[22m[39m
    [90m182| [39m
    [90m183| [39m      [35mawait[39m [34mwaitFor[39m(() [33m=>[39m {
    [90m184| [39m        [34mexpect[39m(mockToast)[33m.[39m[34mtoHaveBeenCalledWith[39m(
    [90m   | [39m                          [31m^[39m
    [90m185| [39m          expect[33m.[39m[34mobjectContaining[39m({
    [90m186| [39m            title[33m:[39m [32m'Error'[39m[33m,[39m
[90m [2m‚ùØ[22m runWithExpensiveErrorDiagnosticsDisabled node_modules/@testing-library/dom/dist/config.js:[2m47:12[22m[39m
[90m [2m‚ùØ[22m checkCallback node_modules/@testing-library/dom/dist/wait-for.js:[2m124:77[22m[39m
[90m [2m‚ùØ[22m Timeout.checkRealTimersCallback node_modules/@testing-library/dom/dist/wait-for.js:[2m118:16[22m[39m

[31m[2m‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ[3/7]‚éØ[22m[39m

[41m[1m FAIL [22m[49m src/pages/__tests__/Settings.whitelabel.test.tsx[2m > [22mSettings - White-Label Branding[2m > [22mLogo Upload Functionality[2m > [22mshould validate file type (images only)
[31m[1mAssertionError[22m[39m: expected "vi.fn()" to be called with arguments: [ ObjectContaining{‚Ä¶} ][90m

Number of calls: [1m0[22m
[39m

Ignored nodes: comments, script, style
[36m<html[39m
  [33mclass[39m=[32m"light"[39m
[36m>[39m
  [36m<head />[39m
  [36m<body>[39m
    [36m<div>[39m
      [36m<div[39m
        [33mclass[39m=[32m"space-y-6 max-w-4xl overflow-x-hidden"[39m
      [36m>[39m
        [36m<div>[39m
          [36m<h2[39m
            [33mclass[39m=[32m"text-3xl font-bold tracking-tight"[39m
          [36m>[39m
            [0mSettings[0m
          [36m</h2>[39m
          [36m<p[39m
            [33mclass[39m=[32m"text-muted-foreground"[39m
          [36m>[39m
            [0mConfigure your company information and preferences[0m
          [36m</p>[39m
        [36m</div>[39m
        [36m<div[39m
          [33mclass[39m=[32m"space-y-6"[39m
        [36m>[39m
          [36m<div[39m
            [33mclass[39m=[32m"rounded-lg border bg-card text-card-foreground shadow-sm"[39m
          [36m>[39m
            [36m<div[39m
              [33mclass[39m=[32m"flex flex-col space-y-1.5 p-6"[39m
            [36m>[39m
              [36m<h3[39m
                [33mclass[39m=[32m"text-2xl font-semibold leading-none tracking-tight flex items-center gap-2"[39m
              [36m>[39m
                [36m<svg[39m
                  [33mclass[39m=[32m"lucide lucide-palette h-5 w-5"[39m
                  [33mfill[39m=[32m"none"[39m
                  [33mheight[39m=[32m"24"[39m
                  [33mstroke[39m=[32m"currentColor"[39m
                  [33mstroke-linecap[39m=[32m"round"[39m
                  [33mstroke-linejoin[39m=[32m"round"[39m
                  [33mstroke-width[39m=[32m"2"[39m
                  [33mviewBox[39m=[32m"0 0 24 24"[39m
                  [33mwidth[39m=[32m"24"[39m
                  [33mxmlns[39m=[32m"http://www.w3.org/2000/svg"[39m
                [36m>[39m
                  [36m<circle[39m
                    [33mcx[39m=[32m"13.5"[39m
                    [33mcy[39m=[32m"6.5"[39m
                    [33mfill[39m=[32m"currentColor"[39m
                    [33mr[39m=[32m".5"[39m
                  [36m/>[39m
                  [36m<circle[39m
                    [33mcx[39m=[32m"17.5"[39m
                    [33mcy[39m=[32m"10.5"[39m
                    [33mfill[39m=[32m"currentColor"[39m
                    [33mr[39m=[32m".5"[39m
                  [36m/>[39m
                  [36m<circle[39m
                    [33mcx[39m=[32m"8.5"[39m
                    [33mcy[39m=[32m"7.5"[39m
                    [33mfill[39m=[32m"currentColor"[39m
                    [33mr[39m=[32m".5"[39m
                  [36m/>[39m
                  [36m<circle[39m
                    [33mcx[39m=[32m"6.5"[39m
                    [33mcy[39m=[32m"12.5"[39m
                    [33mfill[39m=[32m"currentColor"[39m
                    [33mr[39m=[32m".5"[39m
                  [36m/>[39m
                  [36m<path[39m
                    [33md[39m=[32m"M12 2C6.5 2 2 6.5 2 12s4.5 10 10 10c.926 0 1.648-.746 1.648-1.688 0-.437-.18-.835-.437-1.125-.29-.289-.438-.652-.438-1.125a1.64 1.64 0 0 1 1.668-1.668h1.996c3.051 0 5.555-2.503 5.555-5.554C21.965 6.012 17.461 2 12 2z"[39m
                  [36m/>[39m
                [36m</svg>[39m
                [0mBranding[0m
              [36m</h3>[39m
              [36m<p[39m
                [33mclass[39m=[32m"text-sm text-muted-foreground"[39m
              [36m>[39m
                [0mCustomize your brand colors and logo[0m
              [36m</p>[39m
            [36m</div>[39m
            [36m<div[39m
              [33mclass[39m=[32m"p-6 pt-0 space-y-6"[39m
            [36m>[39m
              [36m<div[39m
                [33mclass[39m=[32m"space-y-3"[39m
              [36m>[39m
                [36m<label[39m
                  [33mclass[39m=[32m"text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"[39m
                  [33mfor[39m=[32m"logo-upload"[39m
                [36m>[39m
                  [0mCompany Logo for Branding[0m
                [36m</label>[39m
                [36m<div>[39m
                  [36m<input[39m
                    [33maccept[39m=[32m"image/*"[39m
                    [33maria-label[39m=[32m"Company Logo for Branding"[39m
                    [33mclass[39m=[32m"hidden"[39m
                    [33mid[39m=[32m"logo-upload"[39m
                    [33mtype[39m=[32m"file"[39m
                  [36m/>[39m
                  [36m<label[39m
                    [33mfor[39m=[32m"logo-upload"[39m
                  [36m>[39m
                    [36m<span[39m
                      [33mclass[39m=[32m"inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0 border border-input bg-background hover:bg-accent hover:text-accent-foreground h-10 px-4 py-2"[39m
                    [36m>[39m
                      [36m<svg[39m
                        [33mclass[39m=[32m"lucide lucide-upload mr-2 h-4 w-4"[39m
                        [33mfill[39m=[32m"none"[39m
                        [33mheight[39m=[32m"24"[39m
                        [33mstroke[39m=[32m"currentColor"[39m
                        [33mstroke-linecap[39m=[32m"round"[39m
                        [33mstroke-linejoin[39m=[32m"round"[39m
                        [33mstroke-width[39m=[32m"2"[39m
                        [33mviewBox[39m=[32m"0 0 24 24"[39m
                        [33mwidth[39m=[32m"24"[39m
                        [33mxmlns[39m=[32m"http://www.w3.org/2000/svg"[39m
                      [36m>[39m
                        [36m<path[39m
                          [33md[39m=[32m"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"[39m
                        [36m/>[39m
                        [36m<polyline[39m
                          [33mpoints[39m=[32m"17 8 12 3 7 8"[39m
                        [36m/>[39m
                        [36m<line[39m
                          [33mx1[39m=[32m"12"[39m
                          [33mx2[39m=[32m"12"[39m
                          [33my1[39m=[32m"3"[39m
                          [33my2[39m=[32m"15"[39m
                        [36m/>[39m
                      [36m</svg>[39m
                      [0mUpload Logo[0m
                    [36m</span>[39m
                  [36m</label>[39m
                  [36m<p[39m
                    [33mclass[39m=[32m"text-sm text-muted-foreground mt-2"[39m
                  [36m>[39m
                    [0mRecommended: PNG or SVG, max 2MB[0m
                  [36m</p>[39m
                [...
[36m [2m‚ùØ[22m __vi_import_2__.waitFor.timeout src/pages/__tests__/Settings.whitelabel.test.tsx:[2m215:27[22m[39m
    [90m213| [39m
    [90m214| [39m      [35mawait[39m [34mwaitFor[39m(() [33m=>[39m {
    [90m215| [39m        [34mexpect[39m(mockToast)[33m.[39m[34mtoHaveBeenCalledWith[39m(
    [90m   | [39m                          [31m^[39m
    [90m216| [39m          expect[33m.[39m[34mobjectContaining[39m({
    [90m217| [39m            title[33m:[39m [32m'Error'[39m[33m,[39m
[90m [2m‚ùØ[22m runWithExpensiveErrorDiagnosticsDisabled node_modules/@testing-library/dom/dist/config.js:[2m47:12[22m[39m
[90m [2m‚ùØ[22m checkCallback node_modules/@testing-library/dom/dist/wait-for.js:[2m124:77[22m[39m
[90m [2m‚ùØ[22m Timeout.checkRealTimersCallback node_modules/@testing-library/dom/dist/wait-for.js:[2m118:16[22m[39m

[31m[2m‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ[4/7]‚éØ[22m[39m

[41m[1m FAIL [22m[49m src/pages/__tests__/Settings.whitelabel.test.tsx[2m > [22mSettings - White-Label Branding[2m > [22mLogo Upload Functionality[2m > [22mshould successfully upload valid logo
[31m[1mAssertionError[22m[39m: expected "vi.fn()" to be called with arguments: [ ObjectContaining{‚Ä¶} ][90m

Number of calls: [1m0[22m
[39m

Ignored nodes: comments, script, style
[36m<html[39m
  [33mclass[39m=[32m"light"[39m
[36m>[39m
  [36m<head />[39m
  [36m<body>[39m
    [36m<div>[39m
      [36m<div[39m
        [33mclass[39m=[32m"space-y-6 max-w-4xl overflow-x-hidden"[39m
      [36m>[39m
        [36m<div>[39m
          [36m<h2[39m
            [33mclass[39m=[32m"text-3xl font-bold tracking-tight"[39m
          [36m>[39m
            [0mSettings[0m
          [36m</h2>[39m
          [36m<p[39m
            [33mclass[39m=[32m"text-muted-foreground"[39m
          [36m>[39m
            [0mConfigure your company information and preferences[0m
          [36m</p>[39m
        [36m</div>[39m
        [36m<div[39m
          [33mclass[39m=[32m"space-y-6"[39m
        [36m>[39m
          [36m<div[39m
            [33mclass[39m=[32m"rounded-lg border bg-card text-card-foreground shadow-sm"[39m
          [36m>[39m
            [36m<div[39m
              [33mclass[39m=[32m"flex flex-col space-y-1.5 p-6"[39m
            [36m>[39m
              [36m<h3[39m
                [33mclass[39m=[32m"text-2xl font-semibold leading-none tracking-tight flex items-center gap-2"[39m
              [36m>[39m
                [36m<svg[39m
                  [33mclass[39m=[32m"lucide lucide-palette h-5 w-5"[39m
                  [33mfill[39m=[32m"none"[39m
                  [33mheight[39m=[32m"24"[39m
                  [33mstroke[39m=[32m"currentColor"[39m
                  [33mstroke-linecap[39m=[32m"round"[39m
                  [33mstroke-linejoin[39m=[32m"round"[39m
                  [33mstroke-width[39m=[32m"2"[39m
                  [33mviewBox[39m=[32m"0 0 24 24"[39m
                  [33mwidth[39m=[32m"24"[39m
                  [33mxmlns[39m=[32m"http://www.w3.org/2000/svg"[39m
                [36m>[39m
                  [36m<circle[39m
                    [33mcx[39m=[32m"13.5"[39m
                    [33mcy[39m=[32m"6.5"[39m
                    [33mfill[39m=[32m"currentColor"[39m
                    [33mr[39m=[32m".5"[39m
                  [36m/>[39m
                  [36m<circle[39m
                    [33mcx[39m=[32m"17.5"[39m
                    [33mcy[39m=[32m"10.5"[39m
                    [33mfill[39m=[32m"currentColor"[39m
                    [33mr[39m=[32m".5"[39m
                  [36m/>[39m
                  [36m<circle[39m
                    [33mcx[39m=[32m"8.5"[39m
                    [33mcy[39m=[32m"7.5"[39m
                    [33mfill[39m=[32m"currentColor"[39m
                    [33mr[39m=[32m".5"[39m
                  [36m/>[39m
                  [36m<circle[39m
                    [33mcx[39m=[32m"6.5"[39m
                    [33mcy[39m=[32m"12.5"[39m
                    [33mfill[39m=[32m"currentColor"[39m
                    [33mr[39m=[32m".5"[39m
                  [36m/>[39m
                  [36m<path[39m
                    [33md[39m=[32m"M12 2C6.5 2 2 6.5 2 12s4.5 10 10 10c.926 0 1.648-.746 1.648-1.688 0-.437-.18-.835-.437-1.125-.29-.289-.438-.652-.438-1.125a1.64 1.64 0 0 1 1.668-1.668h1.996c3.051 0 5.555-2.503 5.555-5.554C21.965 6.012 17.461 2 12 2z"[39m
                  [36m/>[39m
                [36m</svg>[39m
                [0mBranding[0m
              [36m</h3>[39m
              [36m<p[39m
                [33mclass[39m=[32m"text-sm text-muted-foreground"[39m
              [36m>[39m
                [0mCustomize your brand colors and logo[0m
              [36m</p>[39m
            [36m</div>[39m
            [36m<div[39m
              [33mclass[39m=[32m"p-6 pt-0 space-y-6"[39m
            [36m>[39m
              [36m<div[39m
                [33mclass[39m=[32m"space-y-3"[39m
              [36m>[39m
                [36m<label[39m
                  [33mclass[39m=[32m"text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"[39m
                  [33mfor[39m=[32m"logo-upload"[39m
                [36m>[39m
                  [0mCompany Logo for Branding[0m
                [36m</label>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"mb-3 flex items-center gap-4"[39m
                [36m>[39m
                  [36m<img[39m
                    [33malt[39m=[32m"Company logo"[39m
                    [33mclass[39m=[32m"h-16 w-auto object-contain"[39m
                    [33msrc[39m=[32m"https://example.com/logo.png"[39m
                  [36m/>[39m
                  [36m<button[39m
                    [33maria-controls[39m=[32m"radix-:rk:"[39m
                    [33maria-expanded[39m=[32m"false"[39m
                    [33maria-haspopup[39m=[32m"dialog"[39m
                    [33mclass[39m=[32m"inline-flex items-center justify-center gap-2 whitespace-nowrap text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0 border border-input bg-background hover:bg-accent hover:text-accent-foreground h-9 rounded-md px-3"[39m
                    [33mdata-state[39m=[32m"closed"[39m
                    [33mtype[39m=[32m"button"[39m
                  [36m>[39m
                    [36m<svg[39m
                      [33mclass[39m=[32m"lucide lucide-x mr-2 h-4 w-4"[39m
                      [33mfill[39m=[32m"none"[39m
                      [33mheight[39m=[32m"24"[39m
                      [33mstroke[39m=[32m"currentColor"[39m
                      [33mstroke-linecap[39m=[32m"round"[39m
                      [33mstroke-linejoin[39m=[32m"round"[39m
                      [33mstroke-width[39m=[32m"2"[39m
                      [33mviewBox[39m=[32m"0 0 24 24"[39m
                      [33mwidth[39m=[32m"24"[39m
                      [33mxmlns[39m=[32m"http://www.w3.org/2000/svg"[39m
                    [36m>[39m
                      [36m<path[39m
                        [33md[39m=[32m"M18 6 6 18"[39m
                      [36m/>[39m
                      [36m<path[39m
                        [33md[39m=[32m"m6 6 12 12"[39m
                      [36m/>[39m
                    [36m</svg>[39m
                    [0mRemove Logo[0m
                  [36m</button>[39m
                [36m</div>[39m
                [36m<div>[39m
                  [36m<input[39m
                    [33maccept[39m=[32m"image/*"[39m
                    [33maria-label[39m=[32m"Company Logo for Branding"[39m
                    [33mclass[39m=[32m"hidden"[39m
                    [33mid[39m=[32m"logo-upload"[39m
                    [33mtype[39m=[32m"file"[39m
                  [36m/>[39m
                  [36m<label[39m
                    [33m...
[36m [2m‚ùØ[22m __vi_import_2__.waitFor.timeout src/pages/__tests__/Settings.whitelabel.test.tsx:[2m256:27[22m[39m
    [90m254| [39m      [35mawait[39m [34mwaitFor[39m(() [33m=>[39m {
    [90m255| [39m        [34mexpect[39m(mockUpload)[33m.[39m[34mtoHaveBeenCalled[39m()[33m;[39m
    [90m256| [39m        [34mexpect[39m(mockToast)[33m.[39m[34mtoHaveBeenCalledWith[39m(
    [90m   | [39m                          [31m^[39m
    [90m257| [39m          expect[33m.[39m[34mobjectContaining[39m({
    [90m258| [39m            title[33m:[39m [32m'Success'[39m[33m,[39m
[90m [2m‚ùØ[22m runWithExpensiveErrorDiagnosticsDisabled node_modules/@testing-library/dom/dist/config.js:[2m47:12[22m[39m
[90m [2m‚ùØ[22m checkCallback node_modules/@testing-library/dom/dist/wait-for.js:[2m124:77[22m[39m
[90m [2m‚ùØ[22m Timeout.checkRealTimersCallback node_modules/@testing-library/dom/dist/wait-for.js:[2m118:16[22m[39m

[31m[2m‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ[5/7]‚éØ[22m[39m

[41m[1m FAIL [22m[49m src/pages/__tests__/Settings.whitelabel.test.tsx[2m > [22mSettings - White-Label Branding[2m > [22mLogo Delete Functionality[2m > [22mshould show remove button when logo exists
[31m[1mTypeError[22m[39m: __vi_import_1__.screen.getByAlt is not a function

Ignored nodes: comments, script, style
[36m<html[39m
  [33mclass[39m=[32m"light"[39m
[36m>[39m
  [36m<head />[39m
  [36m<body>[39m
    [36m<div>[39m
      [36m<div[39m
        [33mclass[39m=[32m"space-y-6 max-w-4xl overflow-x-hidden"[39m
      [36m>[39m
        [36m<div>[39m
          [36m<h2[39m
            [33mclass[39m=[32m"text-3xl font-bold tracking-tight"[39m
          [36m>[39m
            [0mSettings[0m
          [36m</h2>[39m
          [36m<p[39m
            [33mclass[39m=[32m"text-muted-foreground"[39m
          [36m>[39m
            [0mConfigure your company information and preferences[0m
          [36m</p>[39m
        [36m</div>[39m
        [36m<div[39m
          [33mclass[39m=[32m"space-y-6"[39m
        [36m>[39m
          [36m<div[39m
            [33mclass[39m=[32m"rounded-lg border bg-card text-card-foreground shadow-sm"[39m
          [36m>[39m
            [36m<div[39m
              [33mclass[39m=[32m"flex flex-col space-y-1.5 p-6"[39m
            [36m>[39m
              [36m<h3[39m
                [33mclass[39m=[32m"text-2xl font-semibold leading-none tracking-tight flex items-center gap-2"[39m
              [36m>[39m
                [36m<svg[39m
                  [33mclass[39m=[32m"lucide lucide-palette h-5 w-5"[39m
                  [33mfill[39m=[32m"none"[39m
                  [33mheight[39m=[32m"24"[39m
                  [33mstroke[39m=[32m"currentColor"[39m
                  [33mstroke-linecap[39m=[32m"round"[39m
                  [33mstroke-linejoin[39m=[32m"round"[39m
                  [33mstroke-width[39m=[32m"2"[39m
                  [33mviewBox[39m=[32m"0 0 24 24"[39m
                  [33mwidth[39m=[32m"24"[39m
                  [33mxmlns[39m=[32m"http://www.w3.org/2000/svg"[39m
                [36m>[39m
                  [36m<circle[39m
                    [33mcx[39m=[32m"13.5"[39m
                    [33mcy[39m=[32m"6.5"[39m
                    [33mfill[39m=[32m"currentColor"[39m
                    [33mr[39m=[32m".5"[39m
                  [36m/>[39m
                  [36m<circle[39m
                    [33mcx[39m=[32m"17.5"[39m
                    [33mcy[39m=[32m"10.5"[39m
                    [33mfill[39m=[32m"currentColor"[39m
                    [33mr[39m=[32m".5"[39m
                  [36m/>[39m
                  [36m<circle[39m
                    [33mcx[39m=[32m"8.5"[39m
                    [33mcy[39m=[32m"7.5"[39m
                    [33mfill[39m=[32m"currentColor"[39m
                    [33mr[39m=[32m".5"[39m
                  [36m/>[39m
                  [36m<circle[39m
                    [33mcx[39m=[32m"6.5"[39m
                    [33mcy[39m=[32m"12.5"[39m
                    [33mfill[39m=[32m"currentColor"[39m
                    [33mr[39m=[32m".5"[39m
                  [36m/>[39m
                  [36m<path[39m
                    [33md[39m=[32m"M12 2C6.5 2 2 6.5 2 12s4.5 10 10 10c.926 0 1.648-.746 1.648-1.688 0-.437-.18-.835-.437-1.125-.29-.289-.438-.652-.438-1.125a1.64 1.64 0 0 1 1.668-1.668h1.996c3.051 0 5.555-2.503 5.555-5.554C21.965 6.012 17.461 2 12 2z"[39m
                  [36m/>[39m
                [36m</svg>[39m
                [0mBranding[0m
              [36m</h3>[39m
              [36m<p[39m
                [33mclass[39m=[32m"text-sm text-muted-foreground"[39m
              [36m>[39m
                [0mCustomize your brand colors and logo[0m
              [36m</p>[39m
            [36m</div>[39m
            [36m<div[39m
              [33mclass[39m=[32m"p-6 pt-0 space-y-6"[39m
            [36m>[39m
              [36m<div[39m
                [33mclass[39m=[32m"space-y-3"[39m
              [36m>[39m
                [36m<label[39m
                  [33mclass[39m=[32m"text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"[39m
                  [33mfor[39m=[32m"logo-upload"[39m
                [36m>[39m
                  [0mCompany Logo for Branding[0m
                [36m</label>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"mb-3 flex items-center gap-4"[39m
                [36m>[39m
                  [36m<img[39m
                    [33malt[39m=[32m"Company logo"[39m
                    [33mclass[39m=[32m"h-16 w-auto object-contain"[39m
                    [33msrc[39m=[32m"https://example.com/test-logo.png"[39m
                  [36m/>[39m
                  [36m<button[39m
                    [33maria-controls[39m=[32m"radix-:rn:"[39m
                    [33maria-expanded[39m=[32m"false"[39m
                    [33maria-haspopup[39m=[32m"dialog"[39m
                    [33mclass[39m=[32m"inline-flex items-center justify-center gap-2 whitespace-nowrap text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0 border border-input bg-background hover:bg-accent hover:text-accent-foreground h-9 rounded-md px-3"[39m
                    [33mdata-state[39m=[32m"closed"[39m
                    [33mtype[39m=[32m"button"[39m
                  [36m>[39m
                    [36m<svg[39m
                      [33mclass[39m=[32m"lucide lucide-x mr-2 h-4 w-4"[39m
                      [33mfill[39m=[32m"none"[39m
                      [33mheight[39m=[32m"24"[39m
                      [33mstroke[39m=[32m"currentColor"[39m
                      [33mstroke-linecap[39m=[32m"round"[39m
                      [33mstroke-linejoin[39m=[32m"round"[39m
                      [33mstroke-width[39m=[32m"2"[39m
                      [33mviewBox[39m=[32m"0 0 24 24"[39m
                      [33mwidth[39m=[32m"24"[39m
                      [33mxmlns[39m=[32m"http://www.w3.org/2000/svg"[39m
                    [36m>[39m
                      [36m<path[39m
                        [33md[39m=[32m"M18 6 6 18"[39m
                      [36m/>[39m
                      [36m<path[39m
                        [33md[39m=[32m"m6 6 12 12"[39m
                      [36m/>[39m
                    [36m</svg>[39m
                    [0mRemove Logo[0m
                  [36m</button>[39m
                [36m</div>[39m
                [36m<div>[39m
                  [36m<input[39m
                    [33maccept[39m=[32m"image/*"[39m
                    [33maria-label[39m=[32m"Company Logo for Branding"[39m
                    [33mclass[39m=[32m"hidden"[39m
                    [33mid[39m=[32m"logo-upload"[39m
                    [33mtype[39m=[32m"file"[39m
                  [36m/>[39m
                  [36m<label[39m
                    ...
[36m [2m‚ùØ[22m __vi_import_2__.waitFor.timeout src/pages/__tests__/Settings.whitelabel.test.tsx:[2m306:32[22m[39m
    [90m304| [39m      // CRITICAL: Wait for logo image to appear (confirms logo data l‚Ä¶
    [90m305| [39m      [35mawait[39m [34mwaitFor[39m(() [33m=>[39m {
    [90m306| [39m        [35mconst[39m logoImg [33m=[39m screen[33m.[39m[34mgetByAlt[39m([36m/Company logo/i[39m)[33m;[39m
    [90m   | [39m                               [31m^[39m
    [90m307| [39m        [34mexpect[39m(logoImg)[33m.[39m[34mtoBeInTheDocument[39m()[33m;[39m
    [90m308| [39m        expect(logoImg).toHaveAttribute('src', 'https://example.com/te‚Ä¶
[90m [2m‚ùØ[22m runWithExpensiveErrorDiagnosticsDisabled node_modules/@testing-library/dom/dist/config.js:[2m47:12[22m[39m
[90m [2m‚ùØ[22m checkCallback node_modules/@testing-library/dom/dist/wait-for.js:[2m124:77[22m[39m
[90m [2m‚ùØ[22m Timeout.checkRealTimersCallback node_modules/@testing-library/dom/dist/wait-for.js:[2m118:16[22m[39m

[31m[2m‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ[6/7]‚éØ[22m[39m

[41m[1m FAIL [22m[49m src/pages/__tests__/Settings.whitelabel.test.tsx[2m > [22mSettings - White-Label Branding[2m > [22mLogo Delete Functionality[2m > [22mshould successfully delete logo
[31m[1mTypeError[22m[39m: __vi_import_1__.screen.getByAlt is not a function

Ignored nodes: comments, script, style
[36m<html[39m
  [33mclass[39m=[32m"light"[39m
[36m>[39m
  [36m<head />[39m
  [36m<body>[39m
    [36m<div>[39m
      [36m<div[39m
        [33mclass[39m=[32m"space-y-6 max-w-4xl overflow-x-hidden"[39m
      [36m>[39m
        [36m<div>[39m
          [36m<h2[39m
            [33mclass[39m=[32m"text-3xl font-bold tracking-tight"[39m
          [36m>[39m
            [0mSettings[0m
          [36m</h2>[39m
          [36m<p[39m
            [33mclass[39m=[32m"text-muted-foreground"[39m
          [36m>[39m
            [0mConfigure your company information and preferences[0m
          [36m</p>[39m
        [36m</div>[39m
        [36m<div[39m
          [33mclass[39m=[32m"space-y-6"[39m
        [36m>[39m
          [36m<div[39m
            [33mclass[39m=[32m"rounded-lg border bg-card text-card-foreground shadow-sm"[39m
          [36m>[39m
            [36m<div[39m
              [33mclass[39m=[32m"flex flex-col space-y-1.5 p-6"[39m
            [36m>[39m
              [36m<h3[39m
                [33mclass[39m=[32m"text-2xl font-semibold leading-none tracking-tight flex items-center gap-2"[39m
              [36m>[39m
                [36m<svg[39m
                  [33mclass[39m=[32m"lucide lucide-palette h-5 w-5"[39m
                  [33mfill[39m=[32m"none"[39m
                  [33mheight[39m=[32m"24"[39m
                  [33mstroke[39m=[32m"currentColor"[39m
                  [33mstroke-linecap[39m=[32m"round"[39m
                  [33mstroke-linejoin[39m=[32m"round"[39m
                  [33mstroke-width[39m=[32m"2"[39m
                  [33mviewBox[39m=[32m"0 0 24 24"[39m
                  [33mwidth[39m=[32m"24"[39m
                  [33mxmlns[39m=[32m"http://www.w3.org/2000/svg"[39m
                [36m>[39m
                  [36m<circle[39m
                    [33mcx[39m=[32m"13.5"[39m
                    [33mcy[39m=[32m"6.5"[39m
                    [33mfill[39m=[32m"currentColor"[39m
                    [33mr[39m=[32m".5"[39m
                  [36m/>[39m
                  [36m<circle[39m
                    [33mcx[39m=[32m"17.5"[39m
                    [33mcy[39m=[32m"10.5"[39m
                    [33mfill[39m=[32m"currentColor"[39m
                    [33mr[39m=[32m".5"[39m
                  [36m/>[39m
                  [36m<circle[39m
                    [33mcx[39m=[32m"8.5"[39m
                    [33mcy[39m=[32m"7.5"[39m
                    [33mfill[39m=[32m"currentColor"[39m
                    [33mr[39m=[32m".5"[39m
                  [36m/>[39m
                  [36m<circle[39m
                    [33mcx[39m=[32m"6.5"[39m
                    [33mcy[39m=[32m"12.5"[39m
                    [33mfill[39m=[32m"currentColor"[39m
                    [33mr[39m=[32m".5"[39m
                  [36m/>[39m
                  [36m<path[39m
                    [33md[39m=[32m"M12 2C6.5 2 2 6.5 2 12s4.5 10 10 10c.926 0 1.648-.746 1.648-1.688 0-.437-.18-.835-.437-1.125-.29-.289-.438-.652-.438-1.125a1.64 1.64 0 0 1 1.668-1.668h1.996c3.051 0 5.555-2.503 5.555-5.554C21.965 6.012 17.461 2 12 2z"[39m
                  [36m/>[39m
                [36m</svg>[39m
                [0mBranding[0m
              [36m</h3>[39m
              [36m<p[39m
                [33mclass[39m=[32m"text-sm text-muted-foreground"[39m
              [36m>[39m
                [0mCustomize your brand colors and logo[0m
              [36m</p>[39m
            [36m</div>[39m
            [36m<div[39m
              [33mclass[39m=[32m"p-6 pt-0 space-y-6"[39m
            [36m>[39m
              [36m<div[39m
                [33mclass[39m=[32m"space-y-3"[39m
              [36m>[39m
                [36m<label[39m
                  [33mclass[39m=[32m"text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"[39m
                  [33mfor[39m=[32m"logo-upload"[39m
                [36m>[39m
                  [0mCompany Logo for Branding[0m
                [36m</label>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"mb-3 flex items-center gap-4"[39m
                [36m>[39m
                  [36m<img[39m
                    [33malt[39m=[32m"Company logo"[39m
                    [33mclass[39m=[32m"h-16 w-auto object-contain"[39m
                    [33msrc[39m=[32m"https://example.com/test-logo.png"[39m
                  [36m/>[39m
                  [36m<button[39m
                    [33maria-controls[39m=[32m"radix-:ru:"[39m
                    [33maria-expanded[39m=[32m"false"[39m
                    [33maria-haspopup[39m=[32m"dialog"[39m
                    [33mclass[39m=[32m"inline-flex items-center justify-center gap-2 whitespace-nowrap text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0 border border-input bg-background hover:bg-accent hover:text-accent-foreground h-9 rounded-md px-3"[39m
                    [33mdata-state[39m=[32m"closed"[39m
                    [33mtype[39m=[32m"button"[39m
                  [36m>[39m
                    [36m<svg[39m
                      [33mclass[39m=[32m"lucide lucide-x mr-2 h-4 w-4"[39m
                      [33mfill[39m=[32m"none"[39m
                      [33mheight[39m=[32m"24"[39m
                      [33mstroke[39m=[32m"currentColor"[39m
                      [33mstroke-linecap[39m=[32m"round"[39m
                      [33mstroke-linejoin[39m=[32m"round"[39m
                      [33mstroke-width[39m=[32m"2"[39m
                      [33mviewBox[39m=[32m"0 0 24 24"[39m
                      [33mwidth[39m=[32m"24"[39m
                      [33mxmlns[39m=[32m"http://www.w3.org/2000/svg"[39m
                    [36m>[39m
                      [36m<path[39m
                        [33md[39m=[32m"M18 6 6 18"[39m
                      [36m/>[39m
                      [36m<path[39m
                        [33md[39m=[32m"m6 6 12 12"[39m
                      [36m/>[39m
                    [36m</svg>[39m
                    [0mRemove Logo[0m
                  [36m</button>[39m
                [36m</div>[39m
                [36m<div>[39m
                  [36m<input[39m
                    [33maccept[39m=[32m"image/*"[39m
                    [33maria-label[39m=[32m"Company Logo for Branding"[39m
                    [33mclass[39m=[32m"hidden"[39m
                    [33mid[39m=[32m"logo-upload"[39m
                    [33mtype[39m=[32m"file"[39m
                  [36m/>[39m
                  [36m<label[39m
                    ...
[36m [2m‚ùØ[22m __vi_import_2__.waitFor.timeout src/pages/__tests__/Settings.whitelabel.test.tsx:[2m346:32[22m[39m
    [90m344| [39m      [90m// Wait for logo to be displayed (confirms data loaded)[39m
    [90m345| [39m      [35mawait[39m [34mwaitFor[39m(() [33m=>[39m {
    [90m346| [39m        [35mconst[39m logoImg [33m=[39m screen[33m.[39m[34mgetByAlt[39m([36m/Company logo/i[39m)[33m;[39m
    [90m   | [39m                               [31m^[39m
    [90m347| [39m        [34mexpect[39m(logoImg)[33m.[39m[34mtoBeInTheDocument[39m()[33m;[39m
    [90m348| [39m      }[33m,[39m { timeout[33m:[39m [34m5000[39m })[33m;[39m
[90m [2m‚ùØ[22m runWithExpensiveErrorDiagnosticsDisabled node_modules/@testing-library/dom/dist/config.js:[2m47:12[22m[39m
[90m [2m‚ùØ[22m checkCallback node_modules/@testing-library/dom/dist/wait-for.js:[2m124:77[22m[39m
[90m [2m‚ùØ[22m Timeout.checkRealTimersCallback node_modules/@testing-library/dom/dist/wait-for.js:[2m118:16[22m[39m

[31m[2m‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ[7/7]‚éØ[22m[39m


[2m Test Files [22m [1m[31m3 failed[39m[22m[2m | [22m[1m[32m17 passed[39m[22m[90m (20)[39m
[2m      Tests [22m [1m[31m7 failed[39m[22m[2m | [22m[1m[32m207 passed[39m[22m[90m (214)[39m
[2m   Start at [22m 13:17:53
[2m   Duration [22m 62.48s[2m (transform 2.17s, setup 5.78s, collect 6.70s, tests 34.73s, environment 11.70s, prepare 164ms)[22m

